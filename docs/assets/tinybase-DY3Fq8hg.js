var CC=Object.defineProperty;var dC=(s,e,t)=>e in s?CC(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Qu=(s,e,t)=>dC(s,typeof e!="symbol"?e+"":e,t);import{R as ca,j as y}from"./react-D4UEBxRr.js";const Di=s=>typeof s,LC="tinybase",oo="",fC=Di(oo),TC=Di(Di),RC="Listener",ia="Result",wC="get",hC="set",yC="add",VC="Has",gC="has",zt="Ids",Yl="Table",EC=Yl+zt,ra="Row",Y$=ra+"Count",q$=ra+zt,K$="Sorted"+ra+zt,aa="Cell",X$=aa+zt,la="Value",bC=la+"s",PC=la+zt,Z$="Metric",jC="Index",I$="Slice",DC="Relationship",kC="Remote"+ra+"Id",xC="Query",Ga=globalThis,ac=s=>s==null,jr=(s,e,t)=>ac(s)?t==null?void 0:t():e(s),O$=s=>Di(s)==fC,s1=s=>Di(s)==TC,NC=s=>Array.isArray(s),Dr=s=>s.length,vC=()=>{},AC=(s,e)=>ql(new Array(s).fill(0),(t,o)=>e(o)),e1=(s,e)=>s.every(e),Ja=(s,e)=>Dr(s)===Dr(e)&&e1(s,(t,o)=>e[o]===t),ql=(s,e)=>s.map(e),MC=(s,e)=>s.filter(e),Bu=(s,e,t)=>s.with(e,t),ua=Object,Gu=s=>ua.getPrototypeOf(s),FC=ua.entries,fl=s=>!ac(s)&&jr(Gu(s),e=>e==ua.prototype||ac(Gu(e)),()=>!0),t1=ua.keys,n1=(s,e)=>jr(s,t=>t[e]),_C=(s,e)=>e in s,zC=(s,e)=>(delete s[e],s),mC=s=>Dr(t1(s)),o1=(s,e)=>{const t=FC(s);return Dr(t)===mC(e)&&e1(t,([o,c])=>fl(c)?fl(e[o])?o1(e[o],c):!1:e[o]===c)},{PureComponent:aE,createContext:HC,useCallback:ki,useContext:Kl,useEffect:Ju,useLayoutEffect:lE,useMemo:c1,useRef:UC,useState:Tl,useSyncExternalStore:pC}=ca;var Ce=(s=>(s[s.Store=0]="Store",s[s.Metrics=1]="Metrics",s[s.Indexes=2]="Indexes",s[s.Relationships=3]="Relationships",s[s.Queries=4]="Queries",s[s.Checkpoints=5]="Checkpoints",s[s.Persister=6]="Persister",s[s.Synchronizer=7]="Synchronizer",s))(Ce||{});const Ya=LC+"_uirc",kr=Ga[Ya]?Ga[Ya]:Ga[Ya]=HC([]),yc=(s,e)=>{const t=Kl(kr);return ac(s)?t[e*2]:O$(s)?n1(t[e*2+1],s):s},Hi=(s,e)=>{const t=yc(s,e);return ac(s)||O$(s)?t:s},Ui=s=>t1(Kl(kr)[s*2+1]??{}),Gt=[],Yu=[{},[],[Gt,void 0,Gt],void 0,!1,0],WC=[o1,Ja,([s,e,t],[o,c,a])=>e===c&&Ja(s,o)&&Ja(t,a)],QC=(s,e)=>s===e,BC=(s,e,...t)=>{var c;const o=(c=s==null?void 0:s[yC+e+RC])==null?void 0:c.call(s,...t);return()=>{var a;return(a=s==null?void 0:s.delListener)==null?void 0:a.call(s,o)}},Zs=(s,e,t,o=Gt)=>{const c=UC(Yu[t]),a=ki(()=>{var T;const d=((T=e==null?void 0:e[(t==4?gC:wC)+s])==null?void 0:T.call(e,...o))??Yu[t];return(WC[t]??QC)(d,c.current)?c.current:c.current=d},[e,t,s,...o]),u=ki(d=>BC(e,(t==4?VC:oo)+s,...o,d),[e,t,s,...o]);return pC(u,a,a)},i1=(s,e,t,o=Gt,c=vC,a=Gt,...u)=>{const d=st(s);return ki(T=>jr(d,S=>jr(t(T,S),L=>c(S[hC+e](...GC(u,S,T),L),L))),[d,e,...o,...a,...JC(u)])},GC=(s,e,t)=>ql(s,o=>s1(o)?o(t,e):o),JC=s=>MC(s,e=>!s1(e)),YC=(s,e,t,o,c,a)=>Zs(K$,st(a),1,[s,e,t,o,c]),qC=(s,e=Gt)=>c1(s,e),KC=()=>Ui(Ce.Store),r1=s=>yc(s,Ce.Store),st=s=>Hi(s,Ce.Store),XC=s=>Zs(EC,st(s),1),Xl=(s,e)=>Zs(Yl+X$,st(e),1,[s]),ZC=(s,e)=>Zs(Y$,st(e),5,[s]),IC=(s,e)=>Zs(q$,st(e),1,[s]),OC=(s,e,t,o,c,a)=>YC(...fl(s)?[s.tableId,s.cellId,s.descending??!1,s.offset??0,s.limit,e]:[s,e,t,o,c,a]),Vc=(s,e,t,o)=>Zs(aa,st(o),3,[s,e,t]),sd=s=>Zs(bC,st(s),0),a1=s=>Zs(PC,st(s),1),Ho=(s,e)=>Zs(la,st(e),3,[s]),$a=(s,e,t,o,c,a,u,d)=>i1(a,aa,o,c,u,d,s,e,t),xr=(s,e,t,o,c,a)=>i1(o,la,e,t,c,a,s),ed=()=>Ui(Ce.Metrics),l1=s=>yc(s,Ce.Metrics),u1=s=>Hi(s,Ce.Metrics),td=s=>Zs(Z$+zt,u1(s),1),nd=(s,e)=>Zs(Z$,u1(e),3,[s]),od=()=>Ui(Ce.Indexes),$1=s=>yc(s,Ce.Indexes),Sa=s=>Hi(s,Ce.Indexes),cd=(s,e)=>Zs(I$+zt,Sa(e),1,[s]),id=s=>Zs(jC+zt,Sa(s),1),rd=(s,e,t)=>Zs(I$+q$,Sa(t),1,[s,e]),ad=()=>Ui(Ce.Relationships),S1=s=>yc(s,Ce.Relationships),Zl=s=>Hi(s,Ce.Relationships),ld=s=>Zs(DC+zt,Zl(s),1),ud=(s,e,t)=>Zs(kC,Zl(t),3,[s,e]),$d=()=>Ui(Ce.Queries),C1=s=>yc(s,Ce.Queries),pi=s=>Hi(s,Ce.Queries),Sd=s=>Zs(xC+zt,pi(s),1),Cd=(s,e)=>Zs(ia+Yl+X$,pi(e),1,[s]),dd=(s,e)=>Zs(ia+Y$,pi(e),5,[s]),Ld=(s,e,t,o=0,c,a)=>Zs(ia+K$,pi(a),1,[s,e,t,o,c]),fd=(s,e,t,o)=>Zs(ia+aa,pi(o),3,[s,e,t]),Td=(s,e,t=Gt,o,c=Gt,a,u=Gt)=>{const[,d]=Tl(),[T,S]=Tl();return Ju(()=>{(async()=>{const L=s?await e(s):void 0;S(L),L&&o&&(async()=>(await o(L),d([])))()})()},[s,...t,...c]),Ju(()=>()=>{T&&T.destroy()},[T,...u]),T},Bn=(s,e,t,o,c)=>[t??e[s*2],{...e[s*2+1],...o,...c[s]}],uE=({store:s,storesById:e,metrics:t,metricsById:o,indexes:c,indexesById:a,relationships:u,relationshipsById:d,queries:T,queriesById:S,checkpoints:L,checkpointsById:R,persister:w,persistersById:g,synchronizer:V,synchronizersById:E,children:D})=>{const k=Kl(kr),[P,cs]=Tl(()=>AC(8,()=>({}))),Ts=ki((Q,b,N)=>cs(m=>n1(m[Q],b)==N?m:Bu(m,Q,{...m[Q],[b]:N})),[]),ts=ki((Q,b)=>cs(N=>_C(N[Q],b)?Bu(N,Q,zC(N[Q],b)):N),[]);return y.jsx(kr.Provider,{value:c1(()=>[...Bn(0,k,s,e,P),...Bn(1,k,t,o,P),...Bn(2,k,c,a,P),...Bn(3,k,u,d,P),...Bn(4,k,T,S,P),...Bn(5,k,L,R,P),...Bn(6,k,w,g,P),...Bn(7,k,V,E,P),Ts,ts],[P,s,e,t,o,c,a,u,d,T,S,L,R,w,g,V,E,k,Ts,ts]),children:D})},Il=(s,e,t,o)=>{const c=ac(e)||!NC(s)?s:ql(s,(a,u)=>u>0?[e,a]:a);return t?[o,":{",c,"}"]:c},Ol=({tableId:s,rowId:e,cellId:t,store:o,debugIds:c})=>Il(oo+(Vc(s,e,t,o)??oo),void 0,c,t),Rd=({valueId:s,store:e,debugIds:t})=>Il(oo+(Ho(s,e)??oo),void 0,t,s),wd=({queryId:s,rowId:e,cellId:t,queries:o,debugIds:c})=>Il(oo+(fd(s,e,t,o)??oo),void 0,c,t),co=s=>typeof s,Yt="",d1=".",Ca=co(Yt),L1=co(!0),da=co(0),hd=co(co),Oi="type",Xe="default",yd="Listener",Vd="add",jo="Has",La="Ids",zo="Table",qu=zo+"s",gd=zo+La,Nr="Row",Ed=Nr+"Count",bd=Nr+La,bi="Cell",Ku=bi+La,lc="Value",Rl=lc+"s",Pd=lc+La,rc="currentTarget",Xu="value",f1="￼",vs=s=>Yt+s,jd=(s,e=Yt,t)=>s.split(e,t),Dd=globalThis,Zu=Dd.window,T1=Math,kd=T1.min,Iu=T1.floor,xd=isFinite,Nd=(s,e)=>s instanceof e,Vs=s=>s==null,ee=(s,e,t)=>Vs(s)?t==null?void 0:t():e(s),R1=s=>s==Ca||s==L1,vd=s=>co(s)==Ca,qa=s=>co(s)==hd,xi=s=>Array.isArray(s),Ou=(s,e,t)=>s.slice(e,t),At=s=>s.length,Ad=(s,e)=>s.test(e),w1=s=>{throw new Error(s)},Bt=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},Md=(s,e)=>s.includes(e),Fd=(s,e)=>s.every(e),_d=(s,e)=>At(s)===At(e)&&Fd(s,(t,o)=>e[o]===t),h1=(s,e)=>s.sort(e),Ni=(s,e)=>s.forEach(e),zd=(s,e=Yt)=>s.join(e),Xs=(s,e)=>s.map(e),jt=s=>At(s)==0,md=(s,e,t)=>s.reduce(e,t),Hd=(s,e)=>s.splice(0,e),vi=(s,...e)=>s.push(...e),y1=s=>s.shift(),lo=Object,s$=s=>lo.getPrototypeOf(s),V1=lo.entries,Ud=lo.isFrozen,vr=s=>!Vs(s)&&ee(s$(s),e=>e==lo.prototype||Vs(s$(e)),()=>!0),pd=lo.keys,g1=lo.freeze,Pi=(s=[])=>lo.fromEntries(s),fi=(s,e)=>e in s,E1=(s,e)=>(delete s[e],s),Wd=(s,e)=>Ni(V1(s),([t,o])=>e(o,t)),uc=(s,e)=>Xs(V1(s),([t,o])=>e(o,t)),Wt=(s,e)=>Pi(uc(s,(t,o)=>[o,e(t,o)])),Qd=s=>At(pd(s)),pe=s=>vr(s)&&Qd(s)==0,Gn=(s,e,t,o=0)=>Vs(s)||!vr(s)||!o&&pe(s)||Ud(s)?(t==null||t(),!1):(Wd(s,(c,a)=>{e(c,a)||E1(s,a)}),o?!0:!pe(s)),b1=JSON.stringify,mo=JSON.parse,Qt=s=>b1(s,(e,t)=>Nd(t,Map)?lo.fromEntries([...t]):t),Bd=s=>b1(s,(e,t)=>t===void 0?f1:t),Gd=s=>mo(s,(e,t)=>t===f1?void 0:t),su=s=>e=>md(Jd(e),(t,o)=>t+s(o),0),eu=s=>(s==null?void 0:s.size)??0,tu=su(eu),Ti=su(tu),Ka=su(Ti),he=(s,e)=>(s==null?void 0:s.has(e))??!1,ds=s=>Vs(s)||eu(s)==0,Jd=s=>[...(s==null?void 0:s.values())??[]],Xa=s=>s.clear(),Ps=(s,e)=>s==null?void 0:s.forEach(e),Ar=(s,e)=>s==null?void 0:s.delete(e),fs=s=>new Map(s),ii=s=>[...(s==null?void 0:s.keys())??[]],H=(s,e)=>s==null?void 0:s.get(e),Xn=(s,e)=>Ps(s,(t,o)=>e(o,t)),Yd=(s,e)=>Xs([...(s==null?void 0:s.entries())??[]],([t,o])=>e(o,t)),Ns=(s,e,t)=>Vs(t)?(Ar(s,e),s):s==null?void 0:s.set(e,t),se=(s,e,t,o)=>(he(s,e)?o==null||o(H(s,e)):Ns(s,e,t()),H(s,e)),Do=(s,e,t,o=Ns)=>(Wt(e,(c,a)=>t(s,a,c)),Xn(s,c=>fi(e,c)?0:o(s,c)),s),me=(s,e,t,o)=>{const c={};return Ps(s,(a,u)=>{if(!(t!=null&&t(a,u))){const d=e?e(a,u):a;o!=null&&o(d)||(c[u]=d)}}),c},wl=(s,e,t)=>me(s,o=>me(o,e,t),ds,pe),sr=(s,e,t)=>me(s,o=>wl(o,e,t),ds,pe),so=(s,e)=>{const t=fs();return Ps(s,(o,c)=>t.set(c,(e==null?void 0:e(o))??o)),t},hl=s=>so(s,so),Za=s=>so(s,hl),yl=(s,e,t,o,c=0)=>ee((t?se:H)(s,e[c],c>At(e)-2?t:fs),a=>{if(c>At(e)-2)return o!=null&&o(a)&&Ns(s,e[c]),a;const u=yl(a,e,t,o,c+1);return ds(a)&&Ns(s,e[c]),u}),qd=/^\d+$/,P1=()=>{const s=[];let e=0;return[t=>(t?y1(s):null)??Yt+e++,t=>{Ad(qd,t)&&At(s)<1e3&&vi(s,t)}]},Ri=s=>new Set(xi(s)||Vs(s)?s:[s]),wi=(s,e)=>s==null?void 0:s.add(e),Kd=(s,e=[Yt])=>{const t=[],o=(c,a)=>a==At(e)?vi(t,c):e[a]===null?Ps(c,u=>o(u,a+1)):Ni([e[a],null],u=>o(H(c,u),a+1));return o(s,0),t},j1=s=>{let e;const[t,o]=P1(),c=fs();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return Ns(c,V,[S,L,R,w,g]),wi(yl(L,R??[Yt],Ri),V),V},(S,L,...R)=>Ni(Kd(S,L),w=>Ps(w,g=>H(c,g)[0](e,...L??[],...R))),S=>ee(H(c,S),([,L,R])=>(yl(L,R??[Yt],void 0,w=>(Ar(w,S),ds(w)?1:0)),Ns(c,S),o(S),R)),S=>ee(H(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=At(E);D==At(R)?L(e,...E,...g(E)):Vs(R[D])?Ni(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},er=fs(),tr=fs(),Xd=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[c]])=>!pe(o)||!pe(c),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,c])=>!pe(o)||!pe(c),e.setContent]:w1("Store type not supported by this Persister"),Zd=(s,e,t,o,c,a,u,d={},T=0,S=[])=>{let L=0,R=0,w=0,g,V,E;se(er,S,()=>0),se(tr,S,()=>[]);const D=fs(),[k,P,cs,Ts,ts]=Xd(u,s,T),[Q,b,N]=j1(()=>A),m=f=>{f!=L&&(L=f,b(D,void 0,L))},p=async()=>{if(!H(er,S)){for(Ns(er,S,1);!Vs(g=y1(H(tr,S)));)await Bt(g,a);Ns(er,S,0)}},q=f=>{(k&&xi(f==null?void 0:f[0])?(f==null?void 0:f[2])===1?s.applyMergeableChanges:s.setMergeableContent:(f==null?void 0:f[2])===1?s.applyChanges:s.setContent)(f)},ns=async f=>(L!=2&&(m(1),R++,await as(async()=>{await Bt(async()=>{const v=await e();xi(v)?q(v):f?ts(f):w1(`Content is not an array: ${v}`)},()=>{f&&ts(f)}),m(0)})),A),K=async f=>(M(),await ns(f),await Bt(async()=>V=await o(async(v,U)=>{U||v?L!=2&&(m(1),R++,q(U??v),m(0)):await ns()}),a),A),M=async()=>(V&&(await Bt(()=>c(V),a),V=void 0),A),ss=()=>!Vs(V),X=async f=>(L!=1&&(m(2),w++,await as(async()=>{await Bt(()=>t(P,f),a),m(0)})),A),Z=async()=>(G(),await X(),E=s.addDidFinishTransactionListener(()=>{const f=cs();Ts(f)&&X(f)}),A),G=async()=>(E&&(s.delListener(E),E=void 0),A),Ds=()=>!Vs(E),bs=async(f,v=!1)=>{const[U,ws]=v?[Z,K]:[K,Z];return await U(f),await ws(f),A},B=async(f=!1)=>{const[v,U]=f?[G,M]:[M,G];return await v(),await U(),A},Rs=()=>L,hs=f=>Q(f,D),ks=f=>(N(f),s),as=async(...f)=>(vi(H(tr,S),...f),await p(),A),A={load:ns,startAutoLoad:K,stopAutoLoad:M,isAutoLoading:ss,save:X,startAutoSave:Z,stopAutoSave:G,isAutoSaving:Ds,startAutoPersisting:bs,stopAutoPersisting:B,getStatus:Rs,addStatusListener:hs,delListener:ks,schedule:as,getStore:()=>s,destroy:()=>(Hd(H(tr,S)),B()),getStats:()=>({loads:R,saves:w}),...d};return g1(A)},e$="storage",Id=(s,e,t,o)=>Zd(s,async()=>Gd(t.getItem(e)),async T=>t.setItem(e,Bd(T())),T=>{const S=L=>{L.storageArea===t&&L.key===e&&Bt(()=>T(mo(L.newValue)),T)};return Zu.addEventListener(e$,S),S},T=>Zu.removeEventListener(e$,T),o,3,{getStorageName:()=>e}),Od=(s,e,t)=>Id(s,e,sessionStorage,t),ec=s=>{const e=co(s);return R1(e)||e==da&&xd(s)?e:void 0},t$=(s,e,t,o,c)=>Vs(c)?s.delCell(e,t,o,!0):s.setCell(e,t,o,c),n$=(s,e,t)=>Vs(t)?s.delValue(e):s.setValue(e,t),Ia=(s,e,t,o)=>s==Ca?e:s==da?t:o,sL=(s,e)=>(s??0)<(e??0)?-1:1,nr=s=>[s,s],Ws=(s,e=tu)=>e(s[0])+e(s[1]),Qs=()=>[fs(),fs()],o$=s=>[...s],or=([s,e])=>s===e,ri=(s,e,t)=>Ns(s,e,H(s,e)==-t?void 0:t),D1=()=>{let s,e,t=!1,o=!1,c=0,a=[];const u=fs(),d=fs(),T=fs(),S=fs(),L=fs(),R=fs(),w=fs(),g=fs(),V=fs(),E=fs(),D=fs(),k=fs(),P=fs(),cs=fs(),Ts=Ri(),ts=fs(),Q=fs(),b=fs(),N=fs(),m=Qs(),p=Qs(),q=Qs(),ns=Qs(),K=Qs(),M=Qs(),ss=Qs(),X=Qs(),Z=Qs(),G=Qs(),Ds=Qs(),bs=Qs(),B=Qs(),Rs=Qs(),hs=Qs(),ks=Qs(),as=Qs(),Ks=Qs(),Hs=Qs(),Us=Qs(),A=Qs(),f=Qs(),v=fs(),U=Qs(),[ws,z,Et,oe]=j1(()=>Y),Zt=n=>Gn(n,i=>Gn(i,It)),jc=n=>Gn(n,It),It=n=>{if(!Gn(n,(r,l)=>Md([Oi,Xe],l)))return!1;const i=n[Oi];return!R1(i)&&i!=da?!1:(ec(n[Xe])!=i&&E1(n,Xe),!0)},Dc=xi,kc=n=>Gn(n,Ot,Fs),Ot=(n,i)=>(!s||he(D,i)||Fs(i))&&Gn(n,(r,l)=>Ve(i,l,r),()=>Fs(i)),Ve=(n,i,r,l)=>Gn(l?r:nn(r,n,i),($,C)=>ee(sn(n,i,C,$),h=>(r[C]=h,!0),()=>!1),()=>Fs(n,i)),sn=(n,i,r,l)=>s?ee(H(H(D,n),r),$=>ec(l)!=$[Oi]?Fs(n,i,r,l,$[Xe]):l,()=>Fs(n,i,r,l)):Vs(ec(l))?Fs(n,i,r,l):l,en=(n,i)=>Gn(i?n:xc(n),(r,l)=>ee(tn(l,r),$=>(n[l]=$,!0),()=>!1),()=>le()),tn=(n,i)=>e?ee(H(P,n),r=>ec(i)!=r[Oi]?le(n,i,r[Xe]):i,()=>le(n,i)):Vs(ec(i))?le(n,i):i,nn=(n,i,r)=>(ee(H(k,i),([l,$])=>{Ps(l,(C,h)=>{fi(n,h)||(n[h]=C)}),Ps($,C=>{fi(n,C)||Fs(i,r,C)})}),n),xc=n=>(e&&(Ps(cs,(i,r)=>{fi(n,r)||(n[r]=i)}),Ps(Ts,i=>{fi(n,i)||le(i)})),n),on=n=>Do(D,n,(i,r,l)=>{const $=fs(),C=Ri();Do(se(D,r,fs),l,(h,j,x)=>{Ns(h,j,x),ee(x[Xe],os=>Ns($,j,os),()=>wi(C,j))}),Ns(k,r,[$,C])},(i,r)=>{Ns(D,r),Ns(k,r)}),cn=n=>Do(P,n,(i,r,l)=>{Ns(P,r,l),ee(l[Xe],$=>Ns(cs,r,$),()=>wi(Ts,r))},(i,r)=>{Ns(P,r),Ns(cs,r),Ar(Ts,r)}),rn=n=>pe(n)?Me():ve(n),Nc=([n,i])=>{(pe(n)?Me:ve)(n),(pe(i)?Fe:Ae)(i)},an=n=>Do(b,n,(i,r,l)=>ge(r,l),(i,r)=>Sn(r)),ge=(n,i)=>Do(se(b,n,()=>(fn(n,1),Ns(ts,n,P1()),Ns(Q,n,fs()),fs())),i,(r,l,$)=>ae(n,r,l,$),(r,l)=>Cn(n,r,l)),ae=(n,i,r,l,$)=>Do(se(i,r,()=>(Tn(n,r,1),fs())),l,(C,h,j)=>et(n,r,C,h,j),(C,h)=>dn(n,i,r,C,h,$)),et=(n,i,r,l,$)=>{he(r,l)||Rn(n,i,l,1);const C=H(r,l);$!==C&&(wn(n,i,l,C,$),Ns(r,l,$))},ln=(n,i,r,l,$)=>ee(H(i,r),C=>et(n,r,C,l,$),()=>ae(n,i,r,nn({[l]:$},n,r))),un=n=>pe(n)?Fe():Ae(n),$n=n=>Do(N,n,(i,r,l)=>Ee(r,l),(i,r)=>Ln(r)),Ee=(n,i)=>{he(N,n)||hn(n,1);const r=H(N,n);i!==r&&(yn(n,r,i),Ns(N,n,i))},vc=(n,i)=>{const[r]=H(ts,n);let l;do l=r(i);while(he(H(b,n),l));return l},be=n=>H(b,n)??ge(n,{}),Sn=n=>ge(n,{}),Cn=(n,i,r)=>{const[,l]=H(ts,n);l(r),ae(n,i,r,{},!0)},dn=(n,i,r,l,$,C)=>{var x;const h=H((x=H(k,n))==null?void 0:x[0],$);if(!Vs(h)&&!C)return et(n,r,l,$,h);const j=os=>{wn(n,r,os,H(l,os)),Rn(n,r,os,-1),Ns(l,os)};Vs(h)?j($):Xn(l,j),ds(l)&&(Tn(n,r,-1),ds(Ns(i,r))&&(fn(n,-1),Ns(b,n),Ns(ts,n),Ns(Q,n)))},Ln=n=>{const i=H(cs,n);if(!Vs(i))return Ee(n,i);yn(n,H(N,n)),hn(n,-1),Ns(N,n)},fn=(n,i)=>ri(u,n,i),Tn=(n,i,r)=>ri(se(S,n,fs),i,r)&&Ns(T,n,se(T,n,()=>0)+r),Rn=(n,i,r,l)=>{const $=H(Q,n),C=H($,r)??0;(C==0&&l==1||C==1&&l==-1)&&ri(se(d,n,fs),r,l),Ns($,r,C!=-l?C+l:null),ri(se(se(L,n,fs),i,fs),r,l)},wn=(n,i,r,l,$)=>{var C;se(se(se(R,n,fs),i,fs),r,()=>[l,0])[1]=$,(C=a[3])==null||C.call(a,n,i,r,$)},hn=(n,i)=>ri(w,n,i),yn=(n,i,r)=>{var l;se(g,n,()=>[i,0])[1]=r,(l=a[4])==null||l.call(a,n,r)},Fs=(n,i,r,l,$)=>(vi(se(se(se(V,n,fs),i,fs),r,()=>[]),l),$),le=(n,i,r)=>(vi(se(E,n,()=>[]),i),r),Pe=(n,i,r)=>ee(H(H(H(R,n),i),r),([l,$])=>[!0,l,$],()=>[!1,...nr(De(n,i,r))]),Vn=n=>ee(H(g,n),([i,r])=>[!0,i,r],()=>[!1,...nr(ke(n))]),gn=n=>!ds(V)&&!ds(ks[n])?Ps(n?Za(V):V,(i,r)=>Ps(i,(l,$)=>Ps(l,(C,h)=>z(ks[n],[r,$,h],C)))):0,En=n=>!ds(E)&&!ds(as[n])?Ps(n?so(E):E,(i,r)=>z(as[n],[r],i)):0,ue=(n,i,r,l)=>{if(!ds(n))return z(i,l,()=>me(n)),Xn(n,($,C)=>z(r,[...l??[],$],C==1)),1},bn=n=>{const i=xe();i!=t&&z(m[n],void 0,i);const r=ds(G[n]),l=ds(B[n])&&ds(Rs[n])&&ds(Z[n])&&ds(Ds[n])&&ds(M[n])&&ds(ss[n])&&ds(X[n])&&r&&ds(q[n])&&ds(ns[n]),$=ds(hs[n])&&ds(bs[n])&&ds(K[n])&&ds(p[n]);if(!l||!$){const C=n?[so(u),hl(d),so(T),hl(S),Za(L),Za(R)]:[u,d,T,S,L,R];if(!l){ue(C[0],q[n],ns[n]),Ps(C[1],(j,x)=>ue(j,M[n],ss[n],[x])),Ps(C[2],(j,x)=>{j!=0&&z(X[n],[x],kn(x))});const h=Ri();Ps(C[3],(j,x)=>{ue(j,Z[n],Ds[n],[x])&&!r&&(z(G[n],[x,null]),wi(h,x))}),r||Ps(C[5],(j,x)=>{if(!he(h,x)){const os=Ri();Ps(j,_s=>Ps(_s,([_e,ze],$e)=>ze!==_e?wi(os,$e):Ar(_s,$e))),Ps(os,_s=>z(G[n],[x,_s]))}}),Ps(C[4],(j,x)=>Ps(j,(os,_s)=>ue(os,B[n],Rs[n],[x,_s])))}if(!$){let h;Ps(C[5],(j,x)=>{let os;Ps(j,(_s,_e)=>{let ze;Ps(_s,([$e,Qn],ci)=>{Qn!==$e&&(z(hs[n],[x,_e,ci],Qn,$e,Pe),h=os=ze=1)}),ze&&z(bs[n],[x,_e],Pe)}),os&&z(K[n],[x],Pe)}),h&&z(p[n],void 0,Pe)}}},Pn=n=>{const i=Ne();i!=o&&z(Ks[n],void 0,i);const r=ds(Us[n])&&ds(A[n]),l=ds(f[n])&&ds(Hs[n]);if(!r||!l){const $=n?[so(w),so(g)]:[w,g];if(r||ue($[0],Us[n],A[n]),!l){let C;Ps($[1],([h,j],x)=>{j!==h&&(z(f[n],[x],j,h,Vn),C=1)}),C&&z(Hs[n],void 0,Vn)}}},_=(n,...i)=>(rt(()=>n(...Xs(i,vs))),Y),jn=(n,i,r,l,$)=>{let C=je(n,i,...r);return ws(()=>{const h=je(n,i,...r);_d(h,C)||(C=h,l(Y,n,i,...r,C))},G[$?1:0],[n,i],[$s])},Ac=()=>[tt(),ot()],tt=()=>sr(b),$s=()=>ii(b),Mc=n=>wl(H(b,vs(n))),Dn=n=>ii(H(Q,vs(n))),kn=n=>eu(H(b,vs(n))),Is=n=>ii(H(b,vs(n))),je=(n,i,r,l=0,$)=>vr(n)?je(n.tableId,n.cellId,n.descending,n.offset,n.limit):Xs(Ou(h1(Yd(H(b,vs(n)),(C,h)=>[Vs(i)?h:H(C,vs(i)),h]),([C],[h])=>sL(C,h)*(r?-1:1)),l,Vs($)?$:l+$),([,C])=>C),Fc=(n,i)=>me(H(H(b,vs(n)),vs(i))),nt=(n,i)=>ii(H(H(b,vs(n)),vs(i))),De=(n,i,r)=>H(H(H(b,vs(n)),vs(i)),vs(r)),ot=()=>me(N),ct=()=>ii(N),ke=n=>H(N,vs(n)),xe=()=>!ds(b),xn=n=>he(b,vs(n)),Nn=(n,i)=>he(H(Q,vs(n)),vs(i)),vn=(n,i)=>he(H(b,vs(n)),vs(i)),An=(n,i,r)=>he(H(H(b,vs(n)),vs(i)),vs(r)),Ne=()=>!ds(N),Mn=n=>he(N,vs(n)),_c=()=>Qt(b),zc=()=>Qt(N),mc=()=>Qt([b,N]),Hc=()=>Qt(D),Uc=()=>Qt(P),pc=()=>Qt([D,P]),Wc=n=>_(()=>{const i=qa(n)?n():n;Dc(i)&&Nc(i)}),ve=n=>_(()=>kc(n)?an(n):0),Qc=(n,i)=>_(r=>Ot(i,r)?ge(r,i):0,n),Bc=(n,i,r)=>_((l,$)=>Ve(l,$,r)?ae(l,be(l),$,r):0,n,i),Gc=(n,i,r=!0)=>rt(()=>{let l;return Ve(n,l,i)&&(n=vs(n),ae(n,be(n),l=vc(n,r?1:0),i)),l}),Jc=(n,i,r)=>_((l,$)=>{if(Ve(l,$,r,1)){const C=be(l);Wt(r,(h,j)=>ln(l,C,$,j,h))}},n,i),Yc=(n,i,r,l)=>_(($,C,h)=>ee(sn($,C,h,qa(l)?l(De($,C,h)):l),j=>ln($,be($),C,h,j)),n,i,r),Ae=n=>_(()=>en(n)?$n(n):0),qc=n=>_(()=>en(n,1)?Wt(n,(i,r)=>Ee(r,i)):0),Kc=(n,i)=>_(r=>ee(tn(r,qa(i)?i(ke(r)):i),l=>Ee(r,l)),n),Xc=n=>_(()=>{Wt(n[0],(i,r)=>Vs(i)?mn(r):Wt(i,(l,$)=>Vs(l)?Hn(r,$):Wt(l,(C,h)=>t$(Y,r,$,h,C)))),Wt(n[1],(i,r)=>n$(Y,r,i))}),Fn=n=>(Bt(()=>rn(mo(n))),Y),Zc=n=>(Bt(()=>un(mo(n))),Y),Ic=n=>_(()=>Bt(()=>{const[i,r]=mo(n);rn(i),un(r)},()=>Fn(n))),_n=n=>_(()=>{if((s=Zt(n))&&(on(n),!ds(b))){const i=tt();Me(),ve(i)}}),zn=n=>_(()=>{if(e=jc(n)){const i=ot();it(),Fe(),e=!0,cn(n),Ae(i)}}),Oc=(n,i)=>_(()=>{_n(n),zn(i)}),Me=()=>_(()=>an({})),mn=n=>_(i=>he(b,i)?Sn(i):0,n),Hn=(n,i)=>_((r,l)=>ee(H(b,r),$=>he($,l)?Cn(r,$,l):0),n,i),si=(n,i,r,l)=>_(($,C,h)=>ee(H(b,$),j=>ee(H(j,C),x=>he(x,h)?dn($,j,C,x,h,l):0)),n,i,r),Fe=()=>_(()=>$n({})),ei=n=>_(i=>he(N,i)?Ln(i):0,n),Un=()=>_(()=>{on({}),s=!1}),it=()=>_(()=>{cn({}),e=!1}),ti=()=>_(()=>{Un(),it()}),rt=(n,i)=>{if(c!=-1){pn();const r=n();return Wn(i),r}},pn=()=>{var n;return c!=-1&&c++,c==1&&((n=a[0])==null||n.call(a),z(v)),Y},ni=()=>[me(R,(n,i)=>H(u,i)===-1?void 0:me(n,(r,l)=>H(H(S,i),l)===-1?void 0:me(r,([,$])=>$,$=>or($)),ds,pe),ds,pe),me(g,([,n])=>n,n=>or(n)),1],oi=()=>[!ds(R),!ds(g),sr(R,o$,or),sr(V),me(g,o$,or),me(E),me(u),wl(S),sr(L),me(w)],Wn=n=>{var i,r;return c>0&&(c--,c==0&&(c=1,gn(1),ds(R)||bn(1),En(1),ds(g)||Pn(1),n!=null&&n(Y)&&(Ps(R,(l,$)=>Ps(l,(C,h)=>Ps(C,([j],x)=>t$(Y,$,h,x,j)))),Xa(R),Ps(g,([l],$)=>n$(Y,$,l)),Xa(g)),z(U[0],void 0),c=-1,gn(0),ds(R)||bn(0),En(0),ds(g)||Pn(0),(i=a[1])==null||i.call(a),z(U[1],void 0),(r=a[2])==null||r.call(a),c=0,t=xe(),o=Ne(),Ni([u,d,T,S,L,R,V,w,g,E],Xa))),Y},Y={getContent:Ac,getTables:tt,getTableIds:$s,getTable:Mc,getTableCellIds:Dn,getRowCount:kn,getRowIds:Is,getSortedRowIds:je,getRow:Fc,getCellIds:nt,getCell:De,getValues:ot,getValueIds:ct,getValue:ke,hasTables:xe,hasTable:xn,hasTableCell:Nn,hasRow:vn,hasCell:An,hasValues:Ne,hasValue:Mn,getTablesJson:_c,getValuesJson:zc,getJson:mc,getTablesSchemaJson:Hc,getValuesSchemaJson:Uc,getSchemaJson:pc,hasTablesSchema:()=>s,hasValuesSchema:()=>e,setContent:Wc,setTables:ve,setTable:Qc,setRow:Bc,addRow:Gc,setPartialRow:Jc,setCell:Yc,setValues:Ae,setPartialValues:qc,setValue:Kc,applyChanges:Xc,setTablesJson:Fn,setValuesJson:Zc,setJson:Ic,setTablesSchema:_n,setValuesSchema:zn,setSchema:Oc,delTables:Me,delTable:mn,delRow:Hn,delCell:si,delValues:Fe,delValue:ei,delTablesSchema:Un,delValuesSchema:it,delSchema:ti,transaction:rt,startTransaction:pn,getTransactionChanges:ni,getTransactionLog:oi,finishTransaction:Wn,forEachTable:n=>Ps(b,(i,r)=>n(r,l=>Ps(i,($,C)=>l(C,h=>Xn($,h))))),forEachTableCell:(n,i)=>Xn(H(Q,vs(n)),i),forEachRow:(n,i)=>Ps(H(b,vs(n)),(r,l)=>i(l,$=>Xn(r,$))),forEachCell:(n,i,r)=>Xn(H(H(b,vs(n)),vs(i)),r),forEachValue:n=>Xn(N,n),addSortedRowIdsListener:(n,i,r,l,$,C,h)=>vr(n)?jn(n.tableId,n.cellId,[n.descending??!1,n.offset??0,n.limit],i,r):jn(n,i,[r,l,$],C,h),addStartTransactionListener:n=>ws(n,v),addWillFinishTransactionListener:n=>ws(n,U[0]),addDidFinishTransactionListener:n=>ws(n,U[1]),callListener:n=>(oe(n),Y),delListener:n=>(Et(n),Y),getListenerStats:()=>({hasTables:Ws(m),tables:Ws(p),tableIds:Ws(q),hasTable:Ws(ns),table:Ws(K),tableCellIds:Ws(M),hasTableCell:Ws(ss,Ti),rowCount:Ws(X),rowIds:Ws(Z),sortedRowIds:Ws(G),hasRow:Ws(Ds,Ti),row:Ws(bs,Ti),cellIds:Ws(B,Ti),hasCell:Ws(Rs,Ka),cell:Ws(hs,Ka),invalidCell:Ws(ks,Ka),hasValues:Ws(Ks),values:Ws(Hs),valueIds:Ws(Us),hasValue:Ws(A),value:Ws(f),invalidValue:Ws(as),transaction:tu(v)+Ws(U)}),isMergeable:()=>!1,createStore:D1,addListener:ws,callListeners:z,setInternalListeners:(n,i,r,l,$)=>a=[n,i,r,l,$]};return Wt({[jo+qu]:[0,m,[],()=>[xe()]],[qu]:[0,p],[gd]:[0,q],[jo+zo]:[1,ns,[$s],n=>[xn(...n)]],[zo]:[1,K,[$s]],[zo+Ku]:[1,M,[$s]],[jo+zo+bi]:[2,ss,[$s,Dn],n=>[Nn(...n)]],[Ed]:[1,X,[$s]],[bd]:[1,Z,[$s]],[jo+Nr]:[2,Ds,[$s,Is],n=>[vn(...n)]],[Nr]:[2,bs,[$s,Is]],[Ku]:[2,B,[$s,Is]],[jo+bi]:[3,Rs,[$s,Is,nt],n=>[An(...n)]],[bi]:[3,hs,[$s,Is,nt],n=>nr(De(...n))],InvalidCell:[3,ks],[jo+Rl]:[0,Ks,[],()=>[Ne()]],[Rl]:[0,Hs],[Pd]:[0,Us],[jo+lc]:[1,A,[ct],n=>[Mn(...n)]],[lc]:[1,f,[ct],n=>nr(ke(n[0]))],InvalidValue:[1,as]},([n,i,r,l],$)=>{Y[Vd+$+yd]=(...C)=>ws(C[n],i[C[n+1]?1:0],n>0?Ou(C,0,n):void 0,r,l)}),g1(Y)},{PureComponent:eL,createContext:$E,useCallback:Dt,useContext:SE,useEffect:CE,useLayoutEffect:tL,useMemo:Wi,useRef:c$,useState:Fo,useSyncExternalStore:dE}=ca,nu=(s,...e)=>Vs(s)?{}:s(...e),nL=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(e),s==null?void 0:s.getRemoteTableId(e)],oL=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(e)],Mr="tinybaseInspector",Vl="TinyBase Inspector",k1=["left","top","bottom","right","full"],io="state",Fr="sort",gl="open",_r="position",zr=gl,i$="editable",ft=(...s)=>Qt(s),fa=(s,e)=>Xs(h1([...s]),e),Ta=(s,e)=>[!!Vc(io,s,i$,e),Dt(t=>{e.setCell(io,s,i$,o=>!o),t.preventDefault()},[e,s])],cL=({s})=>{const e=Ho(_r,s)??1,t=xr(zr,()=>!0,[],s);return Ho(zr,s)?null:y.jsx("img",{onClick:t,title:Vl,"data-position":e})},x1="editable",iL="←",rL="↑",aL="→",lL="↓",r$=(s,e)=>Xs(Xl(s,e),t=>s+d1+t),mr=(s,e,t)=>{const o=Dt(s,e);return t?o:void 0},Ra=(...s)=>Wi(()=>s,s),N1=(s,e)=>Wi(()=>({store:s,tableId:e}),[s,e]),uL=(s,e)=>Wi(()=>({queries:s,queryId:e}),[s,e]),v1=(s,e=!1,t,o=0,c,a,u,d)=>{const[[T,S,L],R]=Fo([s,e,o]),w=Dt(D=>{R(D),d==null||d(D)},[d]),g=mr(D=>w([D,D==T?!S:!1,L]),[w,T,S,L],t),V=Dt(D=>w([T,S,D]),[w,T,S]),E=u===!0?RL:u;return[[T,S,L],g,Wi(()=>u===!1?null:y.jsx(E,{offset:L,limit:c,total:a,onChange:V}),[u,E,L,c,a,V])]},wa=(s,e,t)=>Wi(()=>{const o=e??s;return Wt(xi(o)?Pi(Xs(o,c=>[c,c])):o,(c,a)=>({label:a,component:t,...vd(c)?{label:c}:c}))},[e,t,s]),ou=({className:s,headerRow:e,idColumn:t,params:[o,c,a,u,d,T]})=>y.jsxs("table",{className:s,children:[T?y.jsx("caption",{children:T}):null,e===!1?null:y.jsx("thead",{children:y.jsxs("tr",{children:[t===!1?null:y.jsx(a$,{sort:u??[],label:"Id",onClick:d}),uc(o,({label:S},L)=>y.jsx(a$,{cellId:L,label:S,sort:u??[],onClick:d},L))]})}),y.jsx("tbody",{children:Xs(a,S=>y.jsxs("tr",{children:[t===!1?null:y.jsx("th",{children:S}),uc(o,({component:L,getComponentProps:R},w)=>y.jsx("td",{children:y.jsx(L,{...nu(R,S,w),...c,rowId:S,cellId:w})},w))]},S))})]}),a$=({cellId:s,sort:[e,t],label:o=s??Yt,onClick:c})=>y.jsxs("th",{onClick:mr(()=>c==null?void 0:c(s),[c,s],c),className:Vs(t)||e!=s?void 0:`sorted ${t?"de":"a"}scending`,children:[Vs(t)||e!=s?null:(t?lL:rL)+" ",o]}),$L=({localRowId:s,params:[e,t,o,c,a,u,d]})=>{const T=ud(a,s,u);return y.jsxs("tr",{children:[e===!1?null:y.jsxs(y.Fragment,{children:[y.jsx("th",{children:s}),y.jsx("th",{children:T})]}),uc(t,({component:S,getComponentProps:L},R)=>{const[w,g]=jd(R,d1,2),V=w===o?s:w===c?T:null;return Vs(V)?null:y.jsx("td",{children:y.jsx(S,{...nu(L,V,g),store:d,tableId:w,rowId:V,cellId:g})},R)})]})},A1=({thing:s,onThingChange:e,className:t,hasSchema:o,showType:c=!0})=>{const[a,u]=Fo(),[d,T]=Fo(),[S,L]=Fo(),[R,w]=Fo(),[g,V]=Fo();d!==s&&(u(ec(s)),T(s),L(String(s)),w(Number(s)||0),V(!!s));const E=Dt((k,P)=>{P(k),T(k),e(k)},[e]),D=Dt(()=>{if(!(o!=null&&o())){const k=Ia(a,da,L1,Ca),P=Ia(k,S,R,g);u(k),T(P),e(P)}},[o,e,S,R,g,a]);return y.jsxs("div",{className:t,children:[c?y.jsx("button",{className:a,onClick:D,children:a}):null,Ia(a,y.jsx("input",{value:S,onChange:Dt(k=>E(String(k[rc][Xu]),L),[E])},a),y.jsx("input",{type:"number",value:R,onChange:Dt(k=>E(Number(k[rc][Xu]||0),w),[E])},a),y.jsx("input",{type:"checkbox",checked:g,onChange:Dt(k=>E(!!k[rc].checked,V),[E])},a))]})},SL=({tableId:s,cellId:e,descending:t,offset:o,limit:c,store:a,editable:u,sortOnClick:d,paginator:T=!1,onChange:S,customCells:L,...R})=>{const[w,g,V]=v1(e,t,d,o,c,ZC(s,a),T,S);return y.jsx(ou,{...R,params:Ra(wa(Xl(s,a),L,u?cu:Ol),N1(a,s),OC(s,...w,c,a),w,g,V)})},CL=({store:s,editable:e=!1,valueComponent:t=e?TL:Rd,getValueComponentProps:o,className:c,headerRow:a,idColumn:u})=>y.jsxs("table",{className:c,children:[a===!1?null:y.jsx("thead",{children:y.jsxs("tr",{children:[u===!1?null:y.jsx("th",{children:"Id"}),y.jsx("th",{children:lc})]})}),y.jsx("tbody",{children:Xs(a1(s),d=>y.jsxs("tr",{children:[u===!1?null:y.jsx("th",{children:d}),y.jsx("td",{children:y.jsx(t,{...nu(o,d),valueId:d,store:s})})]},d))})]}),dL=({indexId:s,sliceId:e,indexes:t,editable:o,customCells:c,...a})=>{const[u,d,T]=oL(Sa(t),s);return y.jsx(ou,{...a,params:Ra(wa(Xl(T,d),c,o?cu:Ol),N1(d,T),rd(s,e,u))})},LL=({relationshipId:s,relationships:e,editable:t,customCells:o,className:c,headerRow:a,idColumn:u=!0})=>{const[d,T,S,L]=nL(Zl(e),s),R=wa([...r$(S,T),...r$(L,T)],o,t?cu:Ol),w=Ra(u,R,S,L,s,d,T);return y.jsxs("table",{className:c,children:[a===!1?null:y.jsx("thead",{children:y.jsxs("tr",{children:[u===!1?null:y.jsxs(y.Fragment,{children:[y.jsxs("th",{children:[S,".Id"]}),y.jsxs("th",{children:[L,".Id"]})]}),uc(R,({label:g},V)=>y.jsx("th",{children:g},V))]})}),y.jsx("tbody",{children:Xs(IC(S,T),g=>y.jsx($L,{localRowId:g,params:w},g))})]})},fL=({queryId:s,cellId:e,descending:t,offset:o,limit:c,queries:a,sortOnClick:u,paginator:d=!1,customCells:T,onChange:S,...L})=>{const[R,w,g]=v1(e,t,u,o,c,dd(s,a),d,S);return y.jsx(ou,{...L,params:Ra(wa(Cd(s,a),T,wd),uL(a,s),Ld(s,...R,c,a),R,w,g)})},cu=({tableId:s,rowId:e,cellId:t,store:o,className:c,showType:a})=>{var u;return y.jsx(A1,{thing:Vc(s,e,t,o),onThingChange:$a(s,e,t,d=>d,[],o),className:c??x1+bi,showType:a,hasSchema:(u=st(o))==null?void 0:u.hasTablesSchema})},TL=({valueId:s,store:e,className:t,showType:o})=>{var c;return y.jsx(A1,{thing:Ho(s,e),onThingChange:xr(s,a=>a,[],e),className:t??x1+lc,showType:o,hasSchema:(c=st(e))==null?void 0:c.hasValuesSchema})},RL=({onChange:s,total:e,offset:t=0,limit:o=e,singular:c="row",plural:a=c+"s"})=>{(t>e||t<0)&&(t=0,s(0));const u=mr(()=>s(t-o),[s,t,o],t>0),d=mr(()=>s(t+o),[s,t,o],t+o<e);return y.jsxs(y.Fragment,{children:[e>o&&y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"previous",disabled:t==0,onClick:u,children:iL}),y.jsx("button",{className:"next",disabled:t+o>=e,onClick:d,children:aL}),t+1," to ",kd(e,t+o)," of "]}),e," ",e!=1?a:c]})},Tt=({uniqueId:s,summary:e,editable:t,handleEditable:o,children:c,s:a})=>{const u=!!Vc(io,s,gl,a),d=$a(io,s,gl,T=>T[rc].open,[],a);return y.jsxs("details",{open:u,onToggle:d,children:[y.jsxs("summary",{children:[e,o?y.jsx("img",{onClick:o,className:t?"done":"edit"}):null]}),c]})},wL=({indexes:s,indexesId:e,indexId:t,s:o})=>y.jsx(Tt,{uniqueId:ft("i",e,t),summary:"Index: "+t,s:o,children:Xs(cd(t,s),c=>y.jsx(hL,{indexes:s,indexesId:e,indexId:t,sliceId:c,s:o},c))}),hL=({indexes:s,indexesId:e,indexId:t,sliceId:o,s:c})=>{const a=ft("i",e,t,o),[u,d]=Ta(a,c);return y.jsx(Tt,{uniqueId:a,summary:"Slice: "+o,editable:u,handleEditable:d,s:c,children:y.jsx(dL,{sliceId:o,indexId:t,indexes:s,editable:u})})},l$=({indexesId:s,s:e})=>{const t=$1(s),o=id(t);return Vs(t)?null:y.jsx(Tt,{uniqueId:ft("i",s),summary:"Indexes: "+(s??Xe),s:e,children:jt(o)?"No indexes defined":fa(o,c=>y.jsx(wL,{indexes:t,indexesId:s,indexId:c,s:e},c))})},yL=({metrics:s,metricId:e})=>y.jsxs("tr",{children:[y.jsx("th",{children:e}),y.jsx("td",{children:s==null?void 0:s.getTableId(e)}),y.jsx("td",{children:nd(e,s)})]}),u$=({metricsId:s,s:e})=>{const t=l1(s),o=td(t);return Vs(t)?null:y.jsx(Tt,{uniqueId:ft("m",s),summary:"Metrics: "+(s??Xe),s:e,children:jt(o)?"No metrics defined":y.jsxs("table",{children:[y.jsxs("thead",{children:[y.jsx("th",{children:"Metric Id"}),y.jsx("th",{children:"Table Id"}),y.jsx("th",{children:"Metric"})]}),y.jsx("tbody",{children:Xs(o,c=>y.jsx(yL,{metrics:t,metricId:c},c))})]})})},VL=({queries:s,queriesId:e,queryId:t,s:o})=>{const c=ft("q",e,t),[a,u,d]=mo(Vc(io,c,Fr,o)??"[]"),T=$a(io,c,Fr,Qt,[],o);return y.jsx(Tt,{uniqueId:c,summary:"Query: "+t,s:o,children:y.jsx(fL,{queryId:t,queries:s,cellId:a,descending:u,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:T})})},$$=({queriesId:s,s:e})=>{const t=C1(s),o=Sd(t);return Vs(t)?null:y.jsx(Tt,{uniqueId:ft("q",s),summary:"Queries: "+(s??Xe),s:e,children:jt(o)?"No queries defined":fa(o,c=>y.jsx(VL,{queries:t,queriesId:s,queryId:c,s:e},c))})},gL=({relationships:s,relationshipsId:e,relationshipId:t,s:o})=>{const c=ft("r",e,t),[a,u]=Ta(c,o);return y.jsx(Tt,{uniqueId:c,summary:"Relationship: "+t,editable:a,handleEditable:u,s:o,children:y.jsx(LL,{relationshipId:t,relationships:s,editable:a})})},S$=({relationshipsId:s,s:e})=>{const t=S1(s),o=ld(t);return Vs(t)?null:y.jsx(Tt,{uniqueId:ft("r",s),summary:"Relationships: "+(s??Xe),s:e,children:jt(o)?"No relationships defined":fa(o,c=>y.jsx(gL,{relationships:t,relationshipsId:s,relationshipId:c,s:e},c))})},EL=({tableId:s,store:e,storeId:t,s:o})=>{const c=ft("t",t,s),[a,u,d]=mo(Vc(io,c,Fr,o)??"[]"),T=$a(io,c,Fr,Qt,[],o),[S,L]=Ta(c,o);return y.jsx(Tt,{uniqueId:c,summary:zo+": "+s,editable:S,handleEditable:L,s:o,children:y.jsx(SL,{tableId:s,store:e,cellId:a,descending:u,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:T,editable:S})})},bL=({store:s,storeId:e,s:t})=>{const o=ft("v",e),[c,a]=Ta(o,t);return jt(a1(s))?null:y.jsx(Tt,{uniqueId:o,summary:Rl,editable:c,handleEditable:a,s:t,children:y.jsx(CL,{store:s,editable:c})})},C$=({storeId:s,s:e})=>{const t=r1(s),o=XC(t);return Vs(t)?null:y.jsxs(Tt,{uniqueId:ft("s",s),summary:(t.isMergeable()?"Mergeable":"")+"Store: "+(s??Xe),s:e,children:[y.jsx(bL,{storeId:s,store:t,s:e}),fa(o,c=>y.jsx(EL,{store:t,storeId:s,tableId:c,s:e},c))]})},PL=({s})=>{const e=c$(null),t=c$(0),[o,c]=Fo(!1),{scrollLeft:a,scrollTop:u}=sd(s);tL(()=>{const P=e.current;if(P&&!o){const cs=new MutationObserver(()=>{P.scrollWidth>=Iu(a)+P.clientWidth&&P.scrollHeight>=Iu(u)+P.clientHeight&&P.scrollTo(a,u)});return cs.observe(P,{childList:!0,subtree:!0}),()=>cs.disconnect()}},[o,a,u]);const d=Dt(P=>{const{scrollLeft:cs,scrollTop:Ts}=P[rc];cancelIdleCallback(t.current),t.current=requestIdleCallback(()=>{c(!0),s.setPartialValues({scrollLeft:cs,scrollTop:Ts})})},[s]),T=r1(),S=KC(),L=l1(),R=ed(),w=$1(),g=od(),V=S1(),E=ad(),D=C1(),k=$d();return Vs(T)&&jt(S)&&Vs(L)&&jt(R)&&Vs(w)&&jt(g)&&Vs(V)&&jt(E)&&Vs(D)&&jt(k)?y.jsx("span",{className:"warn",children:"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."}):y.jsxs("article",{ref:e,onScroll:d,children:[y.jsx(C$,{s}),Xs(S,P=>y.jsx(C$,{storeId:P,s},P)),y.jsx(u$,{s}),Xs(R,P=>y.jsx(u$,{metricsId:P,s},P)),y.jsx(l$,{s}),Xs(g,P=>y.jsx(l$,{indexesId:P,s},P)),y.jsx(S$,{s}),Xs(E,P=>y.jsx(S$,{relationshipsId:P,s},P)),y.jsx($$,{s}),Xs(k,P=>y.jsx($$,{queriesId:P,s},P))]})};class jL extends eL{constructor(t){super(t);Qu(this,"componentDidCatch",(t,o)=>console.error(t,o.componentStack));this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?y.jsx("span",{className:"warn",children:"Inspector error: please see console for details."}):this.props.children}}const DL=({s})=>{const e=Ho(_r,s)??1,t=xr(zr,()=>!1,[],s),o=xr(_r,c=>Number(c[rc].dataset.id),[],s);return y.jsxs("header",{children:[y.jsx("img",{title:Vl}),y.jsx("span",{children:Vl}),Xs(k1,(c,a)=>a==e?null:y.jsx("img",{onClick:o,"data-id":a,title:"Dock to "+c},a)),y.jsx("img",{onClick:t,title:"Close"})]})},kL=({s})=>{const e=Ho(_r,s)??1;return Ho(zr,s)?y.jsxs("main",{"data-position":e,children:[y.jsx(DL,{s}),y.jsx(jL,{children:y.jsx(PL,{s})})]}):null};var xL="data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e";const M1="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",F1='content:url("',_1='")',ha=F1+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",ya="</svg>"+_1,d$=F1+xL+_1,NL=Xs([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],([s,e,t,o])=>ha+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${s}' y='${e}' width='${t}' height='${o}' fill='white'/>`+ya),vL=ha+"<path d='M20 20l60 60M20 80l60-60' />"+ya,AL=ha+`<path d='${M1}' />`+ya,ML=ha+`<path d='${M1}M20 20l60 60' />`+ya,ai="*::-webkit-scrollbar",FL=zd(uc({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[ai]:"width:0.5rem;height:0.5rem;",[ai+"-track"]:"background:#111",[ai+"-thumb"]:"background:#999;border:1px solid #111",[ai+"-thumb:hover"]:"background:#fff",[ai+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+d$,...Pi(Xs(["bottom:0;left:0","top:0;right:0"],(s,e)=>[`>img[data-position='${e}']`,s])),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...Pi(Xs(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],(s,e)=>[`main[data-position='${e}']`,s])),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":d$,"header>img:nth-of-type(6)":vL,...Pi(Xs(NL,(s,e)=>[`header>img[data-id='${e}']`,s])),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":AL,"details[open]>summary img.done":ML,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${Mr} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},(s,e)=>s?`#${Mr} ${e}{${s}}`:"")),LE=({position:s="right",open:e=!1})=>{const t=qC(D1),o=k1.indexOf(s);return Td(t,c=>Od(c,Mr),void 0,async c=>{await c.load([{},{position:o==-1?1:o,open:!!e}]),await c.startAutoSave()}),y.jsxs(y.Fragment,{children:[y.jsxs("aside",{id:Mr,children:[y.jsx(cL,{s:t}),y.jsx(kL,{s:t})]}),y.jsx("style",{children:FL})]})},Ai=s=>typeof s,_L="tinybase",Ie="",zL=Ai(Ie),mL=Ai(Ai),HL="Listener",de="Result",UL="get",pL="set",WL="add",QL="del",uo="Has",BL="has",Be="Ids",Le="Table",gc=Le+"s",z1=Le+Be,Ge="Row",Va=Ge+"Count",mt=Ge+Be,ga="Sorted"+Ge+Be,Rt="Cell",$o=Rt+Be,So="Value",Ko=So+"s",m1=So+Be,iu="Transaction",H1="Partial",U1="Finish",Ea="Status",ru="Metric",GL="Index",ba="Slice",JL="Relationship",p1="Remote"+Ge+"Id",W1="Local",Q1="Linked",YL="Query",Pa="Checkpoint",Oa=globalThis,St=s=>s==null,Ct=(s,e,t)=>St(s)?t==null?void 0:t():e(s),B1=s=>Ai(s)==zL,au=s=>Ai(s)==mL,qL=s=>Array.isArray(s),Mi=s=>s.length,$c=()=>{},KL=(s,e)=>Je(new Array(s).fill(0),(t,o)=>e(o)),G1=(s,e)=>s.every(e),sl=(s,e)=>Mi(s)===Mi(e)&&G1(s,(t,o)=>e[o]===t),Je=(s,e)=>s.map(e),XL=s=>Mi(s)==0,ZL=(s,e)=>s.filter(e),L$=(s,e,t)=>s.with(e,t),ja=Object,f$=s=>ja.getPrototypeOf(s),IL=ja.entries,Hr=s=>!St(s)&&Ct(f$(s),e=>e==ja.prototype||St(f$(e)),()=>!0),J1=ja.keys,Y1=(s,e)=>Ct(s,t=>t[e]),OL=(s,e)=>e in s,sf=(s,e)=>(delete s[e],s),ef=s=>Mi(J1(s)),q1=(s,e)=>{const t=IL(s);return Mi(t)===ef(e)&&G1(t,([o,c])=>Hr(c)?Hr(e[o])?q1(e[o],c):!1:e[o]===c)},{PureComponent:fE,createContext:tf,useCallback:Mt,useContext:Qi,useEffect:Sc,useLayoutEffect:nf,useMemo:lu,useRef:of,useState:Cc,useSyncExternalStore:cf}=ca,wt=(s,...e)=>St(s)?{}:s(...e),K1=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(e),s==null?void 0:s.getRemoteTableId(e)],rf=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(e)];var gs=(s=>(s[s.Store=0]="Store",s[s.Metrics=1]="Metrics",s[s.Indexes=2]="Indexes",s[s.Relationships=3]="Relationships",s[s.Queries=4]="Queries",s[s.Checkpoints=5]="Checkpoints",s[s.Persister=6]="Persister",s[s.Synchronizer=7]="Synchronizer",s))(gs||{});const el=_L+"_uirc",dc=Oa[el]?Oa[el]:Oa[el]=tf([]),Kt=(s,e)=>{const t=Qi(dc);return St(s)?t[e*2]:B1(s)?Y1(t[e*2+1],s):s},af=s=>({...Qi(dc)[s*2+1]}),Co=(s,e)=>{const t=Kt(s,e);return St(s)||B1(s)?t:s},Lo=(s,e,t)=>{const{16:o,17:c}=Qi(dc);Sc(()=>(o==null||o(t,s,e),()=>c==null?void 0:c(t,s)),[o,s,e,t,c])},fo=s=>J1(Qi(dc)[s*2+1]??{}),zs=[],T$=[{},[],[zs,void 0,zs],void 0,!1,0],lf=[q1,sl,([s,e,t],[o,c,a])=>e===c&&sl(s,o)&&sl(t,a)],uf=(s,e)=>s===e,Bi=(s,e,t=zs)=>{const[,o]=Cc(),[c,a]=Cc();return Sc(()=>{const u=s?e(s):void 0;return a(u),o([]),u==null?void 0:u.destroy},[s,...t]),c},X1=(s,e,...t)=>{var c;const o=(c=s==null?void 0:s[WL+e+HL])==null?void 0:c.call(s,...t);return()=>{var a;return(a=s==null?void 0:s.delListener)==null?void 0:a.call(s,o)}},ls=(s,e,t,o=zs)=>{const c=of(T$[t]),a=Mt(()=>{var T;const d=((T=e==null?void 0:e[(t==4?BL:UL)+s])==null?void 0:T.call(e,...o))??T$[t];return(lf[t]??uf)(d,c.current)?c.current:c.current=d},[e,t,s,...o]),u=Mt(d=>X1(e,(t==4?uo:Ie)+s,...o,d),[e,t,s,...o]);return cf(u,a,a)},Ss=(s,e,t,o=zs,c=zs,...a)=>nf(()=>X1(e,s,...c,t,...a),[e,s,...c,...o,...a]),To=(s,e,t,o=zs,c=$c,a=zs,...u)=>{const d=I(s);return Mt(T=>Ct(d,S=>Ct(t(T,S),L=>c(S[pL+e](...Z1(u,S,T),L),L))),[d,e,...o,...a,...I1(u)])},Z1=(s,e,t)=>Je(s,o=>au(o)?o(t,e):o),I1=s=>ZL(s,e=>!au(e)),Ec=(s,e,t=$c,o=zs,...c)=>{const a=I(s);return Mt(u=>t(a==null?void 0:a[QL+e](...Z1(c,a,u))),[a,e,...o,...I1(c)])},O1=(s,e,t)=>{const o=ht(s);return Mt(()=>o==null?void 0:o[e](t),[o,e,t])},$f=(s,e,t,o,c,a)=>ls(ga,I(a),1,[s,e,t,o,c]),sS=(s,e,t,o,c,a,u,d,T)=>Ss(ga,I(T),a,u,[s,e,t,o,c],d),Sf=(s,e=zs)=>lu(s,e),Cf=()=>fo(gs.Store),df=s=>Kt(s,gs.Store),Lf=()=>af(gs.Store),I=s=>Co(s,gs.Store),ff=(s,e)=>Lo(s,e,gs.Store),Tf=(s,e=zs)=>lu(s,e),Rf=s=>ls(gc,I(s),4,[]),wf=s=>ls(gc,I(s),0),eS=s=>ls(z1,I(s),1),hf=(s,e)=>ls(Le,I(e),4,[s]),yf=(s,e)=>ls(Le,I(e),0,[s]),Vf=(s,e)=>ls(Le+$o,I(e),1,[s]),gf=(s,e,t)=>ls(Le+Rt,I(t),4,[s,e]),Ef=(s,e)=>ls(Va,I(e),5,[s]),tS=(s,e)=>ls(mt,I(e),1,[s]),nS=(s,e,t,o,c,a)=>$f(...Hr(s)?[s.tableId,s.cellId,s.descending??!1,s.offset??0,s.limit,e]:[s,e,t,o,c,a]),bf=(s,e,t)=>ls(Ge,I(t),4,[s,e]),Pf=(s,e,t)=>ls(Ge,I(t),0,[s,e]),oS=(s,e,t)=>ls($o,I(t),1,[s,e]),jf=(s,e,t,o)=>ls(Rt,I(o),4,[s,e,t]),cS=(s,e,t,o)=>ls(Rt,I(o),3,[s,e,t]),Df=s=>ls(Ko,I(s),4,[]),kf=s=>ls(Ko,I(s),0),iS=s=>ls(m1,I(s),1),xf=(s,e)=>ls(So,I(e),4,[s]),rS=(s,e)=>ls(So,I(e),3,[s]),Nf=(s,e,t,o,c)=>To(t,gc,s,e,o,c),vf=(s,e,t,o,c,a)=>To(o,Le,e,t,c,a,s),Af=(s,e,t,o,c,a,u)=>To(c,Ge,t,o,a,u,s,e),Mf=(s,e,t=zs,o,c=$c,a=zs,u=!0)=>{const d=I(o);return Mt(T=>Ct(d,S=>Ct(e(T,S),L=>c(S.addRow(au(s)?s(T,S):s,L,u),S,L))),[d,s,...t,...a,u])},Ff=(s,e,t,o,c,a,u)=>To(c,H1+Ge,t,o,a,u,s,e),_f=(s,e,t,o,c,a,u,d)=>To(a,Rt,o,c,u,d,s,e,t),zf=(s,e,t,o,c)=>To(t,Ko,s,e,o,c),mf=(s,e,t,o,c)=>To(t,H1+Ko,s,e,o,c),Hf=(s,e,t,o,c,a)=>To(o,So,e,t,c,a,s),Uf=(s,e,t)=>Ec(s,gc,e,t),pf=(s,e,t,o)=>Ec(e,Le,t,o,s),Wf=(s,e,t,o,c)=>Ec(t,Ge,o,c,s,e),Qf=(s,e,t,o,c,a,u)=>Ec(c,Rt,a,u,s,e,t,o),Bf=(s,e,t)=>Ec(s,Ko,e,t),Gf=(s,e,t,o)=>Ec(e,So,t,o,s),Jf=(s,e,t,o)=>Ss(uo+gc,I(o),s,e,[],t),Yf=(s,e,t,o)=>Ss(gc,I(o),s,e,zs,t),qf=(s,e,t,o)=>Ss(z1,I(o),s,e,zs,t),Kf=(s,e,t,o,c)=>Ss(uo+Le,I(c),e,t,[s],o),Xf=(s,e,t,o,c)=>Ss(Le,I(c),e,t,[s],o),Zf=(s,e,t,o,c)=>Ss(Le+$o,I(c),e,t,[s],o),If=(s,e,t,o,c,a)=>Ss(uo+Le+Rt,I(a),t,o,[s,e],c),Of=(s,e,t,o,c)=>Ss(Va,I(c),e,t,[s],o),sT=(s,e,t,o,c)=>Ss(mt,I(c),e,t,[s],o),eT=(s,e,t,o,c,a,u,d,T)=>sS(...Hr(s)?[s.tableId,s.cellId,s.descending??!1,s.offset??0,s.limit,e,t,o,c]:[s,e,t,o,c,a,u,d,T]),tT=(s,e,t,o,c,a)=>Ss(uo+Ge,I(a),t,o,[s,e],c),nT=(s,e,t,o,c,a)=>Ss(Ge,I(a),t,o,[s,e],c),oT=(s,e,t,o,c,a)=>Ss($o,I(a),t,o,[s,e],c),cT=(s,e,t,o,c,a,u)=>Ss(uo+Rt,I(u),o,c,[s,e,t],a),iT=(s,e,t,o,c,a,u)=>Ss(Rt,I(u),o,c,[s,e,t],a),rT=(s,e,t,o)=>Ss(uo+Ko,I(o),s,e,[],t),aT=(s,e,t,o)=>Ss(Ko,I(o),s,e,zs,t),lT=(s,e,t,o)=>Ss(m1,I(o),s,e,zs,t),uT=(s,e,t,o,c)=>Ss(uo+So,I(c),e,t,[s],o),$T=(s,e,t,o,c)=>Ss(So,I(c),e,t,[s],o),ST=(s,e,t)=>Ss("Start"+iu,I(t),s,e),CT=(s,e,t)=>Ss("Will"+U1+iu,I(t),s,e),dT=(s,e,t)=>Ss("Did"+U1+iu,I(t),s,e),LT=(s,e,t)=>Bi(s,e,t),fT=()=>fo(gs.Metrics),TT=s=>Kt(s,gs.Metrics),Da=s=>Co(s,gs.Metrics),RT=(s,e)=>Lo(s,e,gs.Metrics),wT=s=>ls(ru+Be,Da(s),1),aS=(s,e)=>ls(ru,Da(e),3,[s]),hT=(s,e,t,o)=>Ss(ru,Da(o),e,t,[s]),yT=(s,e,t)=>Bi(s,e,t),VT=()=>fo(gs.Indexes),gT=s=>Kt(s,gs.Indexes),Xo=s=>Co(s,gs.Indexes),ET=(s,e)=>Lo(s,e,gs.Indexes),lS=(s,e)=>ls(ba+Be,Xo(e),1,[s]),bT=s=>ls(GL+Be,Xo(s),1),uS=(s,e,t)=>ls(ba+mt,Xo(t),1,[s,e]),PT=(s,e,t,o)=>Ss(ba+Be,Xo(o),e,t,[s]),jT=(s,e,t,o,c)=>Ss(ba+mt,Xo(c),t,o,[s,e]),DT=(s,e,t)=>Bi(s,e,t),kT=()=>fo(gs.Relationships),xT=s=>Kt(s,gs.Relationships),Ht=s=>Co(s,gs.Relationships),NT=(s,e)=>Lo(s,e,gs.Relationships),vT=s=>ls(JL+Be,Ht(s),1),$S=(s,e,t)=>ls(p1,Ht(t),3,[s,e]),SS=(s,e,t)=>ls(W1+mt,Ht(t),1,[s,e]),CS=(s,e,t)=>ls(Q1+mt,Ht(t),1,[s,e]),AT=(s,e,t,o,c)=>Ss(p1,Ht(c),t,o,[s,e]),MT=(s,e,t,o,c)=>Ss(W1+mt,Ht(c),t,o,[s,e]),FT=(s,e,t,o,c)=>Ss(Q1+mt,Ht(c),t,o,[s,e]),_T=(s,e,t)=>Bi(s,e,t),zT=()=>fo(gs.Queries),mT=s=>Kt(s,gs.Queries),ie=s=>Co(s,gs.Queries),HT=(s,e)=>Lo(s,e,gs.Queries),UT=s=>ls(YL+Be,ie(s),1),pT=(s,e)=>ls(de+Le,ie(e),0,[s]),WT=(s,e)=>ls(de+Le+$o,ie(e),1,[s]),QT=(s,e)=>ls(de+Va,ie(e),5,[s]),dS=(s,e)=>ls(de+mt,ie(e),1,[s]),LS=(s,e,t,o=0,c,a)=>ls(de+ga,ie(a),1,[s,e,t,o,c]),BT=(s,e,t)=>ls(de+Ge,ie(t),0,[s,e]),fS=(s,e,t)=>ls(de+$o,ie(t),1,[s,e]),TS=(s,e,t,o)=>ls(de+Rt,ie(o),3,[s,e,t]),GT=(s,e,t,o)=>Ss(de+Le,ie(o),e,t,[s]),JT=(s,e,t,o)=>Ss(de+Le+$o,ie(o),e,t,[s]),YT=(s,e,t,o)=>Ss(de+Va,ie(o),e,t,[s]),qT=(s,e,t,o)=>Ss(de+mt,ie(o),e,t,[s]),KT=(s,e,t,o,c,a,u,d)=>Ss(de+ga,ie(d),a,u,[s,e,t,o,c]),XT=(s,e,t,o,c)=>Ss(de+Ge,ie(c),t,o,[s,e]),ZT=(s,e,t,o,c)=>Ss(de+$o,ie(c),t,o,[s,e]),IT=(s,e,t,o,c,a)=>Ss(de+Rt,ie(a),o,c,[s,e,t]),OT=(s,e,t)=>Bi(s,e,t),sR=()=>fo(gs.Checkpoints),eR=s=>Kt(s,gs.Checkpoints),ht=s=>Co(s,gs.Checkpoints),tR=(s,e)=>Lo(s,e,gs.Checkpoints),ka=s=>ls(Pa+Be,ht(s),2),RS=(s,e)=>ls(Pa,ht(e),3,[s]),nR=(s=$c,e=zs,t,o=$c,c=zs)=>{const a=ht(t);return Mt(u=>Ct(a,d=>{const T=s(u);o(d.addCheckpoint(T),d,T)}),[a,...e,...c])},wS=s=>O1(s,"goBackward"),hS=s=>O1(s,"goForward"),oR=(s,e=zs,t,o=$c,c=zs)=>{const a=ht(t);return Mt(u=>Ct(a,d=>Ct(s(u),T=>o(d.goTo(T),T))),[a,...e,...c])},cR=s=>{const e=ht(s),[t,o]=ka(e);return[!XL(t),wS(e),o,Ct(o,c=>e==null?void 0:e.getCheckpoint(c))??Ie]},iR=s=>{const e=ht(s),[,,[t]]=ka(e);return[!St(t),hS(e),t,Ct(t,o=>e==null?void 0:e.getCheckpoint(o))??Ie]},rR=(s,e,t)=>Ss(Pa+Be,ht(t),s,e),aR=(s,e,t,o)=>Ss(Pa,ht(o),e,t,[s]),lR=(s,e,t=zs,o,c=zs,a,u=zs)=>{const[,d]=Cc(),[T,S]=Cc();return Sc(()=>{(async()=>{const L=s?await e(s):void 0;S(L),L&&o&&(async()=>(await o(L),d([])))()})()},[s,...t,...c]),Sc(()=>()=>{T&&(T.destroy(),a==null||a(T))},[T,...u]),T},uR=()=>fo(gs.Persister),$R=s=>Kt(s,gs.Persister),uu=s=>Co(s,gs.Persister),SR=(s,e)=>Lo(s,e,gs.Persister),CR=s=>ls(Ea,uu(s),5,[]),dR=(s,e,t)=>Ss(Ea,uu(t),s,e,[]),LR=(s,e,t=zs,o,c=zs)=>{const[a,u]=Cc();return Sc(()=>{(async()=>{const d=s?await e(s):void 0;u(d)})()},[s,...t]),Sc(()=>()=>{a&&(a.destroy(),o==null||o(a))},[a,...c]),a},fR=()=>fo(gs.Synchronizer),TR=s=>Kt(s,gs.Synchronizer),$u=s=>Co(s,gs.Synchronizer),RR=(s,e)=>Lo(s,e,gs.Synchronizer),wR=s=>ls(Ea,$u(s),5,[]),hR=(s,e,t)=>Ss(Ea,$u(t),s,e,[]),Jn=(s,e,t,o,c)=>[t??e[s*2],{...e[s*2+1],...o,...c[s]}],yS=({tableId:s,store:e,rowComponent:t=Gi,getRowComponentProps:o,customCellIds:c,separator:a,debugIds:u},d)=>fe(Je(d,T=>y.jsx(t,{...wt(o,T),tableId:s,rowId:T,customCellIds:c,store:e,debugIds:u},T)),a,u,s),VS=({queryId:s,queries:e,resultRowComponent:t=kS,getResultRowComponentProps:o,separator:c,debugIds:a},u)=>fe(Je(u,d=>y.jsx(t,{...wt(o,d),queryId:s,rowId:d,queries:e,debugIds:a},d)),c,a,s),gS=({relationshipId:s,relationships:e,rowComponent:t=Gi,getRowComponentProps:o,separator:c,debugIds:a},u,d)=>{const[T,S,L]=K1(Ht(e),s),R=u(s,d,T);return fe(Je(R,w=>y.jsx(t,{...wt(o,w),tableId:L,rowId:w,store:S,debugIds:a},w)),c,a,d)},Su=s=>({checkpoints:e,checkpointComponent:t=xS,getCheckpointComponentProps:o,separator:c,debugIds:a})=>{const u=ht(e);return fe(Je(s(ka(u)),d=>y.jsx(t,{...wt(o,d),checkpoints:u,checkpointId:d,debugIds:a},d)),c)},yR=({store:s,storesById:e,metrics:t,metricsById:o,indexes:c,indexesById:a,relationships:u,relationshipsById:d,queries:T,queriesById:S,checkpoints:L,checkpointsById:R,persister:w,persistersById:g,synchronizer:V,synchronizersById:E,children:D})=>{const k=Qi(dc),[P,cs]=Cc(()=>KL(8,()=>({}))),Ts=Mt((Q,b,N)=>cs(m=>Y1(m[Q],b)==N?m:L$(m,Q,{...m[Q],[b]:N})),[]),ts=Mt((Q,b)=>cs(N=>OL(N[Q],b)?L$(N,Q,sf(N[Q],b)):N),[]);return y.jsx(dc.Provider,{value:lu(()=>[...Jn(0,k,s,e,P),...Jn(1,k,t,o,P),...Jn(2,k,c,a,P),...Jn(3,k,u,d,P),...Jn(4,k,T,S,P),...Jn(5,k,L,R,P),...Jn(6,k,w,g,P),...Jn(7,k,V,E,P),Ts,ts],[P,s,e,t,o,c,a,u,d,T,S,L,R,w,g,V,E,k,Ts,ts]),children:D})},fe=(s,e,t,o)=>{const c=St(e)||!qL(s)?s:Je(s,(a,u)=>u>0?[e,a]:a);return t?[o,":{",c,"}"]:c},VR=(s,e,t,o)=>{const c=oS(e,t,o);return s??c},ES=({tableId:s,rowId:e,cellId:t,store:o,debugIds:c})=>fe(Ie+(cS(s,e,t,o)??Ie),void 0,c,t),Gi=({tableId:s,rowId:e,store:t,cellComponent:o=ES,getCellComponentProps:c,customCellIds:a,separator:u,debugIds:d})=>fe(Je(VR(a,s,e,t),T=>y.jsx(o,{...wt(c,T),tableId:s,rowId:e,cellId:T,store:t,debugIds:d},T)),u,d,e),bS=s=>yS(s,tS(s.tableId,s.store)),gR=({cellId:s,descending:e,offset:t,limit:o,...c})=>yS(c,nS(c.tableId,s,e,t,o,c.store)),ER=({store:s,tableComponent:e=bS,getTableComponentProps:t,separator:o,debugIds:c})=>fe(Je(eS(s),a=>y.jsx(e,{...wt(t,a),tableId:a,store:s,debugIds:c},a)),o),PS=({valueId:s,store:e,debugIds:t})=>fe(Ie+(rS(s,e)??Ie),void 0,t,s),bR=({store:s,valueComponent:e=PS,getValueComponentProps:t,separator:o,debugIds:c})=>fe(Je(iS(s),a=>y.jsx(e,{...wt(t,a),valueId:a,store:s,debugIds:c},a)),o),PR=({metricId:s,metrics:e,debugIds:t})=>fe(aS(s,e)??Ie,void 0,t,s),jS=({indexId:s,sliceId:e,indexes:t,rowComponent:o=Gi,getRowComponentProps:c,separator:a,debugIds:u})=>{const[d,T,S]=rf(Xo(t),s),L=uS(s,e,d);return fe(Je(L,R=>y.jsx(o,{...wt(c,R),tableId:S,rowId:R,store:T,debugIds:u},R)),a,u,e)},jR=({indexId:s,indexes:e,sliceComponent:t=jS,getSliceComponentProps:o,separator:c,debugIds:a})=>fe(Je(lS(s,e),u=>y.jsx(t,{...wt(o,u),indexId:s,sliceId:u,indexes:e,debugIds:a},u)),c,a,s),DR=({relationshipId:s,localRowId:e,relationships:t,rowComponent:o=Gi,getRowComponentProps:c,debugIds:a})=>{const[u,d,,T]=K1(Ht(t),s),S=$S(s,e,u);return fe(St(T)||St(S)?null:y.jsx(o,{...wt(c,S),tableId:T,rowId:S,store:d,debugIds:a},S),void 0,a,e)},kR=s=>gS(s,SS,s.remoteRowId),xR=s=>gS(s,CS,s.firstRowId),DS=({queryId:s,rowId:e,cellId:t,queries:o,debugIds:c})=>fe(Ie+(TS(s,e,t,o)??Ie),void 0,c,t),kS=({queryId:s,rowId:e,queries:t,resultCellComponent:o=DS,getResultCellComponentProps:c,separator:a,debugIds:u})=>fe(Je(fS(s,e,t),d=>y.jsx(o,{...wt(c,d),queryId:s,rowId:e,cellId:d,queries:t,debugIds:u},d)),a,u,e),NR=s=>VS(s,dS(s.queryId,s.queries)),vR=({cellId:s,descending:e,offset:t,limit:o,...c})=>VS(c,LS(c.queryId,s,e,t,o,c.queries)),xS=({checkpoints:s,checkpointId:e,debugIds:t})=>fe(RS(e,s)??Ie,void 0,t,e),AR=Su(s=>s[0]),MR=Su(s=>St(s[1])?[]:[s[1]]),FR=Su(s=>s[2]),TE=Object.freeze(Object.defineProperty({__proto__:null,BackwardCheckpointsView:AR,CellView:ES,CheckpointView:xS,CurrentCheckpointView:MR,ForwardCheckpointsView:FR,IndexView:jR,LinkedRowsView:xR,LocalRowsView:kR,MetricView:PR,Provider:yR,RemoteRowView:DR,ResultCellView:DS,ResultRowView:kS,ResultSortedTableView:vR,ResultTableView:NR,RowView:Gi,SliceView:jS,SortedTableView:gR,TableView:bS,TablesView:ER,ValueView:PS,ValuesView:bR,useAddRowCallback:Mf,useCell:cS,useCellIds:oS,useCellIdsListener:oT,useCellListener:iT,useCheckpoint:RS,useCheckpointIds:ka,useCheckpointIdsListener:rR,useCheckpointListener:aR,useCheckpoints:eR,useCheckpointsIds:sR,useCheckpointsOrCheckpointsById:ht,useCreateCheckpoints:OT,useCreateIndexes:yT,useCreateMergeableStore:Tf,useCreateMetrics:LT,useCreatePersister:lR,useCreateQueries:_T,useCreateRelationships:DT,useCreateStore:Sf,useCreateSynchronizer:LR,useDelCellCallback:Qf,useDelRowCallback:Wf,useDelTableCallback:pf,useDelTablesCallback:Uf,useDelValueCallback:Gf,useDelValuesCallback:Bf,useDidFinishTransactionListener:dT,useGoBackwardCallback:wS,useGoForwardCallback:hS,useGoToCallback:oR,useHasCell:jf,useHasCellListener:cT,useHasRow:bf,useHasRowListener:tT,useHasTable:hf,useHasTableCell:gf,useHasTableCellListener:If,useHasTableListener:Kf,useHasTables:Rf,useHasTablesListener:Jf,useHasValue:xf,useHasValueListener:uT,useHasValues:Df,useHasValuesListener:rT,useIndexIds:bT,useIndexes:gT,useIndexesIds:VT,useIndexesOrIndexesById:Xo,useLinkedRowIds:CS,useLinkedRowIdsListener:FT,useLocalRowIds:SS,useLocalRowIdsListener:MT,useMetric:aS,useMetricIds:wT,useMetricListener:hT,useMetrics:TT,useMetricsIds:fT,useMetricsOrMetricsById:Da,usePersister:$R,usePersisterIds:uR,usePersisterOrPersisterById:uu,usePersisterStatus:CR,usePersisterStatusListener:dR,useProvideCheckpoints:tR,useProvideIndexes:ET,useProvideMetrics:RT,useProvidePersister:SR,useProvideQueries:HT,useProvideRelationships:NT,useProvideStore:ff,useProvideSynchronizer:RR,useQueries:mT,useQueriesIds:zT,useQueriesOrQueriesById:ie,useQueryIds:UT,useRedoInformation:iR,useRelationshipIds:vT,useRelationships:xT,useRelationshipsIds:kT,useRelationshipsOrRelationshipsById:Ht,useRemoteRowId:$S,useRemoteRowIdListener:AT,useResultCell:TS,useResultCellIds:fS,useResultCellIdsListener:ZT,useResultCellListener:IT,useResultRow:BT,useResultRowCount:QT,useResultRowCountListener:YT,useResultRowIds:dS,useResultRowIdsListener:qT,useResultRowListener:XT,useResultSortedRowIds:LS,useResultSortedRowIdsListener:KT,useResultTable:pT,useResultTableCellIds:WT,useResultTableCellIdsListener:JT,useResultTableListener:GT,useRow:Pf,useRowCount:Ef,useRowCountListener:Of,useRowIds:tS,useRowIdsListener:sT,useRowListener:nT,useSetCellCallback:_f,useSetCheckpointCallback:nR,useSetPartialRowCallback:Ff,useSetPartialValuesCallback:mf,useSetRowCallback:Af,useSetTableCallback:vf,useSetTablesCallback:Nf,useSetValueCallback:Hf,useSetValuesCallback:zf,useSliceIds:lS,useSliceIdsListener:PT,useSliceRowIds:uS,useSliceRowIdsListener:jT,useSortedRowIds:nS,useSortedRowIdsListener:eT,useSortedRowIdsListenerImpl:sS,useStartTransactionListener:ST,useStore:df,useStoreIds:Cf,useStoreOrStoreById:I,useStores:Lf,useSynchronizer:TR,useSynchronizerIds:fR,useSynchronizerOrSynchronizerById:$u,useSynchronizerStatus:wR,useSynchronizerStatusListener:hR,useTable:yf,useTableCellIds:Vf,useTableCellIdsListener:Zf,useTableIds:eS,useTableIdsListener:qf,useTableListener:Xf,useTables:wf,useTablesListener:Yf,useUndoInformation:cR,useValue:rS,useValueIds:iS,useValueIdsListener:lT,useValueListener:$T,useValues:kf,useValuesListener:aT,useWillFinishTransactionListener:CT},Symbol.toStringTag,{value:"Module"})),Ur="",NS="￼",_R=globalThis,R$=_R.window,kt=s=>s==null,pr=(s,e,t)=>kt(s)?t==null?void 0:t():e(s),El=s=>Array.isArray(s),Uo=s=>s.length,zR=(s,e)=>s.test(e),vS=s=>{throw new Error(s)},tc=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},bl=(s,e)=>s.forEach(e),mR=(s,e)=>s.splice(0,e),Cu=(s,...e)=>s.push(...e),AS=s=>s.shift(),xa=Object,w$=s=>xa.getPrototypeOf(s),HR=s=>!kt(s)&&pr(w$(s),e=>e==xa.prototype||kt(w$(e)),()=>!0),UR=xa.keys,pR=xa.freeze,WR=s=>Uo(UR(s)),cr=s=>HR(s)&&WR(s)==0,QR=JSON.stringify,MS=JSON.parse,BR=s=>QR(s,(e,t)=>t===void 0?NS:t),GR=s=>MS(s,(e,t)=>t===NS?void 0:t),JR=s=>(s==null?void 0:s.size)??0,YR=(s,e)=>(s==null?void 0:s.has(e))??!1,FS=s=>kt(s)||JR(s)==0,_S=(s,e)=>s==null?void 0:s.forEach(e),zS=(s,e)=>s==null?void 0:s.delete(e),Ji=s=>new Map(s),at=(s,e)=>s==null?void 0:s.get(e),po=(s,e,t)=>kt(t)?(zS(s,e),s):s==null?void 0:s.set(e,t),Pl=(s,e,t,o)=>(YR(s,e)?o==null||o(at(s,e)):po(s,e,t()),at(s,e)),jl=(s,e,t,o,c=0)=>pr((t?Pl:at)(s,e[c],c>Uo(e)-2?t:Ji),a=>{if(c>Uo(e)-2)return o!=null&&o(a)&&po(s,e[c]),a;const u=jl(a,e,t,o,c+1);return FS(a)&&po(s,e[c]),u}),qR=/^\d+$/,KR=()=>{const s=[];let e=0;return[t=>(t?AS(s):null)??Ur+e++,t=>{zR(qR,t)&&Uo(s)<1e3&&Cu(s,t)}]},XR=s=>new Set(El(s)||kt(s)?s:[s]),ZR=(s,e)=>s==null?void 0:s.add(e),IR=(s,e=[Ur])=>{const t=[],o=(c,a)=>a==Uo(e)?Cu(t,c):e[a]===null?_S(c,u=>o(u,a+1)):bl([e[a],null],u=>o(at(c,u),a+1));return o(s,0),t},OR=s=>{let e;const[t,o]=KR(),c=Ji();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return po(c,V,[S,L,R,w,g]),ZR(jl(L,R??[Ur],XR),V),V},(S,L,...R)=>bl(IR(S,L),w=>_S(w,g=>at(c,g)[0](e,...L??[],...R))),S=>pr(at(c,S),([,L,R])=>(jl(L,R??[Ur],void 0,w=>(zS(w,S),FS(w)?1:0)),po(c,S),o(S),R)),S=>pr(at(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=Uo(E);D==Uo(R)?L(e,...E,...g(E)):kt(R[D])?bl(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},ir=Ji(),rr=Ji(),sw=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[c]])=>!cr(o)||!cr(c),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,c])=>!cr(o)||!cr(c),e.setContent]:vS("Store type not supported by this Persister"),ew=(s,e,t,o,c,a,u,d={},T=0,S=[])=>{let L=0,R=0,w=0,g,V,E;Pl(ir,S,()=>0),Pl(rr,S,()=>[]);const D=Ji(),[k,P,cs,Ts,ts]=sw(u,s,T),[Q,b,N]=OR(()=>A),m=f=>{f!=L&&(L=f,b(D,void 0,L))},p=async()=>{if(!at(ir,S)){for(po(ir,S,1);!kt(g=AS(at(rr,S)));)await tc(g,a);po(ir,S,0)}},q=f=>{(k&&El(f==null?void 0:f[0])?(f==null?void 0:f[2])===1?s.applyMergeableChanges:s.setMergeableContent:(f==null?void 0:f[2])===1?s.applyChanges:s.setContent)(f)},ns=async f=>(L!=2&&(m(1),R++,await as(async()=>{await tc(async()=>{const v=await e();El(v)?q(v):f?ts(f):vS(`Content is not an array: ${v}`)},()=>{f&&ts(f)}),m(0)})),A),K=async f=>(M(),await ns(f),await tc(async()=>V=await o(async(v,U)=>{U||v?L!=2&&(m(1),R++,q(U??v),m(0)):await ns()}),a),A),M=async()=>(V&&(await tc(()=>c(V),a),V=void 0),A),ss=()=>!kt(V),X=async f=>(L!=1&&(m(2),w++,await as(async()=>{await tc(()=>t(P,f),a),m(0)})),A),Z=async()=>(G(),await X(),E=s.addDidFinishTransactionListener(()=>{const f=cs();Ts(f)&&X(f)}),A),G=async()=>(E&&(s.delListener(E),E=void 0),A),Ds=()=>!kt(E),bs=async(f,v=!1)=>{const[U,ws]=v?[Z,K]:[K,Z];return await U(f),await ws(f),A},B=async(f=!1)=>{const[v,U]=f?[G,M]:[M,G];return await v(),await U(),A},Rs=()=>L,hs=f=>Q(f,D),ks=f=>(N(f),s),as=async(...f)=>(Cu(at(rr,S),...f),await p(),A),A={load:ns,startAutoLoad:K,stopAutoLoad:M,isAutoLoading:ss,save:X,startAutoSave:Z,stopAutoSave:G,isAutoSaving:Ds,startAutoPersisting:bs,stopAutoPersisting:B,getStatus:Rs,addStatusListener:hs,delListener:ks,schedule:as,getStore:()=>s,destroy:()=>(mR(at(rr,S)),B()),getStats:()=>({loads:R,saves:w}),...d};return pR(A)},h$="storage",mS=(s,e,t,o)=>ew(s,async()=>GR(t.getItem(e)),async T=>t.setItem(e,BR(T())),T=>{const S=L=>{L.storageArea===t&&L.key===e&&tc(()=>T(MS(L.newValue)),T)};return R$.addEventListener(h$,S),S},T=>R$.removeEventListener(h$,T),o,3,{getStorageName:()=>e}),RE=(s,e,t)=>mS(s,e,localStorage,t),wE=(s,e,t)=>mS(s,e,sessionStorage,t),Wo=s=>typeof s,Lc="",tw=Wo(Lc),nw=Wo(!0),HS=Wo(0),ow=Wo(Wo),ar="type",ko="default",cw="Listener",iw="add",xo="Has",Na="Ids",oc="Table",y$=oc+"s",rw=oc+Na,Wr="Row",aw=Wr+"Count",lw=Wr+Na,br="Cell",V$=br+Na,Qr="Value",g$=Qr+"s",uw=Qr+Na,As=s=>Lc+s,$w=isFinite,Sw=(s,e)=>s instanceof e,ne=s=>s==null,te=(s,e,t)=>ne(s)?t==null?void 0:t():e(s),US=s=>s==tw||s==nw,tl=s=>Wo(s)==ow,pS=s=>Array.isArray(s),E$=(s,e,t)=>s.slice(e,t),qt=s=>s.length,Cw=(s,e)=>s.test(e),nl=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},dw=(s,e)=>s.includes(e),Lw=(s,e)=>s.every(e),fw=(s,e)=>qt(s)===qt(e)&&Lw(s,(t,o)=>e[o]===t),Tw=(s,e)=>s.sort(e),Fi=(s,e)=>s.forEach(e),Br=(s,e)=>s.map(e),Rw=(s,e,t)=>s.reduce(e,t),Gr=(s,...e)=>s.push(...e),ww=s=>s.shift(),li=s=>{const e=Wo(s);return US(e)||e==HS&&$w(s)?e:void 0},b$=(s,e,t,o,c)=>ne(c)?s.delCell(e,t,o,!0):s.setCell(e,t,o,c),P$=(s,e,t)=>ne(t)?s.delValue(e):s.setValue(e,t),du=s=>e=>Rw(hw(e),(t,o)=>t+s(o),0),Lu=s=>(s==null?void 0:s.size)??0,fu=du(Lu),hi=du(fu),ol=du(hi),ye=(s,e)=>(s==null?void 0:s.has(e))??!1,Ls=s=>ne(s)||Lu(s)==0,hw=s=>[...(s==null?void 0:s.values())??[]],cl=s=>s.clear(),js=(s,e)=>s==null?void 0:s.forEach(e),Jr=(s,e)=>s==null?void 0:s.delete(e),Ro=Object,j$=s=>Ro.getPrototypeOf(s),WS=Ro.entries,yw=Ro.isFrozen,Yr=s=>!ne(s)&&te(j$(s),e=>e==Ro.prototype||ne(j$(e)),()=>!0),Vw=Ro.keys,gw=Ro.freeze,Ew=(s=[])=>Ro.fromEntries(s),yi=(s,e)=>e in s,QS=(s,e)=>(delete s[e],s),bw=(s,e)=>Fi(WS(s),([t,o])=>e(o,t)),Pw=(s,e)=>Br(WS(s),([t,o])=>e(o,t)),Zn=(s,e)=>Ew(Pw(s,(t,o)=>[o,e(t,o)])),jw=s=>qt(Vw(s)),bt=s=>Yr(s)&&jw(s)==0,Yn=(s,e,t,o=0)=>ne(s)||!Yr(s)||!o&&bt(s)||yw(s)?(t==null||t(),!1):(bw(s,(c,a)=>{e(c,a)||QS(s,a)}),o?!0:!bt(s)),ys=s=>new Map(s),ui=s=>[...(s==null?void 0:s.keys())??[]],W=(s,e)=>s==null?void 0:s.get(e),In=(s,e)=>js(s,(t,o)=>e(o,t)),Dw=(s,e)=>Br([...(s==null?void 0:s.entries())??[]],([t,o])=>e(o,t)),Ms=(s,e,t)=>ne(t)?(Jr(s,e),s):s==null?void 0:s.set(e,t),Se=(s,e,t,o)=>(ye(s,e)?o==null||o(W(s,e)):Ms(s,e,t()),W(s,e)),No=(s,e,t,o=Ms)=>(Zn(e,(c,a)=>t(s,a,c)),In(s,c=>yi(e,c)?0:o(s,c)),s),He=(s,e,t,o)=>{const c={};return js(s,(a,u)=>{if(!(t!=null&&t(a,u))){const d=e?e(a,u):a;o!=null&&o(d)||(c[u]=d)}}),c},Dl=(s,e,t)=>He(s,o=>He(o,e,t),Ls,bt),lr=(s,e,t)=>He(s,o=>Dl(o,e,t),Ls,bt),eo=(s,e)=>{const t=ys();return js(s,(o,c)=>t.set(c,(e==null?void 0:e(o))??o)),t},kl=s=>eo(s,eo),il=s=>eo(s,kl),xl=(s,e,t,o,c=0)=>te((t?Se:W)(s,e[c],c>qt(e)-2?t:ys),a=>{if(c>qt(e)-2)return o!=null&&o(a)&&Ms(s,e[c]),a;const u=xl(a,e,t,o,c+1);return Ls(a)&&Ms(s,e[c]),u}),Vi=s=>new Set(pS(s)||ne(s)?s:[s]),gi=(s,e)=>s==null?void 0:s.add(e),kw=/^\d+$/,BS=()=>{const s=[];let e=0;return[t=>(t?ww(s):null)??Lc+e++,t=>{Cw(kw,t)&&qt(s)<1e3&&Gr(s,t)}]},xw=(s,e=[Lc])=>{const t=[],o=(c,a)=>a==qt(e)?Gr(t,c):e[a]===null?js(c,u=>o(u,a+1)):Fi([e[a],null],u=>o(W(c,u),a+1));return o(s,0),t},Nw=s=>{let e;const[t,o]=BS(),c=ys();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return Ms(c,V,[S,L,R,w,g]),gi(xl(L,R??[Lc],Vi),V),V},(S,L,...R)=>Fi(xw(S,L),w=>js(w,g=>W(c,g)[0](e,...L??[],...R))),S=>te(W(c,S),([,L,R])=>(xl(L,R??[Lc],void 0,w=>(Jr(w,S),Ls(w)?1:0)),Ms(c,S),o(S),R)),S=>te(W(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=qt(E);D==qt(R)?L(e,...E,...g(E)):ne(R[D])?Fi(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},vw=(s,e)=>(s??0)<(e??0)?-1:1,Aw=JSON.stringify,rl=JSON.parse,Oo=s=>Aw(s,(e,t)=>Sw(t,Map)?Ro.fromEntries([...t]):t),ur=s=>[s,s],Bs=(s,e=fu)=>e(s[0])+e(s[1]),Gs=()=>[ys(),ys()],D$=s=>[...s],$r=([s,e])=>s===e,$i=(s,e,t)=>Ms(s,e,W(s,e)==-t?void 0:t),Mw=()=>{let s,e,t=!1,o=!1,c=0,a=[];const u=ys(),d=ys(),T=ys(),S=ys(),L=ys(),R=ys(),w=ys(),g=ys(),V=ys(),E=ys(),D=ys(),k=ys(),P=ys(),cs=ys(),Ts=Vi(),ts=ys(),Q=ys(),b=ys(),N=ys(),m=Gs(),p=Gs(),q=Gs(),ns=Gs(),K=Gs(),M=Gs(),ss=Gs(),X=Gs(),Z=Gs(),G=Gs(),Ds=Gs(),bs=Gs(),B=Gs(),Rs=Gs(),hs=Gs(),ks=Gs(),as=Gs(),Ks=Gs(),Hs=Gs(),Us=Gs(),A=Gs(),f=Gs(),v=ys(),U=Gs(),[ws,z,Et,oe]=Nw(()=>Y),Zt=n=>Yn(n,i=>Yn(i,It)),jc=n=>Yn(n,It),It=n=>{if(!Yn(n,(r,l)=>dw([ar,ko],l)))return!1;const i=n[ar];return!US(i)&&i!=HS?!1:(li(n[ko])!=i&&QS(n,ko),!0)},Dc=pS,kc=n=>Yn(n,Ot,Fs),Ot=(n,i)=>(!s||ye(D,i)||Fs(i))&&Yn(n,(r,l)=>Ve(i,l,r),()=>Fs(i)),Ve=(n,i,r,l)=>Yn(l?r:nn(r,n,i),($,C)=>te(sn(n,i,C,$),h=>(r[C]=h,!0),()=>!1),()=>Fs(n,i)),sn=(n,i,r,l)=>s?te(W(W(D,n),r),$=>li(l)!=$[ar]?Fs(n,i,r,l,$[ko]):l,()=>Fs(n,i,r,l)):ne(li(l))?Fs(n,i,r,l):l,en=(n,i)=>Yn(i?n:xc(n),(r,l)=>te(tn(l,r),$=>(n[l]=$,!0),()=>!1),()=>le()),tn=(n,i)=>e?te(W(P,n),r=>li(i)!=r[ar]?le(n,i,r[ko]):i,()=>le(n,i)):ne(li(i))?le(n,i):i,nn=(n,i,r)=>(te(W(k,i),([l,$])=>{js(l,(C,h)=>{yi(n,h)||(n[h]=C)}),js($,C=>{yi(n,C)||Fs(i,r,C)})}),n),xc=n=>(e&&(js(cs,(i,r)=>{yi(n,r)||(n[r]=i)}),js(Ts,i=>{yi(n,i)||le(i)})),n),on=n=>No(D,n,(i,r,l)=>{const $=ys(),C=Vi();No(Se(D,r,ys),l,(h,j,x)=>{Ms(h,j,x),te(x[ko],os=>Ms($,j,os),()=>gi(C,j))}),Ms(k,r,[$,C])},(i,r)=>{Ms(D,r),Ms(k,r)}),cn=n=>No(P,n,(i,r,l)=>{Ms(P,r,l),te(l[ko],$=>Ms(cs,r,$),()=>gi(Ts,r))},(i,r)=>{Ms(P,r),Ms(cs,r),Jr(Ts,r)}),rn=n=>bt(n)?Me():ve(n),Nc=([n,i])=>{(bt(n)?Me:ve)(n),(bt(i)?Fe:Ae)(i)},an=n=>No(b,n,(i,r,l)=>ge(r,l),(i,r)=>Sn(r)),ge=(n,i)=>No(Se(b,n,()=>(fn(n,1),Ms(ts,n,BS()),Ms(Q,n,ys()),ys())),i,(r,l,$)=>ae(n,r,l,$),(r,l)=>Cn(n,r,l)),ae=(n,i,r,l,$)=>No(Se(i,r,()=>(Tn(n,r,1),ys())),l,(C,h,j)=>et(n,r,C,h,j),(C,h)=>dn(n,i,r,C,h,$)),et=(n,i,r,l,$)=>{ye(r,l)||Rn(n,i,l,1);const C=W(r,l);$!==C&&(wn(n,i,l,C,$),Ms(r,l,$))},ln=(n,i,r,l,$)=>te(W(i,r),C=>et(n,r,C,l,$),()=>ae(n,i,r,nn({[l]:$},n,r))),un=n=>bt(n)?Fe():Ae(n),$n=n=>No(N,n,(i,r,l)=>Ee(r,l),(i,r)=>Ln(r)),Ee=(n,i)=>{ye(N,n)||hn(n,1);const r=W(N,n);i!==r&&(yn(n,r,i),Ms(N,n,i))},vc=(n,i)=>{const[r]=W(ts,n);let l;do l=r(i);while(ye(W(b,n),l));return l},be=n=>W(b,n)??ge(n,{}),Sn=n=>ge(n,{}),Cn=(n,i,r)=>{const[,l]=W(ts,n);l(r),ae(n,i,r,{},!0)},dn=(n,i,r,l,$,C)=>{var x;const h=W((x=W(k,n))==null?void 0:x[0],$);if(!ne(h)&&!C)return et(n,r,l,$,h);const j=os=>{wn(n,r,os,W(l,os)),Rn(n,r,os,-1),Ms(l,os)};ne(h)?j($):In(l,j),Ls(l)&&(Tn(n,r,-1),Ls(Ms(i,r))&&(fn(n,-1),Ms(b,n),Ms(ts,n),Ms(Q,n)))},Ln=n=>{const i=W(cs,n);if(!ne(i))return Ee(n,i);yn(n,W(N,n)),hn(n,-1),Ms(N,n)},fn=(n,i)=>$i(u,n,i),Tn=(n,i,r)=>$i(Se(S,n,ys),i,r)&&Ms(T,n,Se(T,n,()=>0)+r),Rn=(n,i,r,l)=>{const $=W(Q,n),C=W($,r)??0;(C==0&&l==1||C==1&&l==-1)&&$i(Se(d,n,ys),r,l),Ms($,r,C!=-l?C+l:null),$i(Se(Se(L,n,ys),i,ys),r,l)},wn=(n,i,r,l,$)=>{var C;Se(Se(Se(R,n,ys),i,ys),r,()=>[l,0])[1]=$,(C=a[3])==null||C.call(a,n,i,r,$)},hn=(n,i)=>$i(w,n,i),yn=(n,i,r)=>{var l;Se(g,n,()=>[i,0])[1]=r,(l=a[4])==null||l.call(a,n,r)},Fs=(n,i,r,l,$)=>(Gr(Se(Se(Se(V,n,ys),i,ys),r,()=>[]),l),$),le=(n,i,r)=>(Gr(Se(E,n,()=>[]),i),r),Pe=(n,i,r)=>te(W(W(W(R,n),i),r),([l,$])=>[!0,l,$],()=>[!1,...ur(De(n,i,r))]),Vn=n=>te(W(g,n),([i,r])=>[!0,i,r],()=>[!1,...ur(ke(n))]),gn=n=>!Ls(V)&&!Ls(ks[n])?js(n?il(V):V,(i,r)=>js(i,(l,$)=>js(l,(C,h)=>z(ks[n],[r,$,h],C)))):0,En=n=>!Ls(E)&&!Ls(as[n])?js(n?eo(E):E,(i,r)=>z(as[n],[r],i)):0,ue=(n,i,r,l)=>{if(!Ls(n))return z(i,l,()=>He(n)),In(n,($,C)=>z(r,[...l??[],$],C==1)),1},bn=n=>{const i=xe();i!=t&&z(m[n],void 0,i);const r=Ls(G[n]),l=Ls(B[n])&&Ls(Rs[n])&&Ls(Z[n])&&Ls(Ds[n])&&Ls(M[n])&&Ls(ss[n])&&Ls(X[n])&&r&&Ls(q[n])&&Ls(ns[n]),$=Ls(hs[n])&&Ls(bs[n])&&Ls(K[n])&&Ls(p[n]);if(!l||!$){const C=n?[eo(u),kl(d),eo(T),kl(S),il(L),il(R)]:[u,d,T,S,L,R];if(!l){ue(C[0],q[n],ns[n]),js(C[1],(j,x)=>ue(j,M[n],ss[n],[x])),js(C[2],(j,x)=>{j!=0&&z(X[n],[x],kn(x))});const h=Vi();js(C[3],(j,x)=>{ue(j,Z[n],Ds[n],[x])&&!r&&(z(G[n],[x,null]),gi(h,x))}),r||js(C[5],(j,x)=>{if(!ye(h,x)){const os=Vi();js(j,_s=>js(_s,([_e,ze],$e)=>ze!==_e?gi(os,$e):Jr(_s,$e))),js(os,_s=>z(G[n],[x,_s]))}}),js(C[4],(j,x)=>js(j,(os,_s)=>ue(os,B[n],Rs[n],[x,_s])))}if(!$){let h;js(C[5],(j,x)=>{let os;js(j,(_s,_e)=>{let ze;js(_s,([$e,Qn],ci)=>{Qn!==$e&&(z(hs[n],[x,_e,ci],Qn,$e,Pe),h=os=ze=1)}),ze&&z(bs[n],[x,_e],Pe)}),os&&z(K[n],[x],Pe)}),h&&z(p[n],void 0,Pe)}}},Pn=n=>{const i=Ne();i!=o&&z(Ks[n],void 0,i);const r=Ls(Us[n])&&Ls(A[n]),l=Ls(f[n])&&Ls(Hs[n]);if(!r||!l){const $=n?[eo(w),eo(g)]:[w,g];if(r||ue($[0],Us[n],A[n]),!l){let C;js($[1],([h,j],x)=>{j!==h&&(z(f[n],[x],j,h,Vn),C=1)}),C&&z(Hs[n],void 0,Vn)}}},_=(n,...i)=>(rt(()=>n(...Br(i,As))),Y),jn=(n,i,r,l,$)=>{let C=je(n,i,...r);return ws(()=>{const h=je(n,i,...r);fw(h,C)||(C=h,l(Y,n,i,...r,C))},G[$?1:0],[n,i],[$s])},Ac=()=>[tt(),ot()],tt=()=>lr(b),$s=()=>ui(b),Mc=n=>Dl(W(b,As(n))),Dn=n=>ui(W(Q,As(n))),kn=n=>Lu(W(b,As(n))),Is=n=>ui(W(b,As(n))),je=(n,i,r,l=0,$)=>Yr(n)?je(n.tableId,n.cellId,n.descending,n.offset,n.limit):Br(E$(Tw(Dw(W(b,As(n)),(C,h)=>[ne(i)?h:W(C,As(i)),h]),([C],[h])=>vw(C,h)*(r?-1:1)),l,ne($)?$:l+$),([,C])=>C),Fc=(n,i)=>He(W(W(b,As(n)),As(i))),nt=(n,i)=>ui(W(W(b,As(n)),As(i))),De=(n,i,r)=>W(W(W(b,As(n)),As(i)),As(r)),ot=()=>He(N),ct=()=>ui(N),ke=n=>W(N,As(n)),xe=()=>!Ls(b),xn=n=>ye(b,As(n)),Nn=(n,i)=>ye(W(Q,As(n)),As(i)),vn=(n,i)=>ye(W(b,As(n)),As(i)),An=(n,i,r)=>ye(W(W(b,As(n)),As(i)),As(r)),Ne=()=>!Ls(N),Mn=n=>ye(N,As(n)),_c=()=>Oo(b),zc=()=>Oo(N),mc=()=>Oo([b,N]),Hc=()=>Oo(D),Uc=()=>Oo(P),pc=()=>Oo([D,P]),Wc=n=>_(()=>{const i=tl(n)?n():n;Dc(i)&&Nc(i)}),ve=n=>_(()=>kc(n)?an(n):0),Qc=(n,i)=>_(r=>Ot(i,r)?ge(r,i):0,n),Bc=(n,i,r)=>_((l,$)=>Ve(l,$,r)?ae(l,be(l),$,r):0,n,i),Gc=(n,i,r=!0)=>rt(()=>{let l;return Ve(n,l,i)&&(n=As(n),ae(n,be(n),l=vc(n,r?1:0),i)),l}),Jc=(n,i,r)=>_((l,$)=>{if(Ve(l,$,r,1)){const C=be(l);Zn(r,(h,j)=>ln(l,C,$,j,h))}},n,i),Yc=(n,i,r,l)=>_(($,C,h)=>te(sn($,C,h,tl(l)?l(De($,C,h)):l),j=>ln($,be($),C,h,j)),n,i,r),Ae=n=>_(()=>en(n)?$n(n):0),qc=n=>_(()=>en(n,1)?Zn(n,(i,r)=>Ee(r,i)):0),Kc=(n,i)=>_(r=>te(tn(r,tl(i)?i(ke(r)):i),l=>Ee(r,l)),n),Xc=n=>_(()=>{Zn(n[0],(i,r)=>ne(i)?mn(r):Zn(i,(l,$)=>ne(l)?Hn(r,$):Zn(l,(C,h)=>b$(Y,r,$,h,C)))),Zn(n[1],(i,r)=>P$(Y,r,i))}),Fn=n=>(nl(()=>rn(rl(n))),Y),Zc=n=>(nl(()=>un(rl(n))),Y),Ic=n=>_(()=>nl(()=>{const[i,r]=rl(n);rn(i),un(r)},()=>Fn(n))),_n=n=>_(()=>{if((s=Zt(n))&&(on(n),!Ls(b))){const i=tt();Me(),ve(i)}}),zn=n=>_(()=>{if(e=jc(n)){const i=ot();it(),Fe(),e=!0,cn(n),Ae(i)}}),Oc=(n,i)=>_(()=>{_n(n),zn(i)}),Me=()=>_(()=>an({})),mn=n=>_(i=>ye(b,i)?Sn(i):0,n),Hn=(n,i)=>_((r,l)=>te(W(b,r),$=>ye($,l)?Cn(r,$,l):0),n,i),si=(n,i,r,l)=>_(($,C,h)=>te(W(b,$),j=>te(W(j,C),x=>ye(x,h)?dn($,j,C,x,h,l):0)),n,i,r),Fe=()=>_(()=>$n({})),ei=n=>_(i=>ye(N,i)?Ln(i):0,n),Un=()=>_(()=>{on({}),s=!1}),it=()=>_(()=>{cn({}),e=!1}),ti=()=>_(()=>{Un(),it()}),rt=(n,i)=>{if(c!=-1){pn();const r=n();return Wn(i),r}},pn=()=>{var n;return c!=-1&&c++,c==1&&((n=a[0])==null||n.call(a),z(v)),Y},ni=()=>[He(R,(n,i)=>W(u,i)===-1?void 0:He(n,(r,l)=>W(W(S,i),l)===-1?void 0:He(r,([,$])=>$,$=>$r($)),Ls,bt),Ls,bt),He(g,([,n])=>n,n=>$r(n)),1],oi=()=>[!Ls(R),!Ls(g),lr(R,D$,$r),lr(V),He(g,D$,$r),He(E),He(u),Dl(S),lr(L),He(w)],Wn=n=>{var i,r;return c>0&&(c--,c==0&&(c=1,gn(1),Ls(R)||bn(1),En(1),Ls(g)||Pn(1),n!=null&&n(Y)&&(js(R,(l,$)=>js(l,(C,h)=>js(C,([j],x)=>b$(Y,$,h,x,j)))),cl(R),js(g,([l],$)=>P$(Y,$,l)),cl(g)),z(U[0],void 0),c=-1,gn(0),Ls(R)||bn(0),En(0),Ls(g)||Pn(0),(i=a[1])==null||i.call(a),z(U[1],void 0),(r=a[2])==null||r.call(a),c=0,t=xe(),o=Ne(),Fi([u,d,T,S,L,R,V,w,g,E],cl))),Y},Y={getContent:Ac,getTables:tt,getTableIds:$s,getTable:Mc,getTableCellIds:Dn,getRowCount:kn,getRowIds:Is,getSortedRowIds:je,getRow:Fc,getCellIds:nt,getCell:De,getValues:ot,getValueIds:ct,getValue:ke,hasTables:xe,hasTable:xn,hasTableCell:Nn,hasRow:vn,hasCell:An,hasValues:Ne,hasValue:Mn,getTablesJson:_c,getValuesJson:zc,getJson:mc,getTablesSchemaJson:Hc,getValuesSchemaJson:Uc,getSchemaJson:pc,hasTablesSchema:()=>s,hasValuesSchema:()=>e,setContent:Wc,setTables:ve,setTable:Qc,setRow:Bc,addRow:Gc,setPartialRow:Jc,setCell:Yc,setValues:Ae,setPartialValues:qc,setValue:Kc,applyChanges:Xc,setTablesJson:Fn,setValuesJson:Zc,setJson:Ic,setTablesSchema:_n,setValuesSchema:zn,setSchema:Oc,delTables:Me,delTable:mn,delRow:Hn,delCell:si,delValues:Fe,delValue:ei,delTablesSchema:Un,delValuesSchema:it,delSchema:ti,transaction:rt,startTransaction:pn,getTransactionChanges:ni,getTransactionLog:oi,finishTransaction:Wn,forEachTable:n=>js(b,(i,r)=>n(r,l=>js(i,($,C)=>l(C,h=>In($,h))))),forEachTableCell:(n,i)=>In(W(Q,As(n)),i),forEachRow:(n,i)=>js(W(b,As(n)),(r,l)=>i(l,$=>In(r,$))),forEachCell:(n,i,r)=>In(W(W(b,As(n)),As(i)),r),forEachValue:n=>In(N,n),addSortedRowIdsListener:(n,i,r,l,$,C,h)=>Yr(n)?jn(n.tableId,n.cellId,[n.descending??!1,n.offset??0,n.limit],i,r):jn(n,i,[r,l,$],C,h),addStartTransactionListener:n=>ws(n,v),addWillFinishTransactionListener:n=>ws(n,U[0]),addDidFinishTransactionListener:n=>ws(n,U[1]),callListener:n=>(oe(n),Y),delListener:n=>(Et(n),Y),getListenerStats:()=>({hasTables:Bs(m),tables:Bs(p),tableIds:Bs(q),hasTable:Bs(ns),table:Bs(K),tableCellIds:Bs(M),hasTableCell:Bs(ss,hi),rowCount:Bs(X),rowIds:Bs(Z),sortedRowIds:Bs(G),hasRow:Bs(Ds,hi),row:Bs(bs,hi),cellIds:Bs(B,hi),hasCell:Bs(Rs,ol),cell:Bs(hs,ol),invalidCell:Bs(ks,ol),hasValues:Bs(Ks),values:Bs(Hs),valueIds:Bs(Us),hasValue:Bs(A),value:Bs(f),invalidValue:Bs(as),transaction:fu(v)+Bs(U)}),isMergeable:()=>!1,createStore:Mw,addListener:ws,callListeners:z,setInternalListeners:(n,i,r,l,$)=>a=[n,i,r,l,$]};return Zn({[xo+y$]:[0,m,[],()=>[xe()]],[y$]:[0,p],[rw]:[0,q],[xo+oc]:[1,ns,[$s],n=>[xn(...n)]],[oc]:[1,K,[$s]],[oc+V$]:[1,M,[$s]],[xo+oc+br]:[2,ss,[$s,Dn],n=>[Nn(...n)]],[aw]:[1,X,[$s]],[lw]:[1,Z,[$s]],[xo+Wr]:[2,Ds,[$s,Is],n=>[vn(...n)]],[Wr]:[2,bs,[$s,Is]],[V$]:[2,B,[$s,Is]],[xo+br]:[3,Rs,[$s,Is,nt],n=>[An(...n)]],[br]:[3,hs,[$s,Is,nt],n=>ur(De(...n))],InvalidCell:[3,ks],[xo+g$]:[0,Ks,[],()=>[Ne()]],[g$]:[0,Hs],[uw]:[0,Us],[xo+Qr]:[1,A,[ct],n=>[Mn(...n)]],[Qr]:[1,f,[ct],n=>ur(ke(n[0]))],InvalidValue:[1,as]},([n,i,r,l],$)=>{Y[iw+$+cw]=(...C)=>ws(C[n],i[C[n+1]?1:0],n>0?E$(C,0,n):void 0,r,l)}),gw(Y)},qr="",xt=s=>s==null,Kr=(s,e,t)=>xt(s)?t==null?void 0:t():e(s),Nl=s=>Array.isArray(s),Qo=s=>s.length,Fw=(s,e)=>s.test(e),GS=s=>{throw new Error(s)},Si=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},vl=(s,e)=>s.forEach(e),_w=(s,e)=>s.splice(0,e),Tu=(s,...e)=>s.push(...e),JS=s=>s.shift(),zw=s=>(s==null?void 0:s.size)??0,mw=(s,e)=>(s==null?void 0:s.has(e))??!1,YS=s=>xt(s)||zw(s)==0,qS=(s,e)=>s==null?void 0:s.forEach(e),KS=(s,e)=>s==null?void 0:s.delete(e),va=Object,k$=s=>va.getPrototypeOf(s),Hw=s=>!xt(s)&&Kr(k$(s),e=>e==va.prototype||xt(k$(e)),()=>!0),Uw=va.keys,pw=va.freeze,Ww=s=>Qo(Uw(s)),Sr=s=>Hw(s)&&Ww(s)==0,Yi=s=>new Map(s),lt=(s,e)=>s==null?void 0:s.get(e),Bo=(s,e,t)=>xt(t)?(KS(s,e),s):s==null?void 0:s.set(e,t),Al=(s,e,t,o)=>(mw(s,e)?o==null||o(lt(s,e)):Bo(s,e,t()),lt(s,e)),Ml=(s,e,t,o,c=0)=>Kr((t?Al:lt)(s,e[c],c>Qo(e)-2?t:Yi),a=>{if(c>Qo(e)-2)return o!=null&&o(a)&&Bo(s,e[c]),a;const u=Ml(a,e,t,o,c+1);return YS(a)&&Bo(s,e[c]),u}),Qw=/^\d+$/,Bw=()=>{const s=[];let e=0;return[t=>(t?JS(s):null)??qr+e++,t=>{Fw(Qw,t)&&Qo(s)<1e3&&Tu(s,t)}]},Gw=s=>new Set(Nl(s)||xt(s)?s:[s]),Jw=(s,e)=>s==null?void 0:s.add(e),Yw=(s,e=[qr])=>{const t=[],o=(c,a)=>a==Qo(e)?Tu(t,c):e[a]===null?qS(c,u=>o(u,a+1)):vl([e[a],null],u=>o(lt(c,u),a+1));return o(s,0),t},qw=s=>{let e;const[t,o]=Bw(),c=Yi();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return Bo(c,V,[S,L,R,w,g]),Jw(Ml(L,R??[qr],Gw),V),V},(S,L,...R)=>vl(Yw(S,L),w=>qS(w,g=>lt(c,g)[0](e,...L??[],...R))),S=>Kr(lt(c,S),([,L,R])=>(Ml(L,R??[qr],void 0,w=>(KS(w,S),YS(w)?1:0)),Bo(c,S),o(S),R)),S=>Kr(lt(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=Qo(E);D==Qo(R)?L(e,...E,...g(E)):xt(R[D])?vl(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},Cr=Yi(),dr=Yi(),Kw=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[c]])=>!Sr(o)||!Sr(c),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,c])=>!Sr(o)||!Sr(c),e.setContent]:GS("Store type not supported by this Persister"),hE=(s,e,t,o,c,a,u,d={},T=0,S=[])=>{let L=0,R=0,w=0,g,V,E;Al(Cr,S,()=>0),Al(dr,S,()=>[]);const D=Yi(),[k,P,cs,Ts,ts]=Kw(u,s,T),[Q,b,N]=qw(()=>A),m=f=>{f!=L&&(L=f,b(D,void 0,L))},p=async()=>{if(!lt(Cr,S)){for(Bo(Cr,S,1);!xt(g=JS(lt(dr,S)));)await Si(g,a);Bo(Cr,S,0)}},q=f=>{(k&&Nl(f==null?void 0:f[0])?(f==null?void 0:f[2])===1?s.applyMergeableChanges:s.setMergeableContent:(f==null?void 0:f[2])===1?s.applyChanges:s.setContent)(f)},ns=async f=>(L!=2&&(m(1),R++,await as(async()=>{await Si(async()=>{const v=await e();Nl(v)?q(v):f?ts(f):GS(`Content is not an array: ${v}`)},()=>{f&&ts(f)}),m(0)})),A),K=async f=>(M(),await ns(f),await Si(async()=>V=await o(async(v,U)=>{U||v?L!=2&&(m(1),R++,q(U??v),m(0)):await ns()}),a),A),M=async()=>(V&&(await Si(()=>c(V),a),V=void 0),A),ss=()=>!xt(V),X=async f=>(L!=1&&(m(2),w++,await as(async()=>{await Si(()=>t(P,f),a),m(0)})),A),Z=async()=>(G(),await X(),E=s.addDidFinishTransactionListener(()=>{const f=cs();Ts(f)&&X(f)}),A),G=async()=>(E&&(s.delListener(E),E=void 0),A),Ds=()=>!xt(E),bs=async(f,v=!1)=>{const[U,ws]=v?[Z,K]:[K,Z];return await U(f),await ws(f),A},B=async(f=!1)=>{const[v,U]=f?[G,M]:[M,G];return await v(),await U(),A},Rs=()=>L,hs=f=>Q(f,D),ks=f=>(N(f),s),as=async(...f)=>(Tu(lt(dr,S),...f),await p(),A),A={load:ns,startAutoLoad:K,stopAutoLoad:M,isAutoLoading:ss,save:X,startAutoSave:Z,stopAutoSave:G,isAutoSaving:Ds,startAutoPersisting:bs,stopAutoPersisting:B,getStatus:Rs,addStatusListener:hs,delListener:ks,schedule:as,getStore:()=>s,destroy:()=>(_w(lt(dr,S)),B()),getStats:()=>({loads:R,saves:w}),...d};return pw(A)},Xr="",XS="￼",Xw=globalThis,x$=Xw.window,Nt=s=>s==null,Zr=(s,e,t)=>Nt(s)?t==null?void 0:t():e(s),Fl=s=>Array.isArray(s),Go=s=>s.length,Zw=(s,e)=>s.test(e),ZS=s=>{throw new Error(s)},nc=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},_l=(s,e)=>s.forEach(e),Iw=(s,e)=>s.splice(0,e),Ru=(s,...e)=>s.push(...e),IS=s=>s.shift(),Aa=Object,N$=s=>Aa.getPrototypeOf(s),Ow=s=>!Nt(s)&&Zr(N$(s),e=>e==Aa.prototype||Nt(N$(e)),()=>!0),sh=Aa.keys,eh=Aa.freeze,th=s=>Go(sh(s)),Lr=s=>Ow(s)&&th(s)==0,nh=JSON.stringify,OS=JSON.parse,oh=s=>nh(s,(e,t)=>t===void 0?XS:t),ch=s=>OS(s,(e,t)=>t===XS?void 0:t),ih=s=>(s==null?void 0:s.size)??0,rh=(s,e)=>(s==null?void 0:s.has(e))??!1,s0=s=>Nt(s)||ih(s)==0,e0=(s,e)=>s==null?void 0:s.forEach(e),t0=(s,e)=>s==null?void 0:s.delete(e),qi=s=>new Map(s),ut=(s,e)=>s==null?void 0:s.get(e),Jo=(s,e,t)=>Nt(t)?(t0(s,e),s):s==null?void 0:s.set(e,t),zl=(s,e,t,o)=>(rh(s,e)?o==null||o(ut(s,e)):Jo(s,e,t()),ut(s,e)),ml=(s,e,t,o,c=0)=>Zr((t?zl:ut)(s,e[c],c>Go(e)-2?t:qi),a=>{if(c>Go(e)-2)return o!=null&&o(a)&&Jo(s,e[c]),a;const u=ml(a,e,t,o,c+1);return s0(a)&&Jo(s,e[c]),u}),ah=/^\d+$/,lh=()=>{const s=[];let e=0;return[t=>(t?IS(s):null)??Xr+e++,t=>{Zw(ah,t)&&Go(s)<1e3&&Ru(s,t)}]},uh=s=>new Set(Fl(s)||Nt(s)?s:[s]),$h=(s,e)=>s==null?void 0:s.add(e),Sh=(s,e=[Xr])=>{const t=[],o=(c,a)=>a==Go(e)?Ru(t,c):e[a]===null?e0(c,u=>o(u,a+1)):_l([e[a],null],u=>o(ut(c,u),a+1));return o(s,0),t},Ch=s=>{let e;const[t,o]=lh(),c=qi();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return Jo(c,V,[S,L,R,w,g]),$h(ml(L,R??[Xr],uh),V),V},(S,L,...R)=>_l(Sh(S,L),w=>e0(w,g=>ut(c,g)[0](e,...L??[],...R))),S=>Zr(ut(c,S),([,L,R])=>(ml(L,R??[Xr],void 0,w=>(t0(w,S),s0(w)?1:0)),Jo(c,S),o(S),R)),S=>Zr(ut(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=Go(E);D==Go(R)?L(e,...E,...g(E)):Nt(R[D])?_l(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},fr=qi(),Tr=qi(),dh=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[c]])=>!Lr(o)||!Lr(c),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,c])=>!Lr(o)||!Lr(c),e.setContent]:ZS("Store type not supported by this Persister"),Lh=(s,e,t,o,c,a,u,d={},T=0,S=[])=>{let L=0,R=0,w=0,g,V,E;zl(fr,S,()=>0),zl(Tr,S,()=>[]);const D=qi(),[k,P,cs,Ts,ts]=dh(u,s,T),[Q,b,N]=Ch(()=>A),m=f=>{f!=L&&(L=f,b(D,void 0,L))},p=async()=>{if(!ut(fr,S)){for(Jo(fr,S,1);!Nt(g=IS(ut(Tr,S)));)await nc(g,a);Jo(fr,S,0)}},q=f=>{(k&&Fl(f==null?void 0:f[0])?(f==null?void 0:f[2])===1?s.applyMergeableChanges:s.setMergeableContent:(f==null?void 0:f[2])===1?s.applyChanges:s.setContent)(f)},ns=async f=>(L!=2&&(m(1),R++,await as(async()=>{await nc(async()=>{const v=await e();Fl(v)?q(v):f?ts(f):ZS(`Content is not an array: ${v}`)},()=>{f&&ts(f)}),m(0)})),A),K=async f=>(M(),await ns(f),await nc(async()=>V=await o(async(v,U)=>{U||v?L!=2&&(m(1),R++,q(U??v),m(0)):await ns()}),a),A),M=async()=>(V&&(await nc(()=>c(V),a),V=void 0),A),ss=()=>!Nt(V),X=async f=>(L!=1&&(m(2),w++,await as(async()=>{await nc(()=>t(P,f),a),m(0)})),A),Z=async()=>(G(),await X(),E=s.addDidFinishTransactionListener(()=>{const f=cs();Ts(f)&&X(f)}),A),G=async()=>(E&&(s.delListener(E),E=void 0),A),Ds=()=>!Nt(E),bs=async(f,v=!1)=>{const[U,ws]=v?[Z,K]:[K,Z];return await U(f),await ws(f),A},B=async(f=!1)=>{const[v,U]=f?[G,M]:[M,G];return await v(),await U(),A},Rs=()=>L,hs=f=>Q(f,D),ks=f=>(N(f),s),as=async(...f)=>(Ru(ut(Tr,S),...f),await p(),A),A={load:ns,startAutoLoad:K,stopAutoLoad:M,isAutoLoading:ss,save:X,startAutoSave:Z,stopAutoSave:G,isAutoSaving:Ds,startAutoPersisting:bs,stopAutoPersisting:B,getStatus:Rs,addStatusListener:hs,delListener:ks,schedule:as,getStore:()=>s,destroy:()=>(Iw(ut(Tr,S)),B()),getStats:()=>({loads:R,saves:w}),...d};return eh(A)},v$="storage",fh=(s,e,t,o)=>Lh(s,async()=>ch(t.getItem(e)),async T=>t.setItem(e,oh(T())),T=>{const S=L=>{L.storageArea===t&&L.key===e&&nc(()=>T(OS(L.newValue)),T)};return x$.addEventListener(v$,S),S},T=>x$.removeEventListener(v$,T),o,3,{getStorageName:()=>e}),yE=(s,e,t)=>fh(s,e,localStorage,t),_i=s=>typeof s,Th="tinybase",Oe="",Rh=_i(Oe),wh=_i(_i),hh="Listener",Te="Result",yh="get",Vh="set",gh="add",Eh="del",wo="Has",bh="has",Ye="Ids",Re="Table",bc=Re+"s",n0=Re+Ye,qe="Row",Ma=qe+"Count",Ut=qe+Ye,Fa="Sorted"+qe+Ye,yt="Cell",ho=yt+Ye,yo="Value",Zo=yo+"s",o0=yo+Ye,wu="Transaction",c0="Partial",i0="Finish",_a="Status",hu="Metric",Ph="Index",za="Slice",jh="Relationship",r0="Remote"+qe+"Id",a0="Local",l0="Linked",Dh="Query",ma="Checkpoint",al=globalThis,dt=s=>s==null,Lt=(s,e,t)=>dt(s)?t==null?void 0:t():e(s),u0=s=>_i(s)==Rh,yu=s=>_i(s)==wh,kh=s=>Array.isArray(s),zi=s=>s.length,fc=()=>{},xh=(s,e)=>Ke(new Array(s).fill(0),(t,o)=>e(o)),$0=(s,e)=>s.every(e),ll=(s,e)=>zi(s)===zi(e)&&$0(s,(t,o)=>e[o]===t),Ke=(s,e)=>s.map(e),Nh=s=>zi(s)==0,vh=(s,e)=>s.filter(e),A$=(s,e,t)=>s.with(e,t),Ha=Object,M$=s=>Ha.getPrototypeOf(s),Ah=Ha.entries,Ir=s=>!dt(s)&&Lt(M$(s),e=>e==Ha.prototype||dt(M$(e)),()=>!0),S0=Ha.keys,C0=(s,e)=>Lt(s,t=>t[e]),Mh=(s,e)=>e in s,Fh=(s,e)=>(delete s[e],s),_h=s=>zi(S0(s)),d0=(s,e)=>{const t=Ah(s);return zi(t)===_h(e)&&$0(t,([o,c])=>Ir(c)?Ir(e[o])?d0(e[o],c):!1:e[o]===c)},{PureComponent:VE,createContext:zh,useCallback:Ft,useContext:Ki,useEffect:Tc,useLayoutEffect:mh,useMemo:Vu,useRef:Hh,useState:Rc,useSyncExternalStore:Uh}=ca,Vt=(s,...e)=>dt(s)?{}:s(...e),L0=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(e),s==null?void 0:s.getRemoteTableId(e)],ph=(s,e)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(e)];var Es=(s=>(s[s.Store=0]="Store",s[s.Metrics=1]="Metrics",s[s.Indexes=2]="Indexes",s[s.Relationships=3]="Relationships",s[s.Queries=4]="Queries",s[s.Checkpoints=5]="Checkpoints",s[s.Persister=6]="Persister",s[s.Synchronizer=7]="Synchronizer",s))(Es||{});const ul=Th+"_uirc",wc=al[ul]?al[ul]:al[ul]=zh([]),Xt=(s,e)=>{const t=Ki(wc);return dt(s)?t[e*2]:u0(s)?C0(t[e*2+1],s):s},Wh=s=>({...Ki(wc)[s*2+1]}),Vo=(s,e)=>{const t=Xt(s,e);return dt(s)||u0(s)?t:s},go=(s,e,t)=>{const{16:o,17:c}=Ki(wc);Tc(()=>(o==null||o(t,s,e),()=>c==null?void 0:c(t,s)),[o,s,e,t,c])},Eo=s=>S0(Ki(wc)[s*2+1]??{}),ms=[],F$=[{},[],[ms,void 0,ms],void 0,!1,0],Qh=[d0,ll,([s,e,t],[o,c,a])=>e===c&&ll(s,o)&&ll(t,a)],Bh=(s,e)=>s===e,Xi=(s,e,t=ms)=>{const[,o]=Rc(),[c,a]=Rc();return Tc(()=>{const u=s?e(s):void 0;return a(u),o([]),u==null?void 0:u.destroy},[s,...t]),c},f0=(s,e,...t)=>{var c;const o=(c=s==null?void 0:s[gh+e+hh])==null?void 0:c.call(s,...t);return()=>{var a;return(a=s==null?void 0:s.delListener)==null?void 0:a.call(s,o)}},us=(s,e,t,o=ms)=>{const c=Hh(F$[t]),a=Ft(()=>{var T;const d=((T=e==null?void 0:e[(t==4?bh:yh)+s])==null?void 0:T.call(e,...o))??F$[t];return(Qh[t]??Bh)(d,c.current)?c.current:c.current=d},[e,t,s,...o]),u=Ft(d=>f0(e,(t==4?wo:Oe)+s,...o,d),[e,t,s,...o]);return Uh(u,a,a)},Cs=(s,e,t,o=ms,c=ms,...a)=>mh(()=>f0(e,s,...c,t,...a),[e,s,...c,...o,...a]),bo=(s,e,t,o=ms,c=fc,a=ms,...u)=>{const d=O(s);return Ft(T=>Lt(d,S=>Lt(t(T,S),L=>c(S[Vh+e](...T0(u,S,T),L),L))),[d,e,...o,...a,...R0(u)])},T0=(s,e,t)=>Ke(s,o=>yu(o)?o(t,e):o),R0=s=>vh(s,e=>!yu(e)),Pc=(s,e,t=fc,o=ms,...c)=>{const a=O(s);return Ft(u=>t(a==null?void 0:a[Eh+e](...T0(c,a,u))),[a,e,...o,...R0(c)])},w0=(s,e,t)=>{const o=gt(s);return Ft(()=>o==null?void 0:o[e](t),[o,e,t])},Gh=(s,e,t,o,c,a)=>us(Fa,O(a),1,[s,e,t,o,c]),h0=(s,e,t,o,c,a,u,d,T)=>Cs(Fa,O(T),a,u,[s,e,t,o,c],d),Jh=(s,e=ms)=>Vu(s,e),Yh=()=>Eo(Es.Store),qh=s=>Xt(s,Es.Store),Kh=()=>Wh(Es.Store),O=s=>Vo(s,Es.Store),Xh=(s,e)=>go(s,e,Es.Store),Zh=(s,e=ms)=>Vu(s,e),Ih=s=>us(bc,O(s),4,[]),Oh=s=>us(bc,O(s),0),y0=s=>us(n0,O(s),1),sy=(s,e)=>us(Re,O(e),4,[s]),ey=(s,e)=>us(Re,O(e),0,[s]),ty=(s,e)=>us(Re+ho,O(e),1,[s]),ny=(s,e,t)=>us(Re+yt,O(t),4,[s,e]),oy=(s,e)=>us(Ma,O(e),5,[s]),V0=(s,e)=>us(Ut,O(e),1,[s]),g0=(s,e,t,o,c,a)=>Gh(...Ir(s)?[s.tableId,s.cellId,s.descending??!1,s.offset??0,s.limit,e]:[s,e,t,o,c,a]),cy=(s,e,t)=>us(qe,O(t),4,[s,e]),iy=(s,e,t)=>us(qe,O(t),0,[s,e]),E0=(s,e,t)=>us(ho,O(t),1,[s,e]),ry=(s,e,t,o)=>us(yt,O(o),4,[s,e,t]),b0=(s,e,t,o)=>us(yt,O(o),3,[s,e,t]),ay=s=>us(Zo,O(s),4,[]),ly=s=>us(Zo,O(s),0),P0=s=>us(o0,O(s),1),uy=(s,e)=>us(yo,O(e),4,[s]),j0=(s,e)=>us(yo,O(e),3,[s]),$y=(s,e,t,o,c)=>bo(t,bc,s,e,o,c),Sy=(s,e,t,o,c,a)=>bo(o,Re,e,t,c,a,s),Cy=(s,e,t,o,c,a,u)=>bo(c,qe,t,o,a,u,s,e),dy=(s,e,t=ms,o,c=fc,a=ms,u=!0)=>{const d=O(o);return Ft(T=>Lt(d,S=>Lt(e(T,S),L=>c(S.addRow(yu(s)?s(T,S):s,L,u),S,L))),[d,s,...t,...a,u])},Ly=(s,e,t,o,c,a,u)=>bo(c,c0+qe,t,o,a,u,s,e),fy=(s,e,t,o,c,a,u,d)=>bo(a,yt,o,c,u,d,s,e,t),Ty=(s,e,t,o,c)=>bo(t,Zo,s,e,o,c),Ry=(s,e,t,o,c)=>bo(t,c0+Zo,s,e,o,c),wy=(s,e,t,o,c,a)=>bo(o,yo,e,t,c,a,s),hy=(s,e,t)=>Pc(s,bc,e,t),yy=(s,e,t,o)=>Pc(e,Re,t,o,s),Vy=(s,e,t,o,c)=>Pc(t,qe,o,c,s,e),gy=(s,e,t,o,c,a,u)=>Pc(c,yt,a,u,s,e,t,o),Ey=(s,e,t)=>Pc(s,Zo,e,t),by=(s,e,t,o)=>Pc(e,yo,t,o,s),Py=(s,e,t,o)=>Cs(wo+bc,O(o),s,e,[],t),jy=(s,e,t,o)=>Cs(bc,O(o),s,e,ms,t),Dy=(s,e,t,o)=>Cs(n0,O(o),s,e,ms,t),ky=(s,e,t,o,c)=>Cs(wo+Re,O(c),e,t,[s],o),xy=(s,e,t,o,c)=>Cs(Re,O(c),e,t,[s],o),Ny=(s,e,t,o,c)=>Cs(Re+ho,O(c),e,t,[s],o),vy=(s,e,t,o,c,a)=>Cs(wo+Re+yt,O(a),t,o,[s,e],c),Ay=(s,e,t,o,c)=>Cs(Ma,O(c),e,t,[s],o),My=(s,e,t,o,c)=>Cs(Ut,O(c),e,t,[s],o),Fy=(s,e,t,o,c,a,u,d,T)=>h0(...Ir(s)?[s.tableId,s.cellId,s.descending??!1,s.offset??0,s.limit,e,t,o,c]:[s,e,t,o,c,a,u,d,T]),_y=(s,e,t,o,c,a)=>Cs(wo+qe,O(a),t,o,[s,e],c),zy=(s,e,t,o,c,a)=>Cs(qe,O(a),t,o,[s,e],c),my=(s,e,t,o,c,a)=>Cs(ho,O(a),t,o,[s,e],c),Hy=(s,e,t,o,c,a,u)=>Cs(wo+yt,O(u),o,c,[s,e,t],a),Uy=(s,e,t,o,c,a,u)=>Cs(yt,O(u),o,c,[s,e,t],a),py=(s,e,t,o)=>Cs(wo+Zo,O(o),s,e,[],t),Wy=(s,e,t,o)=>Cs(Zo,O(o),s,e,ms,t),Qy=(s,e,t,o)=>Cs(o0,O(o),s,e,ms,t),By=(s,e,t,o,c)=>Cs(wo+yo,O(c),e,t,[s],o),Gy=(s,e,t,o,c)=>Cs(yo,O(c),e,t,[s],o),Jy=(s,e,t)=>Cs("Start"+wu,O(t),s,e),Yy=(s,e,t)=>Cs("Will"+i0+wu,O(t),s,e),qy=(s,e,t)=>Cs("Did"+i0+wu,O(t),s,e),Ky=(s,e,t)=>Xi(s,e,t),Xy=()=>Eo(Es.Metrics),Zy=s=>Xt(s,Es.Metrics),Ua=s=>Vo(s,Es.Metrics),Iy=(s,e)=>go(s,e,Es.Metrics),Oy=s=>us(hu+Ye,Ua(s),1),D0=(s,e)=>us(hu,Ua(e),3,[s]),sV=(s,e,t,o)=>Cs(hu,Ua(o),e,t,[s]),eV=(s,e,t)=>Xi(s,e,t),tV=()=>Eo(Es.Indexes),nV=s=>Xt(s,Es.Indexes),Io=s=>Vo(s,Es.Indexes),oV=(s,e)=>go(s,e,Es.Indexes),k0=(s,e)=>us(za+Ye,Io(e),1,[s]),cV=s=>us(Ph+Ye,Io(s),1),x0=(s,e,t)=>us(za+Ut,Io(t),1,[s,e]),iV=(s,e,t,o)=>Cs(za+Ye,Io(o),e,t,[s]),rV=(s,e,t,o,c)=>Cs(za+Ut,Io(c),t,o,[s,e]),aV=(s,e,t)=>Xi(s,e,t),lV=()=>Eo(Es.Relationships),uV=s=>Xt(s,Es.Relationships),pt=s=>Vo(s,Es.Relationships),$V=(s,e)=>go(s,e,Es.Relationships),SV=s=>us(jh+Ye,pt(s),1),N0=(s,e,t)=>us(r0,pt(t),3,[s,e]),v0=(s,e,t)=>us(a0+Ut,pt(t),1,[s,e]),A0=(s,e,t)=>us(l0+Ut,pt(t),1,[s,e]),CV=(s,e,t,o,c)=>Cs(r0,pt(c),t,o,[s,e]),dV=(s,e,t,o,c)=>Cs(a0+Ut,pt(c),t,o,[s,e]),LV=(s,e,t,o,c)=>Cs(l0+Ut,pt(c),t,o,[s,e]),fV=(s,e,t)=>Xi(s,e,t),TV=()=>Eo(Es.Queries),RV=s=>Xt(s,Es.Queries),re=s=>Vo(s,Es.Queries),wV=(s,e)=>go(s,e,Es.Queries),hV=s=>us(Dh+Ye,re(s),1),yV=(s,e)=>us(Te+Re,re(e),0,[s]),VV=(s,e)=>us(Te+Re+ho,re(e),1,[s]),gV=(s,e)=>us(Te+Ma,re(e),5,[s]),M0=(s,e)=>us(Te+Ut,re(e),1,[s]),F0=(s,e,t,o=0,c,a)=>us(Te+Fa,re(a),1,[s,e,t,o,c]),EV=(s,e,t)=>us(Te+qe,re(t),0,[s,e]),_0=(s,e,t)=>us(Te+ho,re(t),1,[s,e]),z0=(s,e,t,o)=>us(Te+yt,re(o),3,[s,e,t]),bV=(s,e,t,o)=>Cs(Te+Re,re(o),e,t,[s]),PV=(s,e,t,o)=>Cs(Te+Re+ho,re(o),e,t,[s]),jV=(s,e,t,o)=>Cs(Te+Ma,re(o),e,t,[s]),DV=(s,e,t,o)=>Cs(Te+Ut,re(o),e,t,[s]),kV=(s,e,t,o,c,a,u,d)=>Cs(Te+Fa,re(d),a,u,[s,e,t,o,c]),xV=(s,e,t,o,c)=>Cs(Te+qe,re(c),t,o,[s,e]),NV=(s,e,t,o,c)=>Cs(Te+ho,re(c),t,o,[s,e]),vV=(s,e,t,o,c,a)=>Cs(Te+yt,re(a),o,c,[s,e,t]),AV=(s,e,t)=>Xi(s,e,t),MV=()=>Eo(Es.Checkpoints),FV=s=>Xt(s,Es.Checkpoints),gt=s=>Vo(s,Es.Checkpoints),_V=(s,e)=>go(s,e,Es.Checkpoints),pa=s=>us(ma+Ye,gt(s),2),m0=(s,e)=>us(ma,gt(e),3,[s]),zV=(s=fc,e=ms,t,o=fc,c=ms)=>{const a=gt(t);return Ft(u=>Lt(a,d=>{const T=s(u);o(d.addCheckpoint(T),d,T)}),[a,...e,...c])},H0=s=>w0(s,"goBackward"),U0=s=>w0(s,"goForward"),mV=(s,e=ms,t,o=fc,c=ms)=>{const a=gt(t);return Ft(u=>Lt(a,d=>Lt(s(u),T=>o(d.goTo(T),T))),[a,...e,...c])},HV=s=>{const e=gt(s),[t,o]=pa(e);return[!Nh(t),H0(e),o,Lt(o,c=>e==null?void 0:e.getCheckpoint(c))??Oe]},UV=s=>{const e=gt(s),[,,[t]]=pa(e);return[!dt(t),U0(e),t,Lt(t,o=>e==null?void 0:e.getCheckpoint(o))??Oe]},pV=(s,e,t)=>Cs(ma+Ye,gt(t),s,e),WV=(s,e,t,o)=>Cs(ma,gt(o),e,t,[s]),QV=(s,e,t=ms,o,c=ms,a,u=ms)=>{const[,d]=Rc(),[T,S]=Rc();return Tc(()=>{(async()=>{const L=s?await e(s):void 0;S(L),L&&o&&(async()=>(await o(L),d([])))()})()},[s,...t,...c]),Tc(()=>()=>{T&&(T.destroy(),a==null||a(T))},[T,...u]),T},BV=()=>Eo(Es.Persister),GV=s=>Xt(s,Es.Persister),gu=s=>Vo(s,Es.Persister),JV=(s,e)=>go(s,e,Es.Persister),YV=s=>us(_a,gu(s),5,[]),qV=(s,e,t)=>Cs(_a,gu(t),s,e,[]),KV=(s,e,t=ms,o,c=ms)=>{const[a,u]=Rc();return Tc(()=>{(async()=>{const d=s?await e(s):void 0;u(d)})()},[s,...t]),Tc(()=>()=>{a&&(a.destroy(),o==null||o(a))},[a,...c]),a},XV=()=>Eo(Es.Synchronizer),ZV=s=>Xt(s,Es.Synchronizer),Eu=s=>Vo(s,Es.Synchronizer),IV=(s,e)=>go(s,e,Es.Synchronizer),OV=s=>us(_a,Eu(s),5,[]),sg=(s,e,t)=>Cs(_a,Eu(t),s,e,[]),qn=(s,e,t,o,c)=>[t??e[s*2],{...e[s*2+1],...o,...c[s]}],p0=({tableId:s,store:e,rowComponent:t=Zi,getRowComponentProps:o,customCellIds:c,separator:a,debugIds:u},d)=>we(Ke(d,T=>y.jsx(t,{...Vt(o,T),tableId:s,rowId:T,customCellIds:c,store:e,debugIds:u},T)),a,u,s),W0=({queryId:s,queries:e,resultRowComponent:t=K0,getResultRowComponentProps:o,separator:c,debugIds:a},u)=>we(Ke(u,d=>y.jsx(t,{...Vt(o,d),queryId:s,rowId:d,queries:e,debugIds:a},d)),c,a,s),Q0=({relationshipId:s,relationships:e,rowComponent:t=Zi,getRowComponentProps:o,separator:c,debugIds:a},u,d)=>{const[T,S,L]=L0(pt(e),s),R=u(s,d,T);return we(Ke(R,w=>y.jsx(t,{...Vt(o,w),tableId:L,rowId:w,store:S,debugIds:a},w)),c,a,d)},bu=s=>({checkpoints:e,checkpointComponent:t=X0,getCheckpointComponentProps:o,separator:c,debugIds:a})=>{const u=gt(e);return we(Ke(s(pa(u)),d=>y.jsx(t,{...Vt(o,d),checkpoints:u,checkpointId:d,debugIds:a},d)),c)},eg=({store:s,storesById:e,metrics:t,metricsById:o,indexes:c,indexesById:a,relationships:u,relationshipsById:d,queries:T,queriesById:S,checkpoints:L,checkpointsById:R,persister:w,persistersById:g,synchronizer:V,synchronizersById:E,children:D})=>{const k=Ki(wc),[P,cs]=Rc(()=>xh(8,()=>({}))),Ts=Ft((Q,b,N)=>cs(m=>C0(m[Q],b)==N?m:A$(m,Q,{...m[Q],[b]:N})),[]),ts=Ft((Q,b)=>cs(N=>Mh(N[Q],b)?A$(N,Q,Fh(N[Q],b)):N),[]);return y.jsx(wc.Provider,{value:Vu(()=>[...qn(0,k,s,e,P),...qn(1,k,t,o,P),...qn(2,k,c,a,P),...qn(3,k,u,d,P),...qn(4,k,T,S,P),...qn(5,k,L,R,P),...qn(6,k,w,g,P),...qn(7,k,V,E,P),Ts,ts],[P,s,e,t,o,c,a,u,d,T,S,L,R,w,g,V,E,k,Ts,ts]),children:D})},we=(s,e,t,o)=>{const c=dt(e)||!kh(s)?s:Ke(s,(a,u)=>u>0?[e,a]:a);return t?[o,":{",c,"}"]:c},tg=(s,e,t,o)=>{const c=E0(e,t,o);return s??c},B0=({tableId:s,rowId:e,cellId:t,store:o,debugIds:c})=>we(Oe+(b0(s,e,t,o)??Oe),void 0,c,t),Zi=({tableId:s,rowId:e,store:t,cellComponent:o=B0,getCellComponentProps:c,customCellIds:a,separator:u,debugIds:d})=>we(Ke(tg(a,s,e,t),T=>y.jsx(o,{...Vt(c,T),tableId:s,rowId:e,cellId:T,store:t,debugIds:d},T)),u,d,e),G0=s=>p0(s,V0(s.tableId,s.store)),ng=({cellId:s,descending:e,offset:t,limit:o,...c})=>p0(c,g0(c.tableId,s,e,t,o,c.store)),og=({store:s,tableComponent:e=G0,getTableComponentProps:t,separator:o,debugIds:c})=>we(Ke(y0(s),a=>y.jsx(e,{...Vt(t,a),tableId:a,store:s,debugIds:c},a)),o),J0=({valueId:s,store:e,debugIds:t})=>we(Oe+(j0(s,e)??Oe),void 0,t,s),cg=({store:s,valueComponent:e=J0,getValueComponentProps:t,separator:o,debugIds:c})=>we(Ke(P0(s),a=>y.jsx(e,{...Vt(t,a),valueId:a,store:s,debugIds:c},a)),o),ig=({metricId:s,metrics:e,debugIds:t})=>we(D0(s,e)??Oe,void 0,t,s),Y0=({indexId:s,sliceId:e,indexes:t,rowComponent:o=Zi,getRowComponentProps:c,separator:a,debugIds:u})=>{const[d,T,S]=ph(Io(t),s),L=x0(s,e,d);return we(Ke(L,R=>y.jsx(o,{...Vt(c,R),tableId:S,rowId:R,store:T,debugIds:u},R)),a,u,e)},rg=({indexId:s,indexes:e,sliceComponent:t=Y0,getSliceComponentProps:o,separator:c,debugIds:a})=>we(Ke(k0(s,e),u=>y.jsx(t,{...Vt(o,u),indexId:s,sliceId:u,indexes:e,debugIds:a},u)),c,a,s),ag=({relationshipId:s,localRowId:e,relationships:t,rowComponent:o=Zi,getRowComponentProps:c,debugIds:a})=>{const[u,d,,T]=L0(pt(t),s),S=N0(s,e,u);return we(dt(T)||dt(S)?null:y.jsx(o,{...Vt(c,S),tableId:T,rowId:S,store:d,debugIds:a},S),void 0,a,e)},lg=s=>Q0(s,v0,s.remoteRowId),ug=s=>Q0(s,A0,s.firstRowId),q0=({queryId:s,rowId:e,cellId:t,queries:o,debugIds:c})=>we(Oe+(z0(s,e,t,o)??Oe),void 0,c,t),K0=({queryId:s,rowId:e,queries:t,resultCellComponent:o=q0,getResultCellComponentProps:c,separator:a,debugIds:u})=>we(Ke(_0(s,e,t),d=>y.jsx(o,{...Vt(c,d),queryId:s,rowId:e,cellId:d,queries:t,debugIds:u},d)),a,u,e),$g=s=>W0(s,M0(s.queryId,s.queries)),Sg=({cellId:s,descending:e,offset:t,limit:o,...c})=>W0(c,F0(c.queryId,s,e,t,o,c.queries)),X0=({checkpoints:s,checkpointId:e,debugIds:t})=>we(m0(e,s)??Oe,void 0,t,e),Cg=bu(s=>s[0]),dg=bu(s=>dt(s[1])?[]:[s[1]]),Lg=bu(s=>s[2]),gE=Object.freeze(Object.defineProperty({__proto__:null,BackwardCheckpointsView:Cg,CellView:B0,CheckpointView:X0,CurrentCheckpointView:dg,ForwardCheckpointsView:Lg,IndexView:rg,LinkedRowsView:ug,LocalRowsView:lg,MetricView:ig,Provider:eg,RemoteRowView:ag,ResultCellView:q0,ResultRowView:K0,ResultSortedTableView:Sg,ResultTableView:$g,RowView:Zi,SliceView:Y0,SortedTableView:ng,TableView:G0,TablesView:og,ValueView:J0,ValuesView:cg,useAddRowCallback:dy,useCell:b0,useCellIds:E0,useCellIdsListener:my,useCellListener:Uy,useCheckpoint:m0,useCheckpointIds:pa,useCheckpointIdsListener:pV,useCheckpointListener:WV,useCheckpoints:FV,useCheckpointsIds:MV,useCheckpointsOrCheckpointsById:gt,useCreateCheckpoints:AV,useCreateIndexes:eV,useCreateMergeableStore:Zh,useCreateMetrics:Ky,useCreatePersister:QV,useCreateQueries:fV,useCreateRelationships:aV,useCreateStore:Jh,useCreateSynchronizer:KV,useDelCellCallback:gy,useDelRowCallback:Vy,useDelTableCallback:yy,useDelTablesCallback:hy,useDelValueCallback:by,useDelValuesCallback:Ey,useDidFinishTransactionListener:qy,useGoBackwardCallback:H0,useGoForwardCallback:U0,useGoToCallback:mV,useHasCell:ry,useHasCellListener:Hy,useHasRow:cy,useHasRowListener:_y,useHasTable:sy,useHasTableCell:ny,useHasTableCellListener:vy,useHasTableListener:ky,useHasTables:Ih,useHasTablesListener:Py,useHasValue:uy,useHasValueListener:By,useHasValues:ay,useHasValuesListener:py,useIndexIds:cV,useIndexes:nV,useIndexesIds:tV,useIndexesOrIndexesById:Io,useLinkedRowIds:A0,useLinkedRowIdsListener:LV,useLocalRowIds:v0,useLocalRowIdsListener:dV,useMetric:D0,useMetricIds:Oy,useMetricListener:sV,useMetrics:Zy,useMetricsIds:Xy,useMetricsOrMetricsById:Ua,usePersister:GV,usePersisterIds:BV,usePersisterOrPersisterById:gu,usePersisterStatus:YV,usePersisterStatusListener:qV,useProvideCheckpoints:_V,useProvideIndexes:oV,useProvideMetrics:Iy,useProvidePersister:JV,useProvideQueries:wV,useProvideRelationships:$V,useProvideStore:Xh,useProvideSynchronizer:IV,useQueries:RV,useQueriesIds:TV,useQueriesOrQueriesById:re,useQueryIds:hV,useRedoInformation:UV,useRelationshipIds:SV,useRelationships:uV,useRelationshipsIds:lV,useRelationshipsOrRelationshipsById:pt,useRemoteRowId:N0,useRemoteRowIdListener:CV,useResultCell:z0,useResultCellIds:_0,useResultCellIdsListener:NV,useResultCellListener:vV,useResultRow:EV,useResultRowCount:gV,useResultRowCountListener:jV,useResultRowIds:M0,useResultRowIdsListener:DV,useResultRowListener:xV,useResultSortedRowIds:F0,useResultSortedRowIdsListener:kV,useResultTable:yV,useResultTableCellIds:VV,useResultTableCellIdsListener:PV,useResultTableListener:bV,useRow:iy,useRowCount:oy,useRowCountListener:Ay,useRowIds:V0,useRowIdsListener:My,useRowListener:zy,useSetCellCallback:fy,useSetCheckpointCallback:zV,useSetPartialRowCallback:Ly,useSetPartialValuesCallback:Ry,useSetRowCallback:Cy,useSetTableCallback:Sy,useSetTablesCallback:$y,useSetValueCallback:wy,useSetValuesCallback:Ty,useSliceIds:k0,useSliceIdsListener:iV,useSliceRowIds:x0,useSliceRowIdsListener:rV,useSortedRowIds:g0,useSortedRowIdsListener:Fy,useSortedRowIdsListenerImpl:h0,useStartTransactionListener:Jy,useStore:qh,useStoreIds:Yh,useStoreOrStoreById:O,useStores:Kh,useSynchronizer:ZV,useSynchronizerIds:XV,useSynchronizerOrSynchronizerById:Eu,useSynchronizerStatus:OV,useSynchronizerStatusListener:sg,useTable:ey,useTableCellIds:ty,useTableCellIdsListener:Ny,useTableIds:y0,useTableIdsListener:Dy,useTableListener:xy,useTables:Oh,useTablesListener:jy,useUndoInformation:HV,useValue:j0,useValueIds:P0,useValueIdsListener:Qy,useValueListener:Gy,useValues:ly,useValuesListener:Wy,useWillFinishTransactionListener:Yy},Symbol.toStringTag,{value:"Module"})),ro=s=>typeof s,ao="",Z0=ro(ao),fg=ro(!0),I0=ro(0),Tg=ro(ro),Rr="type",vo="default",Rg="Listener",wg="add",Ao="Has",Wa="Ids",cc="Table",_$=cc+"s",hg=cc+Wa,Or="Row",yg=Or+"Count",Vg=Or+Wa,Pr="Cell",z$=Pr+Wa,sa="Value",m$=sa+"s",gg=sa+Wa,xs=s=>ao+s,Eg=isFinite,bg=(s,e)=>s instanceof e,ps=s=>s==null,qs=(s,e,t)=>ps(s)?t==null?void 0:t():e(s),O0=s=>s==Z0||s==fg,Pg=s=>ro(s)==Z0,$l=s=>ro(s)==Tg,hc=s=>Array.isArray(s),H$=(s,e,t)=>s.slice(e,t),_t=s=>s.length,jg=(s,e)=>s.test(e),Sl=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},Dg=(s,e)=>s.includes(e),sC=(s,e)=>s.every(e),eC=(s,e)=>_t(s)===_t(e)&&sC(s,(t,o)=>e[o]===t),U$=(s,e)=>sC(s,(t,o)=>o==0||e(s[o-1],t)<=0),Hl=(s,e)=>s.sort(e),Jt=(s,e)=>s.forEach(e),mi=(s,e)=>s.map(e),kg=s=>_t(s)==0,xg=(s,e,t)=>s.reduce(e,t),ea=(s,...e)=>s.push(...e),Ng=s=>s.shift(),Ci=s=>{const e=ro(s);return O0(e)||e==I0&&Eg(s)?e:void 0},p$=(s,e,t,o,c)=>ps(c)?s.delCell(e,t,o,!0):s.setCell(e,t,o,c),W$=(s,e,t)=>ps(t)?s.delValue(e):s.setValue(e,t),Pu=s=>e=>xg(Du(e),(t,o)=>t+s(o),0),ju=s=>(s==null?void 0:s.size)??0,Qa=Pu(ju),ic=Pu(Qa),Cl=Pu(ic),Os=(s,e)=>(s==null?void 0:s.has(e))??!1,is=s=>ps(s)||ju(s)==0,Du=s=>[...(s==null?void 0:s.values())??[]],ji=s=>s.clear(),rs=(s,e)=>s==null?void 0:s.forEach(e),no=(s,e)=>s==null?void 0:s.delete(e),Po=Object,Q$=s=>Po.getPrototypeOf(s),tC=Po.entries,vg=Po.isFrozen,ta=s=>!ps(s)&&qs(Q$(s),e=>e==Po.prototype||ps(Q$(e)),()=>!0),Ag=Po.keys,nC=Po.freeze,Mg=(s=[])=>Po.fromEntries(s),Ei=(s,e)=>e in s,oC=(s,e)=>(delete s[e],s),Fg=(s,e)=>Jt(tC(s),([t,o])=>e(o,t)),_g=(s,e)=>mi(tC(s),([t,o])=>e(o,t)),On=(s,e)=>Mg(_g(s,(t,o)=>[o,e(t,o)])),zg=s=>_t(Ag(s)),Pt=s=>ta(s)&&zg(s)==0,Kn=(s,e,t,o=0)=>ps(s)||!ta(s)||!o&&Pt(s)||vg(s)?(t==null||t(),!1):(Fg(s,(c,a)=>{e(c,a)||oC(s,a)}),o?!0:!Pt(s)),J=s=>new Map(s),_o=s=>[...(s==null?void 0:s.keys())??[]],F=(s,e)=>s==null?void 0:s.get(e),We=(s,e)=>rs(s,(t,o)=>e(o,t)),mg=(s,e)=>mi([...(s==null?void 0:s.entries())??[]],([t,o])=>e(o,t)),es=(s,e,t)=>ps(t)?(no(s,e),s):s==null?void 0:s.set(e,t),ce=(s,e,t,o)=>(Os(s,e)?o==null||o(F(s,e)):es(s,e,t()),F(s,e)),Mo=(s,e,t,o=es)=>(On(e,(c,a)=>t(s,a,c)),We(s,c=>Ei(e,c)?0:o(s,c)),s),Ue=(s,e,t,o)=>{const c={};return rs(s,(a,u)=>{if(!(t!=null&&t(a,u))){const d=e?e(a,u):a;o!=null&&o(d)||(c[u]=d)}}),c},Ul=(s,e,t)=>Ue(s,o=>Ue(o,e,t),is,Pt),wr=(s,e,t)=>Ue(s,o=>Ul(o,e,t),is,Pt),to=(s,e)=>{const t=J();return rs(s,(o,c)=>t.set(c,(e==null?void 0:e(o))??o)),t},pl=s=>to(s,to),dl=s=>to(s,pl),Wl=(s,e,t,o,c=0)=>qs((t?ce:F)(s,e[c],c>_t(e)-2?t:J),a=>{if(c>_t(e)-2)return o!=null&&o(a)&&es(s,e[c]),a;const u=Wl(a,e,t,o,c+1);return is(a)&&es(s,e[c]),u}),Ze=s=>new Set(hc(s)||ps(s)?s:[s]),Qe=(s,e)=>s==null?void 0:s.add(e),Hg=(s,e,t,o,c)=>{const a=s.hasRow,u=J(),d=J(),T=J(),S=J(),L=J(),R=J(),w=()=>s,g=()=>_o(u),V=p=>We(d,p),E=p=>Os(d,p),D=p=>F(u,p),k=p=>F(d,p),P=(p,q)=>es(d,p,q),cs=(p,q,...ns)=>{const K=ce(R,p,Ze);return Jt(ns,M=>Qe(K,M)&&q&&s.callListener(M)),ns},Ts=(p,...q)=>qs(F(R,p),ns=>{Jt(kg(q)?Du(ns):q,K=>{s.delListener(K),no(ns,K)}),is(ns)&&es(R,p)}),ts=(p,q)=>{es(u,p,q),Os(d,p)||(es(d,p,e()),es(S,p,J()),es(L,p,J()),c(T))},Q=(p,q,ns,K,M)=>{ts(p,q);const ss=J(),X=J(),Z=F(S,p),G=F(L,p),Ds=B=>{const Rs=as=>s.getCell(q,B,as),hs=F(Z,B),ks=a(q,B)?t(K(Rs,B)):void 0;if(hs===ks||hc(hs)&&hc(ks)&&eC(hs,ks)||es(ss,B,[hs,ks]),!ps(M)){const as=F(G,B),Ks=a(q,B)?M(Rs,B):void 0;as!=Ks&&es(X,B,Ks)}},bs=B=>{ns(()=>{rs(ss,([,Rs],hs)=>es(Z,hs,Rs)),rs(X,(Rs,hs)=>es(G,hs,Rs))},ss,X,Z,G,B),ji(ss),ji(X)};We(Z,Ds),s.hasTable(q)&&Jt(s.getRowIds(q),B=>{Os(Z,B)||Ds(B)}),bs(!0),Ts(p),cs(p,0,s.addRowListener(q,null,(B,Rs,hs)=>Ds(hs)),s.addTableListener(q,()=>bs()))},b=p=>{es(u,p),es(d,p),es(S,p),es(L,p),Ts(p),c(T)};return[w,g,V,E,D,k,P,ts,Q,b,p=>o(p,T),()=>We(R,b),cs,Ts]},B$=(s,e)=>Pg(s)?t=>t(s):s??(()=>e??ao),Ug=(s,e)=>{const t=new WeakMap;return o=>{t.has(o)||t.set(o,s(o));const c=t.get(o);return e==null||e(c),c}},pg=/^\d+$/,cC=()=>{const s=[];let e=0;return[t=>(t?Ng(s):null)??ao+e++,t=>{jg(pg,t)&&_t(s)<1e3&&ea(s,t)}]},Wg=(s,e=[ao])=>{const t=[],o=(c,a)=>a==_t(e)?ea(t,c):e[a]===null?rs(c,u=>o(u,a+1)):Jt([e[a],null],u=>o(F(c,u),a+1));return o(s,0),t},iC=s=>{let e;const[t,o]=cC(),c=J();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return es(c,V,[S,L,R,w,g]),Qe(Wl(L,R??[ao],Ze),V),V},(S,L,...R)=>Jt(Wg(S,L),w=>rs(w,g=>F(c,g)[0](e,...L??[],...R))),S=>qs(F(c,S),([,L,R])=>(Wl(L,R??[ao],void 0,w=>(no(w,S),is(w)?1:0)),es(c,S),o(S),R)),S=>qs(F(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=_t(E);D==_t(R)?L(e,...E,...g(E)):ps(R[D])?Jt(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},rC=(s,e)=>(s??0)<(e??0)?-1:1,EE=Ug(s=>{const e=J(),t=J(),[o,c,a]=iC(()=>K),[u,d,T,S,L,R,w,,g,V,E,D]=Hg(s,J,M=>ps(M)?ao:hc(M)?mi(M,xs):xs(M),o,c),k=(M,ss)=>Os(R(M),ss),P=(M,ss,X,Z,G,Ds=rC)=>{const bs=ps(G)?void 0:([B],[Rs])=>G(B,Rs);return g(M,ss,(B,Rs,hs,ks,as,Ks)=>{let Hs=0;const Us=Ze(),A=Ze(),f=R(M);if(rs(Rs,([v,U],ws)=>{const z=Ze(v),Et=Ze(U);rs(z,oe=>no(Et,oe)?no(z,oe):0),rs(z,oe=>{Qe(Us,oe),qs(F(f,oe),Zt=>{no(Zt,ws),is(Zt)&&(es(f,oe),Hs=1)})}),rs(Et,oe=>{Qe(Us,oe),Os(f,oe)||(es(f,oe,Ze()),Hs=1),Qe(F(f,oe),ws),ps(Z)||Qe(A,oe)})}),B(),is(as)||(Ks?We(f,v=>Qe(A,v)):We(hs,v=>qs(F(ks,v),U=>Jt(hc(U)?U:[U],ws=>Qe(A,ws)))),rs(A,v=>{const U=(z,Et)=>Ds(F(as,z),F(as,Et),v),ws=[...F(f,v)];U$(ws,U)||(es(f,v,Ze(Hl(ws,U))),Qe(Us,v))})),(Hs||Ks)&&!ps(bs)){const v=[...f];U$(v,bs)||(w(M,J(Hl(v,bs))),Hs=1)}Hs&&c(e,[M]),rs(Us,v=>c(t,[M,v]))},B$(X),qs(Z,B$)),K},cs=M=>T((ss,X)=>M(ss,Z=>ts(ss,Z,X))),Ts=(M,ss)=>ts(M,ss,R(M)),ts=(M,ss,X)=>{const Z=L(M);rs(X,(G,Ds)=>ss(Ds,bs=>rs(G,B=>bs(B,Rs=>s.forEachCell(Z,B,Rs)))))},K={setIndexDefinition:P,delIndexDefinition:M=>(V(M),K),getStore:u,getIndexIds:d,forEachIndex:cs,forEachSlice:Ts,hasIndex:S,hasSlice:k,getTableId:L,getSliceIds:M=>_o(R(M)),getSliceRowIds:(M,ss)=>Du(F(R(M),ss)),addIndexIdsListener:E,addSliceIdsListener:(M,ss)=>o(ss,e,[M]),addSliceRowIdsListener:(M,ss,X)=>o(X,t,[M,ss]),delListener:M=>(a(M),K),destroy:D,getListenerStats:()=>({sliceIds:Qa(e),sliceRowIds:ic(t)})};return nC(K)}),Qg=JSON.stringify,Ll=JSON.parse,sc=s=>Qg(s,(e,t)=>bg(t,Map)?Po.fromEntries([...t]):t),hr=s=>[s,s],Js=(s,e=Qa)=>e(s[0])+e(s[1]),Ys=()=>[J(),J()],G$=s=>[...s],yr=([s,e])=>s===e,di=(s,e,t)=>es(s,e,F(s,e)==-t?void 0:t),Bg=()=>{let s,e,t=!1,o=!1,c=0,a=[];const u=J(),d=J(),T=J(),S=J(),L=J(),R=J(),w=J(),g=J(),V=J(),E=J(),D=J(),k=J(),P=J(),cs=J(),Ts=Ze(),ts=J(),Q=J(),b=J(),N=J(),m=Ys(),p=Ys(),q=Ys(),ns=Ys(),K=Ys(),M=Ys(),ss=Ys(),X=Ys(),Z=Ys(),G=Ys(),Ds=Ys(),bs=Ys(),B=Ys(),Rs=Ys(),hs=Ys(),ks=Ys(),as=Ys(),Ks=Ys(),Hs=Ys(),Us=Ys(),A=Ys(),f=Ys(),v=J(),U=Ys(),[ws,z,Et,oe]=iC(()=>Y),Zt=n=>Kn(n,i=>Kn(i,It)),jc=n=>Kn(n,It),It=n=>{if(!Kn(n,(r,l)=>Dg([Rr,vo],l)))return!1;const i=n[Rr];return!O0(i)&&i!=I0?!1:(Ci(n[vo])!=i&&oC(n,vo),!0)},Dc=hc,kc=n=>Kn(n,Ot,Fs),Ot=(n,i)=>(!s||Os(D,i)||Fs(i))&&Kn(n,(r,l)=>Ve(i,l,r),()=>Fs(i)),Ve=(n,i,r,l)=>Kn(l?r:nn(r,n,i),($,C)=>qs(sn(n,i,C,$),h=>(r[C]=h,!0),()=>!1),()=>Fs(n,i)),sn=(n,i,r,l)=>s?qs(F(F(D,n),r),$=>Ci(l)!=$[Rr]?Fs(n,i,r,l,$[vo]):l,()=>Fs(n,i,r,l)):ps(Ci(l))?Fs(n,i,r,l):l,en=(n,i)=>Kn(i?n:xc(n),(r,l)=>qs(tn(l,r),$=>(n[l]=$,!0),()=>!1),()=>le()),tn=(n,i)=>e?qs(F(P,n),r=>Ci(i)!=r[Rr]?le(n,i,r[vo]):i,()=>le(n,i)):ps(Ci(i))?le(n,i):i,nn=(n,i,r)=>(qs(F(k,i),([l,$])=>{rs(l,(C,h)=>{Ei(n,h)||(n[h]=C)}),rs($,C=>{Ei(n,C)||Fs(i,r,C)})}),n),xc=n=>(e&&(rs(cs,(i,r)=>{Ei(n,r)||(n[r]=i)}),rs(Ts,i=>{Ei(n,i)||le(i)})),n),on=n=>Mo(D,n,(i,r,l)=>{const $=J(),C=Ze();Mo(ce(D,r,J),l,(h,j,x)=>{es(h,j,x),qs(x[vo],os=>es($,j,os),()=>Qe(C,j))}),es(k,r,[$,C])},(i,r)=>{es(D,r),es(k,r)}),cn=n=>Mo(P,n,(i,r,l)=>{es(P,r,l),qs(l[vo],$=>es(cs,r,$),()=>Qe(Ts,r))},(i,r)=>{es(P,r),es(cs,r),no(Ts,r)}),rn=n=>Pt(n)?Me():ve(n),Nc=([n,i])=>{(Pt(n)?Me:ve)(n),(Pt(i)?Fe:Ae)(i)},an=n=>Mo(b,n,(i,r,l)=>ge(r,l),(i,r)=>Sn(r)),ge=(n,i)=>Mo(ce(b,n,()=>(fn(n,1),es(ts,n,cC()),es(Q,n,J()),J())),i,(r,l,$)=>ae(n,r,l,$),(r,l)=>Cn(n,r,l)),ae=(n,i,r,l,$)=>Mo(ce(i,r,()=>(Tn(n,r,1),J())),l,(C,h,j)=>et(n,r,C,h,j),(C,h)=>dn(n,i,r,C,h,$)),et=(n,i,r,l,$)=>{Os(r,l)||Rn(n,i,l,1);const C=F(r,l);$!==C&&(wn(n,i,l,C,$),es(r,l,$))},ln=(n,i,r,l,$)=>qs(F(i,r),C=>et(n,r,C,l,$),()=>ae(n,i,r,nn({[l]:$},n,r))),un=n=>Pt(n)?Fe():Ae(n),$n=n=>Mo(N,n,(i,r,l)=>Ee(r,l),(i,r)=>Ln(r)),Ee=(n,i)=>{Os(N,n)||hn(n,1);const r=F(N,n);i!==r&&(yn(n,r,i),es(N,n,i))},vc=(n,i)=>{const[r]=F(ts,n);let l;do l=r(i);while(Os(F(b,n),l));return l},be=n=>F(b,n)??ge(n,{}),Sn=n=>ge(n,{}),Cn=(n,i,r)=>{const[,l]=F(ts,n);l(r),ae(n,i,r,{},!0)},dn=(n,i,r,l,$,C)=>{var x;const h=F((x=F(k,n))==null?void 0:x[0],$);if(!ps(h)&&!C)return et(n,r,l,$,h);const j=os=>{wn(n,r,os,F(l,os)),Rn(n,r,os,-1),es(l,os)};ps(h)?j($):We(l,j),is(l)&&(Tn(n,r,-1),is(es(i,r))&&(fn(n,-1),es(b,n),es(ts,n),es(Q,n)))},Ln=n=>{const i=F(cs,n);if(!ps(i))return Ee(n,i);yn(n,F(N,n)),hn(n,-1),es(N,n)},fn=(n,i)=>di(u,n,i),Tn=(n,i,r)=>di(ce(S,n,J),i,r)&&es(T,n,ce(T,n,()=>0)+r),Rn=(n,i,r,l)=>{const $=F(Q,n),C=F($,r)??0;(C==0&&l==1||C==1&&l==-1)&&di(ce(d,n,J),r,l),es($,r,C!=-l?C+l:null),di(ce(ce(L,n,J),i,J),r,l)},wn=(n,i,r,l,$)=>{var C;ce(ce(ce(R,n,J),i,J),r,()=>[l,0])[1]=$,(C=a[3])==null||C.call(a,n,i,r,$)},hn=(n,i)=>di(w,n,i),yn=(n,i,r)=>{var l;ce(g,n,()=>[i,0])[1]=r,(l=a[4])==null||l.call(a,n,r)},Fs=(n,i,r,l,$)=>(ea(ce(ce(ce(V,n,J),i,J),r,()=>[]),l),$),le=(n,i,r)=>(ea(ce(E,n,()=>[]),i),r),Pe=(n,i,r)=>qs(F(F(F(R,n),i),r),([l,$])=>[!0,l,$],()=>[!1,...hr(De(n,i,r))]),Vn=n=>qs(F(g,n),([i,r])=>[!0,i,r],()=>[!1,...hr(ke(n))]),gn=n=>!is(V)&&!is(ks[n])?rs(n?dl(V):V,(i,r)=>rs(i,(l,$)=>rs(l,(C,h)=>z(ks[n],[r,$,h],C)))):0,En=n=>!is(E)&&!is(as[n])?rs(n?to(E):E,(i,r)=>z(as[n],[r],i)):0,ue=(n,i,r,l)=>{if(!is(n))return z(i,l,()=>Ue(n)),We(n,($,C)=>z(r,[...l??[],$],C==1)),1},bn=n=>{const i=xe();i!=t&&z(m[n],void 0,i);const r=is(G[n]),l=is(B[n])&&is(Rs[n])&&is(Z[n])&&is(Ds[n])&&is(M[n])&&is(ss[n])&&is(X[n])&&r&&is(q[n])&&is(ns[n]),$=is(hs[n])&&is(bs[n])&&is(K[n])&&is(p[n]);if(!l||!$){const C=n?[to(u),pl(d),to(T),pl(S),dl(L),dl(R)]:[u,d,T,S,L,R];if(!l){ue(C[0],q[n],ns[n]),rs(C[1],(j,x)=>ue(j,M[n],ss[n],[x])),rs(C[2],(j,x)=>{j!=0&&z(X[n],[x],kn(x))});const h=Ze();rs(C[3],(j,x)=>{ue(j,Z[n],Ds[n],[x])&&!r&&(z(G[n],[x,null]),Qe(h,x))}),r||rs(C[5],(j,x)=>{if(!Os(h,x)){const os=Ze();rs(j,_s=>rs(_s,([_e,ze],$e)=>ze!==_e?Qe(os,$e):no(_s,$e))),rs(os,_s=>z(G[n],[x,_s]))}}),rs(C[4],(j,x)=>rs(j,(os,_s)=>ue(os,B[n],Rs[n],[x,_s])))}if(!$){let h;rs(C[5],(j,x)=>{let os;rs(j,(_s,_e)=>{let ze;rs(_s,([$e,Qn],ci)=>{Qn!==$e&&(z(hs[n],[x,_e,ci],Qn,$e,Pe),h=os=ze=1)}),ze&&z(bs[n],[x,_e],Pe)}),os&&z(K[n],[x],Pe)}),h&&z(p[n],void 0,Pe)}}},Pn=n=>{const i=Ne();i!=o&&z(Ks[n],void 0,i);const r=is(Us[n])&&is(A[n]),l=is(f[n])&&is(Hs[n]);if(!r||!l){const $=n?[to(w),to(g)]:[w,g];if(r||ue($[0],Us[n],A[n]),!l){let C;rs($[1],([h,j],x)=>{j!==h&&(z(f[n],[x],j,h,Vn),C=1)}),C&&z(Hs[n],void 0,Vn)}}},_=(n,...i)=>(rt(()=>n(...mi(i,xs))),Y),jn=(n,i,r,l,$)=>{let C=je(n,i,...r);return ws(()=>{const h=je(n,i,...r);eC(h,C)||(C=h,l(Y,n,i,...r,C))},G[$?1:0],[n,i],[$s])},Ac=()=>[tt(),ot()],tt=()=>wr(b),$s=()=>_o(b),Mc=n=>Ul(F(b,xs(n))),Dn=n=>_o(F(Q,xs(n))),kn=n=>ju(F(b,xs(n))),Is=n=>_o(F(b,xs(n))),je=(n,i,r,l=0,$)=>ta(n)?je(n.tableId,n.cellId,n.descending,n.offset,n.limit):mi(H$(Hl(mg(F(b,xs(n)),(C,h)=>[ps(i)?h:F(C,xs(i)),h]),([C],[h])=>rC(C,h)*(r?-1:1)),l,ps($)?$:l+$),([,C])=>C),Fc=(n,i)=>Ue(F(F(b,xs(n)),xs(i))),nt=(n,i)=>_o(F(F(b,xs(n)),xs(i))),De=(n,i,r)=>F(F(F(b,xs(n)),xs(i)),xs(r)),ot=()=>Ue(N),ct=()=>_o(N),ke=n=>F(N,xs(n)),xe=()=>!is(b),xn=n=>Os(b,xs(n)),Nn=(n,i)=>Os(F(Q,xs(n)),xs(i)),vn=(n,i)=>Os(F(b,xs(n)),xs(i)),An=(n,i,r)=>Os(F(F(b,xs(n)),xs(i)),xs(r)),Ne=()=>!is(N),Mn=n=>Os(N,xs(n)),_c=()=>sc(b),zc=()=>sc(N),mc=()=>sc([b,N]),Hc=()=>sc(D),Uc=()=>sc(P),pc=()=>sc([D,P]),Wc=n=>_(()=>{const i=$l(n)?n():n;Dc(i)&&Nc(i)}),ve=n=>_(()=>kc(n)?an(n):0),Qc=(n,i)=>_(r=>Ot(i,r)?ge(r,i):0,n),Bc=(n,i,r)=>_((l,$)=>Ve(l,$,r)?ae(l,be(l),$,r):0,n,i),Gc=(n,i,r=!0)=>rt(()=>{let l;return Ve(n,l,i)&&(n=xs(n),ae(n,be(n),l=vc(n,r?1:0),i)),l}),Jc=(n,i,r)=>_((l,$)=>{if(Ve(l,$,r,1)){const C=be(l);On(r,(h,j)=>ln(l,C,$,j,h))}},n,i),Yc=(n,i,r,l)=>_(($,C,h)=>qs(sn($,C,h,$l(l)?l(De($,C,h)):l),j=>ln($,be($),C,h,j)),n,i,r),Ae=n=>_(()=>en(n)?$n(n):0),qc=n=>_(()=>en(n,1)?On(n,(i,r)=>Ee(r,i)):0),Kc=(n,i)=>_(r=>qs(tn(r,$l(i)?i(ke(r)):i),l=>Ee(r,l)),n),Xc=n=>_(()=>{On(n[0],(i,r)=>ps(i)?mn(r):On(i,(l,$)=>ps(l)?Hn(r,$):On(l,(C,h)=>p$(Y,r,$,h,C)))),On(n[1],(i,r)=>W$(Y,r,i))}),Fn=n=>(Sl(()=>rn(Ll(n))),Y),Zc=n=>(Sl(()=>un(Ll(n))),Y),Ic=n=>_(()=>Sl(()=>{const[i,r]=Ll(n);rn(i),un(r)},()=>Fn(n))),_n=n=>_(()=>{if((s=Zt(n))&&(on(n),!is(b))){const i=tt();Me(),ve(i)}}),zn=n=>_(()=>{if(e=jc(n)){const i=ot();it(),Fe(),e=!0,cn(n),Ae(i)}}),Oc=(n,i)=>_(()=>{_n(n),zn(i)}),Me=()=>_(()=>an({})),mn=n=>_(i=>Os(b,i)?Sn(i):0,n),Hn=(n,i)=>_((r,l)=>qs(F(b,r),$=>Os($,l)?Cn(r,$,l):0),n,i),si=(n,i,r,l)=>_(($,C,h)=>qs(F(b,$),j=>qs(F(j,C),x=>Os(x,h)?dn($,j,C,x,h,l):0)),n,i,r),Fe=()=>_(()=>$n({})),ei=n=>_(i=>Os(N,i)?Ln(i):0,n),Un=()=>_(()=>{on({}),s=!1}),it=()=>_(()=>{cn({}),e=!1}),ti=()=>_(()=>{Un(),it()}),rt=(n,i)=>{if(c!=-1){pn();const r=n();return Wn(i),r}},pn=()=>{var n;return c!=-1&&c++,c==1&&((n=a[0])==null||n.call(a),z(v)),Y},ni=()=>[Ue(R,(n,i)=>F(u,i)===-1?void 0:Ue(n,(r,l)=>F(F(S,i),l)===-1?void 0:Ue(r,([,$])=>$,$=>yr($)),is,Pt),is,Pt),Ue(g,([,n])=>n,n=>yr(n)),1],oi=()=>[!is(R),!is(g),wr(R,G$,yr),wr(V),Ue(g,G$,yr),Ue(E),Ue(u),Ul(S),wr(L),Ue(w)],Wn=n=>{var i,r;return c>0&&(c--,c==0&&(c=1,gn(1),is(R)||bn(1),En(1),is(g)||Pn(1),n!=null&&n(Y)&&(rs(R,(l,$)=>rs(l,(C,h)=>rs(C,([j],x)=>p$(Y,$,h,x,j)))),ji(R),rs(g,([l],$)=>W$(Y,$,l)),ji(g)),z(U[0],void 0),c=-1,gn(0),is(R)||bn(0),En(0),is(g)||Pn(0),(i=a[1])==null||i.call(a),z(U[1],void 0),(r=a[2])==null||r.call(a),c=0,t=xe(),o=Ne(),Jt([u,d,T,S,L,R,V,w,g,E],ji))),Y},Y={getContent:Ac,getTables:tt,getTableIds:$s,getTable:Mc,getTableCellIds:Dn,getRowCount:kn,getRowIds:Is,getSortedRowIds:je,getRow:Fc,getCellIds:nt,getCell:De,getValues:ot,getValueIds:ct,getValue:ke,hasTables:xe,hasTable:xn,hasTableCell:Nn,hasRow:vn,hasCell:An,hasValues:Ne,hasValue:Mn,getTablesJson:_c,getValuesJson:zc,getJson:mc,getTablesSchemaJson:Hc,getValuesSchemaJson:Uc,getSchemaJson:pc,hasTablesSchema:()=>s,hasValuesSchema:()=>e,setContent:Wc,setTables:ve,setTable:Qc,setRow:Bc,addRow:Gc,setPartialRow:Jc,setCell:Yc,setValues:Ae,setPartialValues:qc,setValue:Kc,applyChanges:Xc,setTablesJson:Fn,setValuesJson:Zc,setJson:Ic,setTablesSchema:_n,setValuesSchema:zn,setSchema:Oc,delTables:Me,delTable:mn,delRow:Hn,delCell:si,delValues:Fe,delValue:ei,delTablesSchema:Un,delValuesSchema:it,delSchema:ti,transaction:rt,startTransaction:pn,getTransactionChanges:ni,getTransactionLog:oi,finishTransaction:Wn,forEachTable:n=>rs(b,(i,r)=>n(r,l=>rs(i,($,C)=>l(C,h=>We($,h))))),forEachTableCell:(n,i)=>We(F(Q,xs(n)),i),forEachRow:(n,i)=>rs(F(b,xs(n)),(r,l)=>i(l,$=>We(r,$))),forEachCell:(n,i,r)=>We(F(F(b,xs(n)),xs(i)),r),forEachValue:n=>We(N,n),addSortedRowIdsListener:(n,i,r,l,$,C,h)=>ta(n)?jn(n.tableId,n.cellId,[n.descending??!1,n.offset??0,n.limit],i,r):jn(n,i,[r,l,$],C,h),addStartTransactionListener:n=>ws(n,v),addWillFinishTransactionListener:n=>ws(n,U[0]),addDidFinishTransactionListener:n=>ws(n,U[1]),callListener:n=>(oe(n),Y),delListener:n=>(Et(n),Y),getListenerStats:()=>({hasTables:Js(m),tables:Js(p),tableIds:Js(q),hasTable:Js(ns),table:Js(K),tableCellIds:Js(M),hasTableCell:Js(ss,ic),rowCount:Js(X),rowIds:Js(Z),sortedRowIds:Js(G),hasRow:Js(Ds,ic),row:Js(bs,ic),cellIds:Js(B,ic),hasCell:Js(Rs,Cl),cell:Js(hs,Cl),invalidCell:Js(ks,Cl),hasValues:Js(Ks),values:Js(Hs),valueIds:Js(Us),hasValue:Js(A),value:Js(f),invalidValue:Js(as),transaction:Qa(v)+Js(U)}),isMergeable:()=>!1,createStore:Bg,addListener:ws,callListeners:z,setInternalListeners:(n,i,r,l,$)=>a=[n,i,r,l,$]};return On({[Ao+_$]:[0,m,[],()=>[xe()]],[_$]:[0,p],[hg]:[0,q],[Ao+cc]:[1,ns,[$s],n=>[xn(...n)]],[cc]:[1,K,[$s]],[cc+z$]:[1,M,[$s]],[Ao+cc+Pr]:[2,ss,[$s,Dn],n=>[Nn(...n)]],[yg]:[1,X,[$s]],[Vg]:[1,Z,[$s]],[Ao+Or]:[2,Ds,[$s,Is],n=>[vn(...n)]],[Or]:[2,bs,[$s,Is]],[z$]:[2,B,[$s,Is]],[Ao+Pr]:[3,Rs,[$s,Is,nt],n=>[An(...n)]],[Pr]:[3,hs,[$s,Is,nt],n=>hr(De(...n))],InvalidCell:[3,ks],[Ao+m$]:[0,Ks,[],()=>[Ne()]],[m$]:[0,Hs],[gg]:[0,Us],[Ao+sa]:[1,A,[ct],n=>[Mn(...n)]],[sa]:[1,f,[ct],n=>hr(ke(n[0]))],InvalidValue:[1,as]},([n,i,r,l],$)=>{Y[wg+$+Rg]=(...C)=>ws(C[n],i[C[n+1]?1:0],n>0?H$(C,0,n):void 0,r,l)}),nC(Y)},na="",vt=s=>s==null,oa=(s,e,t)=>vt(s)?t==null?void 0:t():e(s),Ql=s=>Array.isArray(s),Yo=s=>s.length,Gg=(s,e)=>s.test(e),aC=s=>{throw new Error(s)},Li=async(s,e,t)=>{try{return await s()}catch(o){e==null||e(o)}},Bl=(s,e)=>s.forEach(e),Jg=(s,e)=>s.splice(0,e),ku=(s,...e)=>s.push(...e),lC=s=>s.shift(),Yg=s=>(s==null?void 0:s.size)??0,qg=(s,e)=>(s==null?void 0:s.has(e))??!1,uC=s=>vt(s)||Yg(s)==0,$C=(s,e)=>s==null?void 0:s.forEach(e),SC=(s,e)=>s==null?void 0:s.delete(e),Ba=Object,J$=s=>Ba.getPrototypeOf(s),Kg=s=>!vt(s)&&oa(J$(s),e=>e==Ba.prototype||vt(J$(e)),()=>!0),Xg=Ba.keys,Zg=Ba.freeze,Ig=s=>Yo(Xg(s)),Vr=s=>Kg(s)&&Ig(s)==0,Ii=s=>new Map(s),$t=(s,e)=>s==null?void 0:s.get(e),qo=(s,e,t)=>vt(t)?(SC(s,e),s):s==null?void 0:s.set(e,t),Gl=(s,e,t,o)=>(qg(s,e)?o==null||o($t(s,e)):qo(s,e,t()),$t(s,e)),Jl=(s,e,t,o,c=0)=>oa((t?Gl:$t)(s,e[c],c>Yo(e)-2?t:Ii),a=>{if(c>Yo(e)-2)return o!=null&&o(a)&&qo(s,e[c]),a;const u=Jl(a,e,t,o,c+1);return uC(a)&&qo(s,e[c]),u}),Og=/^\d+$/,sE=()=>{const s=[];let e=0;return[t=>(t?lC(s):null)??na+e++,t=>{Gg(Og,t)&&Yo(s)<1e3&&ku(s,t)}]},eE=s=>new Set(Ql(s)||vt(s)?s:[s]),tE=(s,e)=>s==null?void 0:s.add(e),nE=(s,e=[na])=>{const t=[],o=(c,a)=>a==Yo(e)?ku(t,c):e[a]===null?$C(c,u=>o(u,a+1)):Bl([e[a],null],u=>o($t(c,u),a+1));return o(s,0),t},oE=s=>{let e;const[t,o]=sE(),c=Ii();return[(S,L,R,w=[],g=()=>[])=>{e??(e=s());const V=t(1);return qo(c,V,[S,L,R,w,g]),tE(Jl(L,R??[na],eE),V),V},(S,L,...R)=>Bl(nE(S,L),w=>$C(w,g=>$t(c,g)[0](e,...L??[],...R))),S=>oa($t(c,S),([,L,R])=>(Jl(L,R??[na],void 0,w=>(SC(w,S),uC(w)?1:0)),qo(c,S),o(S),R)),S=>oa($t(c,S),([L,,R=[],w,g])=>{const V=(...E)=>{var k;const D=Yo(E);D==Yo(R)?L(e,...E,...g(E)):vt(R[D])?Bl(((k=w[D])==null?void 0:k.call(w,...E))??[],P=>V(...E,P)):V(...E,R[D])};V()})]},gr=Ii(),Er=Ii(),cE=(s=1,e,t)=>s!=1&&e.isMergeable()?[1,e.getMergeableContent,()=>e.getTransactionMergeableChanges(!t),([[o],[c]])=>!Vr(o)||!Vr(c),e.setDefaultContent]:s!=2?[0,e.getContent,e.getTransactionChanges,([o,c])=>!Vr(o)||!Vr(c),e.setContent]:aC("Store type not supported by this Persister"),bE=(s,e,t,o,c,a,u,d={},T=0,S=[])=>{let L=0,R=0,w=0,g,V,E;Gl(gr,S,()=>0),Gl(Er,S,()=>[]);const D=Ii(),[k,P,cs,Ts,ts]=cE(u,s,T),[Q,b,N]=oE(()=>A),m=f=>{f!=L&&(L=f,b(D,void 0,L))},p=async()=>{if(!$t(gr,S)){for(qo(gr,S,1);!vt(g=lC($t(Er,S)));)await Li(g,a);qo(gr,S,0)}},q=f=>{(k&&Ql(f==null?void 0:f[0])?(f==null?void 0:f[2])===1?s.applyMergeableChanges:s.setMergeableContent:(f==null?void 0:f[2])===1?s.applyChanges:s.setContent)(f)},ns=async f=>(L!=2&&(m(1),R++,await as(async()=>{await Li(async()=>{const v=await e();Ql(v)?q(v):f?ts(f):aC(`Content is not an array: ${v}`)},()=>{f&&ts(f)}),m(0)})),A),K=async f=>(M(),await ns(f),await Li(async()=>V=await o(async(v,U)=>{U||v?L!=2&&(m(1),R++,q(U??v),m(0)):await ns()}),a),A),M=async()=>(V&&(await Li(()=>c(V),a),V=void 0),A),ss=()=>!vt(V),X=async f=>(L!=1&&(m(2),w++,await as(async()=>{await Li(()=>t(P,f),a),m(0)})),A),Z=async()=>(G(),await X(),E=s.addDidFinishTransactionListener(()=>{const f=cs();Ts(f)&&X(f)}),A),G=async()=>(E&&(s.delListener(E),E=void 0),A),Ds=()=>!vt(E),bs=async(f,v=!1)=>{const[U,ws]=v?[Z,K]:[K,Z];return await U(f),await ws(f),A},B=async(f=!1)=>{const[v,U]=f?[G,M]:[M,G];return await v(),await U(),A},Rs=()=>L,hs=f=>Q(f,D),ks=f=>(N(f),s),as=async(...f)=>(ku($t(Er,S),...f),await p(),A),A={load:ns,startAutoLoad:K,stopAutoLoad:M,isAutoLoading:ss,save:X,startAutoSave:Z,stopAutoSave:G,isAutoSaving:Ds,startAutoPersisting:bs,stopAutoPersisting:B,getStatus:Rs,addStatusListener:hs,delListener:ks,schedule:as,getStore:()=>s,destroy:()=>(Jg($t(Er,S)),B()),getStats:()=>({loads:R,saves:w}),...d};return Zg(A)};export{LE as I,uE as P,TE as U,RE as a,hE as b,Mw as c,wE as d,gE as e,Bg as f,bE as g,yE as h,EE as i};
