import{r as R,j as o,R as Cs,c as js}from"./react-CGTsdO7U.js";import{U as se,c as ne,b as Ss,a as he,e as Ts,P as Is,I as bs}from"./tinybase-BNNkH_WZ.js";import{I as ws,B as ee,T as H,C as V,H as G,S as Nt,a as Te,R as qe,D as _s,M as Me,b as $t,c as Es,A as As}from"./tinywidgets-BegHVc30.js";import{O as Ls}from"./octokit-B0_jzZ8m.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const Ps="tinytick",Fe=globalThis,te=e=>e==null,Mt=(e,t,s)=>te(e)?s==null?void 0:s():t(e),jt=e=>e.length,De=Ps+"_uirc",Ft=Fe[De]?Fe[De]:Fe[De]=R.createContext([]),Ns=({manager:e,children:t})=>o.jsx(Ft.Provider,{value:R.useMemo(()=>[e],[e]),children:t}),$s=(e,t)=>e.every(t),Ms=(e,t)=>!te(e)&&!te(t)&&jt(e)===jt(t)&&$s(e,(s,n)=>t[n]===s),Dt=Object,St=e=>Dt.getPrototypeOf(e),Fs=e=>!te(e)&&Mt(St(e),t=>t==Dt.prototype||te(St(t)),()=>!0),ue=[],Tt=[[],0,!1],Ds=[Ms],Hs=(e,t)=>e===t,Ht=(e,t,s=ue)=>{const n=Ie(),r=R.useRef(Tt[t]),a=R.useCallback(()=>{var g;const h=te(n)?void 0:((g=n["get"+e])==null?void 0:g.call(n,...s.filter(y=>y!==null)))??Tt[t];return(Ds[t]??Hs)(h,r.current)?r.current:r.current=h},[n,t,e,...s]),i=R.useCallback(h=>Us(n,e,...s,h),[n,t,e,...s]);return R.useSyncExternalStore(i,a,a)},Us=(e,t,...s)=>{var r;const n=(r=e==null?void 0:e["add"+t+"Listener"])==null?void 0:r.call(e,...s);return()=>{var a;return(a=e==null?void 0:e.delListener)==null?void 0:a.call(e,n)}},Os=(e,t,s=ue)=>{const n=Ie();R.useLayoutEffect(()=>Mt(n==null?void 0:n.scheduleTaskRun(...e,t),r=>()=>{n==null||n.delTaskRun(r)}),[n,...e,...s])},Vs=(e,t=ue)=>R.useMemo(e,t),Ie=()=>R.useContext(Ft)[0],zs=()=>Ht("ScheduledTaskRunIds",0),Ut=()=>Ht("RunningTaskRunIds",0),E=(e,t,s=ue,n,r,a=ue)=>{const i=Ie();R.useLayoutEffect(()=>(i==null||i.setTask(e,t,n,r),()=>{i==null||i.delTask(e)}),[i,e,...s,n,...a])},be=(e,t,s,n,r)=>Os(...Fs(e)?[[e.taskId,e.arg,e.startAfter],e.config,t]:[[e,t,s],n,r]),Gs=100,qs=/<([^>]+)>/,O=100,z=new Ls({auth:localStorage.getItem("token")}),A=()=>localStorage.getItem("token")!=null,Be=e=>{var s;const t=(s=e.headers)==null?void 0:s.link;if(t){const n=t.split(",").find(r=>r.endsWith('rel="next"'));if(n){const[,r]=n.match(qs)??[];if(r){const a=new URL(r).searchParams.get("page");if(a)return a}}}},ie=e=>{const t=parseInt(e??"");return{per_page:Gs,...isNaN(t)?{}:{page:t}}},tt="view",Bs={repoId:{type:"string",default:""},issueId:{type:"string",default:""}},{useCreateStore:Ys,useProvideStore:Ks,useCreatePersister:Ws,useValue:Xs,useSetValueCallback:Js}=se,U=e=>Xs(e,tt),we=(e,t,s)=>Js(e,t,s,tt),Zs=()=>{const e=Ys(()=>ne().setValuesSchema(Bs));return Ws(e,t=>Ss(t,async()=>{const[s,n,r]=location.hash.slice(1).split("/");return[{},{repoId:s&&n?s+"/"+n:"",issueId:r}]},async s=>{const{repoId:n,issueId:r}=s()[1];location.hash=n+"/"+r},s=>{const n=()=>s();return window.addEventListener("hashchange",n),n},s=>window.removeEventListener("hashchange",s)),[],async t=>{await t.startAutoLoad(),await t.startAutoSave()}),Ks(tt,e),null},Qs=1e3*60*10,ve="issues",F="issues",en={issues:{title:{type:"string",default:""},pullRequest:{type:"boolean",default:!1},bodyHtml:{type:"string",default:""},createdAt:{type:"string",default:""},updatedAt:{type:"string",default:""},stale:{type:"boolean",default:!1}}},{useCreateStore:tn,useProvideStore:sn,useCreatePersister:nn,useCell:on,useSortedRowIds:rn}=se,D=(e,t)=>on(F,e,t,ve),an=(e,t)=>rn(F,e,t,void 0,void 0,ve),cn=()=>{const e=U("repoId"),t=tn(()=>ne().setTablesSchema(en),[e]);return sn(ve,t),nn(t,s=>{if(e)return he(s,e+"/"+ve)},[e],async s=>s==null?void 0:s.startAutoPersisting(),[]),ln(t,e),null},ln=(e,t)=>{E("fetchIssues "+t,async(s="1",n,{manager:r,taskId:a})=>{if(A()&&t){const[i,h]=t.split("/"),g=await z.rest.issues.listForRepo({owner:i,repo:h,mediaType:{format:"html"},...ie(s),request:{signal:n}});g.data.forEach(({number:m,title:x,pull_request:j,body_html:re,created_at:_,updated_at:B})=>e.setRow(F,m+"",{title:x,pullRequest:j!=null,bodyHtml:re??"",createdAt:_,updatedAt:B}));const y=Be(g);y&&await r.untilTaskRunDone(r.scheduleTaskRun(a,y,O))}},[e,t],"multiFetch"),E("fetchAllIssues "+t,async(s,n,{manager:r})=>{e.forEachRow(F,(a,i)=>e.setCell(F,a,"stale",!0)),A()&&t&&(await r.untilTaskRunDone(r.scheduleTaskRun("fetchIssues "+t)),e.forEachRow(F,(a,i)=>{e.getCell(F,a,"stale")&&e.delRow(F,a)}))},[e,t],"multiFetch",{repeatDelay:Qs}),be("fetchAllIssues "+t)},Ye="repo",un={id:{type:"string",default:""},owner:{type:"string",default:""},avatarUrl:{type:"string",default:""},name:{type:"string",default:""},archived:{type:"boolean",default:!1},createdAt:{type:"string",default:""},description:{type:"string",default:""},disabled:{type:"boolean",default:!1},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},homepage:{type:"string",default:""},githubUrl:{type:"string",default:""},language:{type:"string",default:""},license:{type:"string",default:""},openIssuesCount:{type:"number",default:0},size:{type:"number",default:0},stargazersCount:{type:"number",default:0},topics:{type:"string",default:""},updatedAt:{type:"string",default:""},visibility:{type:"string",default:""}},{useCreateStore:dn,useProvideStore:hn,useCreatePersister:pn,useValue:fn}=se,k=e=>fn(e,Ye),gn=()=>{const e=U("repoId"),t=dn(()=>ne().setValuesSchema(un),[e]);return hn(Ye,t),pn(t,s=>{if(e)return he(s,e+"/"+Ye)},[e],s=>s==null?void 0:s.startAutoPersisting(),[]),yn(t,e),null},yn=(e,t)=>{E("fetchRepo",async(s="")=>{if(A()&&s){const[n,r]=s.split("/"),{owner:a,name:i,archived:h,created_at:g,description:y,disabled:m,fork:x,forks_count:j,homepage:re,html_url:_,language:B,license:Y,open_issues_count:pe,size:ae,stargazers_count:ce,topics:K,updated_at:fe,visibility:W}=(await z.rest.repos.get({owner:n,repo:r})).data;e.setValues({id:a.login+"/"+i,owner:a.login,avatarUrl:a.avatar_url,name:i,archived:h??!1,createdAt:g??"",description:y??"",disabled:m??!1,fork:x,forksCount:j??0,githubUrl:_??"",homepage:re??"",language:B??"",license:(Y==null?void 0:Y.name)??"",openIssuesCount:pe??0,size:ae??0,stargazersCount:ce??0,topics:(K==null?void 0:K.join(", "))??"",updatedAt:fe??"",visibility:W??""})}},[e],"singleFetch"),be("fetchRepo",t)},Ce="settings",xn={reposSortCell:{type:"string",default:"stars"},issuesSortCell:{type:"string",default:"updatedAt"}},{useCreateStore:mn,useProvideStore:Rn,useCreatePersister:kn,useValue:vn,useSetValueCallback:Cn}=se,_e=e=>vn(e,Ce),Ot=(e,t,s)=>Cn(e,t,s,Ce),jn=()=>{const e=mn(()=>ne().setValuesSchema(xn));return kn(e,t=>he(t,Ce),[],t=>t.startAutoPersisting()),Rn(Ce,e),null},Sn=1e3*60*60,Ke="repos",w="repos",st="repos",nt="reposByGroup",Tn={repos:{owner:{type:"string",default:""},name:{type:"string",default:""},starred:{type:"boolean",default:!1},createdAt:{type:"string",default:""},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},openIssuesCount:{type:"number",default:0},stargazersCount:{type:"number",default:0},updatedAt:{type:"string",default:""},stale:{type:"boolean",default:!1}}},{useCell:In,useCreatePersister:bn,useCreateStore:wn,useProvideStore:_n,useCreateIndexes:En,useProvideIndexes:An,useSliceRowIds:Ln,useSliceIds:Pn}=se,xe=(e,t)=>In(w,e,t,Ke),Nn=()=>Pn(nt,st),$n=e=>Ln(nt,e,st),Mn=()=>{const e=wn(()=>ne().setTablesSchema(Tn));_n(Ke,e);const t=_e("reposSortCell"),s=t=="name"||t=="fork"?1:-1,n=En(e,r=>Ts(r).setIndexDefinition(nt,w,a=>a("starred")?"Starred":a("owner"),t,(a,i)=>a=="Starred"?-1:i=="Starred"||a>i?1:-1,(a,i)=>(a>i?1:-1)*s),[t]);return An(st,n),bn(e,r=>he(r,Ke),[],r=>r.startAutoPersisting()),Fn(e),null},Fn=e=>{const t=R.useCallback(({full_name:n,owner:r,name:a,created_at:i,fork:h,forks_count:g,open_issues_count:y,stargazers_count:m,updated_at:x},j=!1)=>{(j||e.getCell(w,n,"stale"))&&e.setCell(w,n,"starred",j),e.setPartialRow(w,n,{owner:r.login,name:a,createdAt:i??"",fork:h,forksCount:g??0,openIssuesCount:y??0,stargazersCount:m??0,updatedAt:x??"",stale:!1})},[e]),s=R.useCallback(async(n,r)=>{const a=await n;return a.data.forEach(i=>t(i,r)),Be(a)},[t]);E("fetchReposStarred",async(n="1",r,{manager:a,taskId:i})=>{if(A()){const h=await s(z.rest.activity.listReposStarredByAuthenticatedUser({...ie(n),request:{signal:r}}),!0);h&&await a.untilTaskRunDone(a.scheduleTaskRun(i,h,O))}},[s],"multiFetch"),E("fetchReposOwned",async(n="1",r,{manager:a,taskId:i})=>{if(A()){const h=await s(z.rest.repos.listForAuthenticatedUser({...ie(n),request:{signal:r}}));h&&await a.untilTaskRunDone(a.scheduleTaskRun(i,h,O))}},[s],"multiFetch"),E("fetchReposForOrg",async(n='[""]',r,{manager:a,taskId:i})=>{if(A()){const[h,g="1"]=JSON.parse(n),y=await s(z.rest.repos.listForOrg({org:h,...ie(g),request:{signal:r}}));y&&await a.untilTaskRunDone(a.scheduleTaskRun(i,JSON.stringify([h,y]),O))}},[s],"multiFetch"),E("fetchOrgs",async(n,r,{manager:a,taskId:i})=>{if(A()){const h=await z.rest.orgs.listForAuthenticatedUser({...ie(n),request:{signal:r}}),g=Be(h);g&&await a.untilTaskRunDone(a.scheduleTaskRun(i,g,O)),await Promise.all(h.data.map(({login:y},m)=>a.untilTaskRunDone(a.scheduleTaskRun("fetchReposForOrg",JSON.stringify([y]),m*O))))}},[s],"multiFetch"),E("fetchAllRepos",async(n,r,{manager:a})=>{e.forEachRow(w,(i,h)=>e.setCell(w,i,"stale",!0)),A()&&(await Promise.all(["fetchReposStarred","fetchReposOwned","fetchOrgs"].map((i,h)=>a.untilTaskRunDone(a.scheduleTaskRun({taskId:i,startAfter:h*O})))),e.forEachRow(w,(i,h)=>{e.getCell(w,i,"stale")&&e.delRow(w,i)}))},[e],"multiFetch",{repeatDelay:Sn}),be("fetchAllRepos")},Dn=1e3*60*60,We="user",Hn={name:{type:"string"},avatarUrl:{type:"string"}},{useCreateStore:Un,useProvideStore:On,useCreatePersister:Vn,useValue:zn}=se,Xe=e=>zn(e,We),Gn=()=>{const e=Un(()=>ne().setValuesSchema(Hn));return Vn(e,t=>he(t,We),[],t=>t.startAutoPersisting()),On(We,e),qn(e),null},qn=e=>{E("fetchUser",async()=>{if(A()){const t=await z.rest.users.getAuthenticated();if(t.status==200){const{name:s,login:n,avatar_url:r}=t.data;e.setValues({name:s??n,avatarUrl:r})}}else e.delValues()},[e],"github",{repeatDelay:Dn}),be({taskId:"fetchUser"})},q="",Vt=e=>typeof e,M=e=>q+e,Je=e=>Vt(e)=="string",Bn=(e,t=q,s)=>e.split(t,s),It=globalThis,zt=Math,Yn=zt.floor,Kn=63,Wn=Bn("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),Xn=31536e6,Jn=e=>Wn[e&Kn],Q=e=>Vt(e)=="number"&&e>=0,L=e=>e==null,b=(e,t,s)=>L(e)?s==null?void 0:s():t(e),P=e=>e.length,Zn=(e,t)=>e.test(t),Qn=e=>P(e)==0,me=Date.now,eo=e=>(Q(e)||(e=0),e>Xn?e:me()+e),Re=(e,t)=>e.map(t),to=(e,t,s)=>e.reduce(t,s),de=(e,t)=>e.forEach(t),bt=(e,t,s,...n)=>e.splice(t,s,...n),Gt=(e,...t)=>e.push(...t),qt=e=>e.shift(),so=(e,t)=>e.split(t),no=(e,t)=>e.filter(t),oo=e=>e.size,ro=(e,t)=>e.has(t),Bt=(e,t)=>e.delete(t),ot=e=>oo(e)==0,je=(e,t)=>e==null?void 0:e.forEach(t),wt=e=>e.clear(),T=e=>new Map(e),v=(e,t,s)=>L(s)?(Bt(e,t),e):e==null?void 0:e.set(t,s),Ze=(e,t,s,n)=>(ro(e,t)?n==null||n(C(e,t)):v(e,t,s()),C(e,t)),C=(e,t)=>e==null?void 0:e.get(t),_t=e=>[...e.keys()],ao=(e,t)=>{const s={};return je(e,(n,r)=>s[r]=n),s},Qe=(e,t,s,n,r=0)=>b((s?Ze:C)(e,t[r],r>P(t)-2?s:T),a=>{if(r>P(t)-2)return n!=null&&n(a)&&v(e,t[r]),a;const i=Qe(a,t,s,n,r+1);return ot(a)&&v(e,t[r]),i}),co=/^\d+$/,lo=()=>{const e=[];let t=0;return[()=>qt(e)??q+t++,s=>{Zn(co,s)&&P(e)<1e3&&Gt(e,s)}]},io=()=>new Set,uo=(e,t)=>e==null?void 0:e.add(t),ho=(e,t=[q])=>{const s=[],n=(r,a)=>a==P(t)?Gt(s,r):de([t[a],null],i=>n(C(r,i),a+1));return n(e,0),s},po=e=>{let t;const[s,n]=lo(),r=T();return[(g,y,m)=>{t??(t=e());const x=s();return v(r,x,[g,y,m]),uo(Qe(y,m??[q],io),x),x},(g,y,...m)=>de(ho(g,y),x=>je(x,j=>C(r,j)[0](t,...y??[],...m))),g=>b(C(r,g),([,y,m])=>(Qe(y,m??[q],void 0,x=>(Bt(x,g),ot(x)?1:0)),v(r,g),n(g),m))]},oe=Object,Et=e=>oe.getPrototypeOf(e),fo=oe.isFrozen,go=oe.entries,yo=(e,t)=>(delete e[t],e),Yt=e=>!L(e)&&b(Et(e),t=>t==oe.prototype||L(Et(t)),()=>!0),xo=oe.freeze,rt=(e,t)=>de(go(e),([s,n])=>t(n,s)),ye=(...e)=>oe.assign({},...e),mo=e=>(rt(e,(t,s)=>t===void 0?delete e[s]:0),e),Kt=(e,t)=>L(e)||!Yt(e)||fo(e)?0:(rt(e,(s,n)=>{t(s,n)||yo(e,n)}),1),He=()=>[T(),T()],Ro=It.crypto?e=>It.crypto.getRandomValues(e):e=>Re(e,()=>Yn(zt.random()*256)),ko=(e=16)=>to(Ro(new Uint8Array(e)),(t,s)=>t+Jn(s),""),at="tickInterval",ct="maxDuration",lt="maxRetries",it="retryDelay",ut="repeatDelay",vo={[at]:100},Ue={[ct]:1e3,[lt]:0,[it]:1e3,[ut]:null},Co=/^(\d*\.?\d+)(, ?\d*\.?\d+)*$/,Oe={[at]:Q},Ve={[ct]:Q,[lt]:Q,[it]:e=>Q(e)||Je(e)&&Co.test(e),[ut]:e=>Q(e)||e===null},ze=e=>Kt(e,(t,s)=>{var n;return(n=Ve[s])==null?void 0:n.call(Ve,t)})?e:{},At=e=>{var t;return(t=e[7])==null?void 0:t.abort()},Ge=(e,t)=>rt(t,(s,n)=>e[n]=s),jo=()=>{let e={},t,s=0;const n=T(),r=T(),a=T(),i=T(),h=He(),g=He(),y=T(),m=T(),[x,j,re]=po(()=>le),_=[[],[]],B=He(),Y=T(),pe=T(),ae=(c,l,u,d,f)=>{const p=_[c],S=p.findIndex(ge=>ge[2]>d),J=[l,u,d];bt(p,S==-1?P(p):S,0,J),Ae(c,l,u,1,[c==1,f])},ce=(c,l,u,d)=>{const f=_[c],p=f.findIndex(S=>S[1]==u);p!=-1&&(bt(f,p,1),Ae(c,l,u,-1,[void 0,d]))},K=(c,l)=>{const[u,d]=qt(_[c]);return Ae(c,u,d,-1,[void 0,l]),[u,d,C(a,d)]},fe=c=>no(Re(_[c],l=>l[1]),Je),W=c=>j(i,void 0,s=c),Ae=(c,l,u,d,f)=>{const p=B[c];v(p,u,d),v(Ze(Y,l,T),u,f)},ht=(c,l,u,d=q)=>v(Ze(pe,c,T),l,[u,d]),X=()=>{de(B,(c,l)=>{ot(c)||(j(g[l],void 0,ao(c)),wt(c))}),de([[Y,y],[pe,m]],([c,l])=>{je(c,(u,d)=>je(u,(f,p)=>j(l,[d,p],...f))),wt(c)})},ts=()=>{const c=me(),[l,u]=_;for(j(h[0]);P(l)&&l[0][2]<=c;){const[d,f,p]=K(0,1);b(C(r,d),([S])=>{if(L(p[8])){const $=Rt(f,!0),$e=$[it];Ge(p,{8:$[ct],9:$[lt],10:Je($e)?Re(so($e,","),vs=>parseInt(vs)):[$e],11:$[ut]})}const J=c+p[8],ge=new AbortController,{signal:Ct}=ge;Ge(p,{6:J,5:!0,7:ge}),ae(1,d,f,J,1),S(p[1],Ct,gt(f,p)).then(()=>{p[5]&&Ct.aborted===!1&&(ce(1,d,f,2),v(a,f),X(),b(p[11],$=>Ne(d,p[1],$,p[3],f)))}).catch($=>{ce(1,d,f,4),pt(f,p,me(),4),ht(d,f,4,$.message),X()})},()=>Le(f))}for(X();P(u)&&u[0][2]<=c;){const[d,f,p]=K(1,3);At(p),pt(f,p,c,3),ht(d,f,3)}X(),j(h[1]),s==1||s==2&&!Qn(l)?ft():(Pe(),W(0))},pt=(c,l,u,d)=>{if(l[9]-- >0){const f=l[10],p=P(f)>1?f.shift():f[0],S=u+p;Ge(l,{4:l[4]+1,5:!1,6:S,7:void 0}),ae(0,l[0],c,S,d)}else Le(c,d)},Le=(c,l=5)=>b(C(a,c),u=>{At(u),ce(u[5]?1:0,u[0],c,l),v(a,c)}),ft=()=>{Pe(),t=setTimeout(ts,yt(!0)[at])},Pe=()=>L(t)?0:clearTimeout(t),gt=(c,[l,u,,,d,f,p])=>mo({manager:le,taskId:l,taskRunId:c,arg:u,retry:d,running:f,nextTimestamp:p}),N=(c,...l)=>(c(...Re(l,M)),le),ss=c=>N(()=>Kt(c,(l,u)=>{var d;return(d=Oe[u])==null?void 0:d.call(Oe,l)})?e=c:0),yt=c=>ye(c?vo:{},e),ns=(c,l)=>N(u=>v(n,u,ze(l)),c),xt=(c,l)=>b(C(n,M(c)),u=>ye(l?Ue:{},u)),os=()=>_t(n),rs=c=>N(l=>v(n,l),c),as=(c,l,u,d={})=>N((f,p)=>v(r,f,[l,p,ze(d)]),c,u),mt=(c,l)=>b(C(r,M(c)),([,u,d])=>ye(l?Ue:{},l&&!L(u)?xt(u)??{}:{},d)),cs=()=>_t(r),ls=c=>N(l=>v(r,l),c),Ne=(c,l,u=0,d={},f)=>{if(s==2)return;if(Yt(c))return Ne(c.taskId,c.arg,c.startAfter,c.config);const p=f??ko(),S=eo(u);return v(a,p,[M(c),l,S,ze(d),0,!1,S]),ae(0,M(c),p,S,0),X(),p},Rt=(c,l)=>b(C(a,M(c)),([u,,,d])=>ye(l?Ue:{},l?mt(u,!0)??{}:{},d)),is=c=>b(C(a,M(c)),l=>gt(c,l)),us=c=>{var l;return(l=C(a,M(c)))==null?void 0:l[5]},ds=c=>new Promise(l=>b(C(a,c),([u])=>{const d=kt(u,c,(f,p,S,J)=>{L(J)&&(vt(d),l())})},l)),hs=c=>N(l=>{Le(l),X()},c),ps=()=>fe(0),fs=()=>fe(1),gs=c=>x(c,i),ys=c=>x(c,h[0]),xs=c=>x(c,h[1]),ms=c=>x(c,g[0]),Rs=c=>x(c,g[1]),kt=(c,l,u)=>x(u,y,[c,l]),ks=(c,l,u)=>x(u,m,[c,l]),vt=c=>(re(c),le),le={setManagerConfig:ss,getManagerConfig:yt,setCategory:ns,getCategoryConfig:xt,getCategoryIds:os,delCategory:rs,setTask:as,getTaskConfig:mt,getTaskIds:cs,delTask:ls,scheduleTaskRun:Ne,getTaskRunConfig:Rt,getTaskRunInfo:is,getTaskRunRunning:us,untilTaskRunDone:ds,delTaskRun:hs,getScheduledTaskRunIds:ps,getRunningTaskRunIds:fs,addStatusListener:gs,addWillTickListener:ys,addDidTickListener:xs,addScheduledTaskRunIdsListener:ms,addRunningTaskRunIdsListener:Rs,addTaskRunRunningListener:kt,addTaskRunFailedListener:ks,delListener:vt,start:()=>N(()=>{W(1),ft()}),stop:(c=!1)=>N(()=>{c?(W(0),Pe()):s!=0&&W(2)}),getStatus:()=>s,getNow:me};return xo(le)},So=()=>Vs(()=>jo().setManagerConfig({tickInterval:10}).setCategory("singleFetch",{maxDuration:1e4,maxRetries:2,retryDelay:5e3}).setCategory("multiFetch",{maxDuration:12e4,maxRetries:2,retryDelay:3e4}).start()),To="#181717",Io=R.forwardRef(function({title:t="GitHub",color:s="currentColor",size:n=24,...r},a){return s==="default"&&(s=To),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:s,viewBox:"0 0 24 24",ref:a,...r,children:[o.jsx("title",{children:t}),o.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})});const bo=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wo=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),Lt=e=>{const t=wo(e);return t.charAt(0).toUpperCase()+t.slice(1)},Wt=(...e)=>e.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),_o=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Eo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ao=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:a,iconNode:i,...h},g)=>R.createElement("svg",{ref:g,...Eo,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:Wt("lucide",r),...!a&&!_o(h)&&{"aria-hidden":"true"},...h},[...i.map(([y,m])=>R.createElement(y,m)),...Array.isArray(a)?a:[a]]));const I=(e,t)=>{const s=R.forwardRef(({className:n,...r},a)=>R.createElement(Ao,{ref:a,iconNode:t,className:Wt(`lucide-${bo(Lt(e))}`,`lucide-${e}`,n),...r}));return s.displayName=Lt(e),s};const Lo=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"m9.5 17 5-5",key:"nakeu6"}],["path",{d:"m9.5 12 5 5",key:"1hccrj"}]],Po=I("archive-x",Lo);const No=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],$o=I("archive",No);const Mo=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Fo=I("book-marked",Mo);const Do=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Ee=I("circle-dot",Do);const Ho=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Uo=I("circle-help",Ho);const Oo=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vo=I("eye",Oo);const zo=[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]],et=I("git-fork",zo);const Go=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],Xt=I("git-pull-request",Go);const qo=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Bo=I("house",qo);const Yo=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ko=I("log-out",Yo);const Wo=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xo=I("settings",Wo);const Jo=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],dt=I("star",Jo);const Zo=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qo=I("users",Zo);var er="zhil3w0";const tr=()=>location.assign("auth.html"),sr=()=>location.assign("auth.html?logout"),Jt=()=>{const e=Xe("name"),t=Xe("avatarUrl");return e?o.jsxs("div",{className:er,children:[t?o.jsx(ws,{variant:"avatar",src:t,alt:e}):null,o.jsx(ee,{onClick:sr,icon:Ko,title:"Logout"})]}):o.jsx(ee,{onClick:tr,icon:Io,title:"Login",variant:"accent"})};var nr="_1ugp98g0";const or=()=>{const e=zs()??[],t=Pt(e),s=e.length,n=Ut()??[],r=Pt(n),a=n.length;return o.jsx("div",{className:nr,children:a>0?o.jsxs("div",{title:r,children:[a," tasks running"]}):s>0?o.jsxs("div",{title:t,children:[s," tasks scheduled"]}):"Idle"})},Pt=e=>{const t=Ie();return e.map(s=>{const{taskId:n,nextTimestamp:r=0}=(t==null?void 0:t.getTaskRunInfo(s))??{};return`• ${n} (${new Date(r).toLocaleTimeString()})`}).join(`
`)},{createElement:Ur,Fragment:Or,useEffect:Zt,useRef:Qt,useState:Vr}=Cs,es={behavior:"instant",block:"nearest"},ke=e=>e<1e3?e:(e/1e3).toFixed(e<1e4?1:0)+(e<1e3?"":"k"),Se=e=>new Date(e).toLocaleDateString(),Z=({repoId:e,isCurrent:t=!1,hardcodedName:s})=>{const n=we("repoId",()=>e,[e]),r=Qt(null);Zt(()=>{var h;t&&((h=r.current)==null||h.scrollIntoView(es))},[t]);const a=xe(e,"name"),i=xe(e,"stargazersCount");return o.jsx(ee,{variant:"item",ref:r,onClick:n,icon:xe(e,"fork")?et:Fo,title:s??a,titleRight:s?null:o.jsx(H,{icon:dt,title:ke(i)}),current:t})};var rr="_1ul10dk0",ar="_1ul10dk1";const cr=()=>o.jsxs(V,{className:rr,children:[o.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:ar}),o.jsx("h2",{children:"Welcome to TinyHub"}),o.jsx("p",{children:"Navigate to your own repos from the sidebar, or go directly to one of the popular ones below."}),o.jsx(G,{}),o.jsx(Z,{repoId:"facebook/react",hardcodedName:"React"}),o.jsx(Z,{repoId:"vuejs/vue",hardcodedName:"Vue"}),o.jsx(Z,{repoId:"tensorflow/tensorflow",hardcodedName:"TensorFlow"}),o.jsx(Z,{repoId:"torvalds/linux",hardcodedName:"Linux"}),o.jsx(Z,{repoId:"ohmyzsh/ohmyzsh",hardcodedName:"Oh My Zsh"})]});var lr="_1nl4udb0",ir="_1nl4udb1";const ur=({issueId:e})=>o.jsxs(o.Fragment,{children:[o.jsxs(Nt,{icon:D(e,"pullRequest")?Xt:Ee,children:[o.jsx("h2",{children:D(e,"title")}),o.jsxs("p",{children:["Created ",Se(D(e,"createdAt")),"."]}),o.jsxs("p",{children:["Updated ",Se(D(e,"updatedAt")),"."]})]}),o.jsx(G,{}),o.jsx("div",{dangerouslySetInnerHTML:{__html:D(e,"bodyHtml")??""}})]}),dr=({issueId:e,isCurrent:t})=>{const s=we("issueId",()=>e,[e]),n=Qt(null);return Zt(()=>{var r;t&&((r=n.current)==null||r.scrollIntoView(es))},[t]),o.jsx(ee,{variant:"item",ref:n,onClick:s,icon:D(e,"pullRequest")?Xt:Ee,title:D(e,"title"),titleRight:o.jsx(H,{title:`#${e}`}),current:t})},hr=({currentIssueId:e,issueIds:t})=>t.map(s=>o.jsx(dr,{issueId:s,isCurrent:s==e},s)),pr=()=>{const e=U("repoId"),t=U("issueId"),s=_e("issuesSortCell"),n=s=="title",r=an(s,!n),a=we("issueId",i=>i);return R.useEffect(()=>{r.length>0&&(t==""||!r.includes(t))&&a(r[0])},[r,t,a]),o.jsx(Te,{id:"issues",title:"Issues",titleRight:o.jsx(H,{icon:Ee,variant:"accent",title:xe(e,"openIssuesCount")}),children:o.jsxs(qe,{variant:"1|2",children:[o.jsx("nav",{className:lr,children:o.jsx(hr,{currentIssueId:t,issueIds:r})}),D(t,"title")?o.jsx(V,{className:ir,children:o.jsx(ur,{issueId:t})}):null]})})};var fr="wm8fek2";const gr=()=>{const e=k("homepage");return o.jsxs(Te,{title:o.jsx("b",{children:"Summary"}),titleRight:o.jsxs("div",{className:fr,children:[o.jsx(H,{title:k("visibility"),icon:Vo,variant:"accent"}),k("fork")?o.jsx(H,{title:"fork",icon:et,variant:"accent"}):null,k("archived")?o.jsx(H,{title:"archived",icon:$o,variant:"accent"}):null,k("disabled")?o.jsx(H,{title:"disabled",icon:Po,variant:"accent"}):null]}),id:"repoHeader",startOpen:!0,children:[o.jsxs(qe,{variant:"2|1",children:[o.jsxs(Nt,{src:k("avatarUrl"),children:[o.jsx("h2",{children:k("name")}),o.jsx("p",{children:k("description")}),o.jsxs("p",{children:["Created ",Se(k("createdAt")),", updated"," ",Se(k("updatedAt")),"."]}),e?o.jsx("p",{children:o.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:e})}):null]}),o.jsx(V,{children:o.jsx(_s,{data:{Owner:k("owner"),Link:o.jsx("a",{href:k("githubUrl"),target:"_blank",rel:"noreferrer",children:"GitHub"}),Language:k("language"),License:k("license")}})})]}),o.jsx(G,{}),o.jsxs(qe,{variant:"1|1|1",children:[o.jsx(V,{children:o.jsx(Me,{icon:dt,title:"Stars",number:ke(k("stargazersCount"))})}),o.jsx(V,{children:o.jsx(Me,{icon:et,title:"Forks",number:ke(k("forksCount"))})}),o.jsx(V,{children:o.jsx(Me,{icon:Ee,title:"Issues",number:ke(k("openIssuesCount"))})})]})]})},yr=()=>{const e=U("repoId"),t=k("id");return e==t?o.jsxs(o.Fragment,{children:[o.jsx(gr,{}),o.jsx(pr,{})]}):null},xr={title:"title",createdAt:"most recently created",updatedAt:"most recently updated",pullRequest:"pull requests then issues"},mr=()=>{const e=_e("issuesSortCell"),t=Ot("issuesSortCell",s=>s);return o.jsxs("div",{children:[o.jsx("label",{children:"Issues sorted by"}),o.jsx($t,{onChange:t,initialOption:e,options:xr})]})},Rr=({group:e,currentRepoId:t})=>{const s=$n(e);return o.jsx(Te,{id:`repoGroup/${e}`,icon:e=="Starred"?dt:Qo,title:e,titleRight:o.jsx(H,{variant:"accent",title:s.length}),children:s.map(n=>o.jsx(Z,{repoId:n,isCurrent:n==t},n))},e)},kr=()=>{const e=U("repoId");return Nn().map(t=>o.jsx(Rr,{group:t,currentRepoId:e},t))},vr={name:"name",stargazersCount:"stars",forksCount:"forks",openIssuesCount:"issues",createdAt:"most recently created",updatedAt:"most recently updated",fork:"repos then forks"},Cr=()=>{const e=_e("reposSortCell"),t=Ot("reposSortCell",s=>s);return o.jsxs("div",{children:[o.jsx("label",{children:"Repos sorted by"}),o.jsx($t,{onChange:t,initialOption:e,options:vr})]})},jr=()=>{const e=U("repoId"),t=we("repoId",()=>"");return o.jsxs(o.Fragment,{children:[o.jsx(ee,{variant:"item",onClick:t,icon:Bo,title:"Home",current:!e}),o.jsx(G,{}),o.jsx(kr,{}),o.jsx(G,{}),o.jsxs(Te,{icon:Xo,title:"Settings",id:"settings",children:[o.jsx(Cr,{}),o.jsx(G,{}),o.jsx(mr,{})]})]})};var Sr="_1cl0umd0",Tr="_1cl0umd1",Ir="_1cl0umd2";const br=()=>{var t;const e=(((t=Ut())==null?void 0:t.length)??0)>0;return o.jsxs(o.Fragment,{children:[o.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:Es(Sr,e&&Tr)}),o.jsx("h1",{children:"TinyHub"}),o.jsx(ee,{variant:"icon",icon:Uo,href:"https://github.com/tinyplex/tinyhub",alt:"A local-first GitHub client, built in public.",className:Ir})]})};var wr="yugd9z0",_r="yugd9z1";const Er=()=>o.jsxs(V,{className:wr,children:[o.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:_r}),o.jsx("h2",{children:"Welcome to TinyHub"}),o.jsx("p",{children:"TinyHub is a local-first GitHub client, built in public."}),o.jsx(G,{}),o.jsx("p",{children:"Login with GitHub to get started."}),o.jsx(Jt,{})]}),Ar=()=>o.jsx(Ns,{manager:So(),children:o.jsxs(Is,{children:[o.jsx(Gn,{}),o.jsx(Mn,{}),o.jsx(gn,{}),o.jsx(cn,{}),o.jsx(Zs,{}),o.jsx(jn,{}),o.jsx(Lr,{}),o.jsx(bs,{})]})}),Lr=()=>{const e=Xe("name"),t=U("repoId");return o.jsx(As,{title:o.jsx(br,{}),topNavRight:o.jsx(Jt,{}),sideNav:e?o.jsx(jr,{}):null,main:e?t?o.jsx(yr,{}):o.jsx(cr,{}):o.jsx(Er,{}),footer:or})};addEventListener("load",()=>js.createRoot(document.getElementById("app")).render(o.jsx(Ar,{})));
