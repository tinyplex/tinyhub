import{r as k,j as n,R as xs,c as ys}from"./react-CGTsdO7U.js";import{U as te,c as se,a as js,b as de,d as Cs,P as Ts,I as Ss}from"./tinybase--rmg7JGI.js";import{I as vs,B as Q,L as ks,G as ze,a as Is,T as U,S as et,C as H,H as Z,b as Pt,c as _t,d as ve,e as ke,R as qe,D as bs,M as Fe,E as Es,A as As,f as Ls,U as ws,g as Ps,h as _s,i as Ns,j as Fs,k as Ds}from"./tinywidgets-BOnZnS49.js";import{O as $s}from"./octokit-B0_jzZ8m.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const Us="tinytick",De=globalThis,ee=e=>e==null,Nt=(e,t,s)=>ee(e)?s==null?void 0:s():t(e),Tt=e=>e.length,$e=Us+"_uirc",Ft=De[$e]?De[$e]:De[$e]=k.createContext([]),Os=({manager:e,children:t})=>n.jsx(Ft.Provider,{value:k.useMemo(()=>[e],[e]),children:t}),Ms=(e,t)=>e.every(t),Hs=(e,t)=>!ee(e)&&!ee(t)&&Tt(e)===Tt(t)&&Ms(e,(s,o)=>t[o]===s),Dt=Object,St=e=>Dt.getPrototypeOf(e),Gs=e=>!ee(e)&&Nt(St(e),t=>t==Dt.prototype||ee(St(t)),()=>!0),ie=[],vt=[[],0,!1],Vs=[Hs],zs=(e,t)=>e===t,$t=(e,t,s=ie)=>{const o=Ie(),r=k.useRef(vt[t]),c=k.useCallback(()=>{var g;const p=ee(o)?void 0:((g=o["get"+e])==null?void 0:g.call(o,...s.filter(R=>R!==null)))??vt[t];return(Vs[t]??zs)(p,r.current)?r.current:r.current=p},[o,t,e,...s]),i=k.useCallback(p=>qs(o,e,...s,p),[o,t,e,...s]);return k.useSyncExternalStore(i,c,c)},qs=(e,t,...s)=>{var r;const o=(r=e==null?void 0:e["add"+t+"Listener"])==null?void 0:r.call(e,...s);return()=>{var c;return(c=e==null?void 0:e.delListener)==null?void 0:c.call(e,o)}},Ys=(e,t,s=ie)=>{const o=Ie();k.useLayoutEffect(()=>Nt(o==null?void 0:o.scheduleTaskRun(...e,t),r=>()=>{o==null||o.delTaskRun(r)}),[o,...e,...s])},Bs=(e,t=ie)=>k.useMemo(e,t),Ie=()=>k.useContext(Ft)[0],Ks=()=>$t("ScheduledTaskRunIds",0),Ut=()=>$t("RunningTaskRunIds",0),A=(e,t,s=ie,o,r,c=ie)=>{const i=Ie();k.useLayoutEffect(()=>(i==null||i.setTask(e,t,o,r),()=>{i==null||i.delTask(e)}),[i,e,...s,o,...c])},be=(e,t,s,o,r)=>Ys(...Gs(e)?[[e.taskId,e.arg,e.startAfter],e.config,t]:[[e,t,s],o,r]),Xs=100,Ws=/<([^>]+)>/,M=100,G=new $s({auth:localStorage.getItem("token")}),L=()=>localStorage.getItem("token")!=null,Ye=e=>{var s;const t=(s=e.headers)==null?void 0:s.link;if(t){const o=t.split(",").find(r=>r.endsWith('rel="next"'));if(o){const[,r]=o.match(Ws)??[];if(r){const c=new URL(r).searchParams.get("page");if(c)return c}}}},le=e=>{const t=parseInt(e??"");return{per_page:Xs,...isNaN(t)?{}:{page:t}}},tt="view",Js={repoId:{type:"string",default:""},issueId:{type:"string",default:""}},{useCreateStore:Qs,useProvideStore:Zs,useCreatePersister:en,useValue:tn,useSetValueCallback:sn}=te,O=e=>tn(e,tt),Ee=(e,t,s)=>sn(e,t,s,tt),nn=()=>{const e=Qs(()=>se().setValuesSchema(Js));return en(e,t=>js(t,async()=>{const[s,o,r]=location.hash.slice(1).split("/");return[{},{repoId:s&&o?s+"/"+o:"",issueId:r}]},async s=>{const{repoId:o,issueId:r}=s()[1];location.hash=o+"/"+r},s=>{const o=()=>s();return window.addEventListener("hashchange",o),o},s=>window.removeEventListener("hashchange",s)),[],async t=>{await t.startAutoLoad(),await t.startAutoSave()}),Zs(tt,e),null},on=1e3*60*10,je="issues",D="issues",rn={issues:{title:{type:"string",default:""},pullRequest:{type:"boolean",default:!1},bodyHtml:{type:"string",default:""},createdAt:{type:"string",default:""},updatedAt:{type:"string",default:""},stale:{type:"boolean",default:!1}}},{useCreateStore:an,useProvideStore:cn,useCreatePersister:ln,useCell:un,useSortedRowIds:dn}=te,$=(e,t)=>un(D,e,t,je),fn=(e,t)=>dn(D,e,t,void 0,void 0,je),pn=()=>{const e=O("repoId"),t=an(()=>se().setTablesSchema(rn),[e]);return cn(je,t),ln(t,s=>{if(e)return de(s,e+"/"+je)},[e],async s=>s==null?void 0:s.startAutoPersisting(),[]),hn(t,e),null},hn=(e,t)=>{A("fetchIssues "+t,async(s="1",o,{manager:r,taskId:c})=>{if(L()&&t){const[i,p]=t.split("/"),g=await G.rest.issues.listForRepo({owner:i,repo:p,mediaType:{format:"html"},...le(s),request:{signal:o}});g.data.forEach(({number:x,title:m,pull_request:T,body_html:oe,created_at:E,updated_at:z})=>e.setRow(D,x+"",{title:m,pullRequest:T!=null,bodyHtml:oe??"",createdAt:E,updatedAt:z}));const R=Ye(g);R&&await r.untilTaskRunDone(r.scheduleTaskRun(c,R,M))}},[e,t],"multiFetch"),A("fetchAllIssues "+t,async(s,o,{manager:r})=>{e.forEachRow(D,(c,i)=>e.setCell(D,c,"stale",!0)),L()&&t&&(await r.untilTaskRunDone(r.scheduleTaskRun("fetchIssues "+t)),e.forEachRow(D,(c,i)=>{e.getCell(D,c,"stale")&&e.delRow(D,c)}))},[e,t],"multiFetch",{repeatDelay:on}),be("fetchAllIssues "+t)},Be="repo",gn={id:{type:"string",default:""},owner:{type:"string",default:""},avatarUrl:{type:"string",default:""},name:{type:"string",default:""},archived:{type:"boolean",default:!1},createdAt:{type:"string",default:""},description:{type:"string",default:""},disabled:{type:"boolean",default:!1},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},homepage:{type:"string",default:""},githubUrl:{type:"string",default:""},language:{type:"string",default:""},license:{type:"string",default:""},openIssuesCount:{type:"number",default:0},size:{type:"number",default:0},stargazersCount:{type:"number",default:0},topics:{type:"string",default:""},updatedAt:{type:"string",default:""},visibility:{type:"string",default:""}},{useCreateStore:Rn,useProvideStore:mn,useCreatePersister:xn,useValue:yn}=te,y=e=>yn(e,Be),jn=()=>{const e=O("repoId"),t=Rn(()=>se().setValuesSchema(gn),[e]);return mn(Be,t),xn(t,s=>{if(e)return de(s,e+"/"+Be)},[e],s=>s==null?void 0:s.startAutoPersisting(),[]),Cn(t,e),null},Cn=(e,t)=>{A("fetchRepo",async(s="")=>{if(L()&&s){const[o,r]=s.split("/"),{owner:c,name:i,archived:p,created_at:g,description:R,disabled:x,fork:m,forks_count:T,homepage:oe,html_url:E,language:z,license:q,open_issues_count:fe,size:re,stargazers_count:ae,topics:Y,updated_at:pe,visibility:B}=(await G.rest.repos.get({owner:o,repo:r})).data;e.setValues({id:c.login+"/"+i,owner:c.login,avatarUrl:c.avatar_url,name:i,archived:p??!1,createdAt:g??"",description:R??"",disabled:x??!1,fork:m,forksCount:T??0,githubUrl:E??"",homepage:oe??"",language:z??"",license:(q==null?void 0:q.name)??"",openIssuesCount:fe??0,size:re??0,stargazersCount:ae??0,topics:(Y==null?void 0:Y.join(", "))??"",updatedAt:pe??"",visibility:B??""})}},[e],"singleFetch"),be("fetchRepo",t)},Ce="settings",Tn={reposSortCell:{type:"string",default:"stars"},issuesSortCell:{type:"string",default:"updatedAt"}},{useCreateStore:Sn,useProvideStore:vn,useCreatePersister:kn,useValue:In,useSetValueCallback:bn}=te,Ae=e=>In(e,Ce),Ot=(e,t,s)=>bn(e,t,s,Ce),En=()=>{const e=Sn(()=>se().setValuesSchema(Tn));return kn(e,t=>de(t,Ce),[],t=>t.startAutoPersisting()),vn(Ce,e),null},An=1e3*60*60,Ke="repos",b="repos",st="repos",nt="reposByGroup",Ln={repos:{owner:{type:"string",default:""},name:{type:"string",default:""},starred:{type:"boolean",default:!1},createdAt:{type:"string",default:""},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},openIssuesCount:{type:"number",default:0},stargazersCount:{type:"number",default:0},updatedAt:{type:"string",default:""},stale:{type:"boolean",default:!1}}},{useCell:wn,useCreatePersister:Pn,useCreateStore:_n,useProvideStore:Nn,useCreateIndexes:Fn,useProvideIndexes:Dn,useSliceRowIds:$n,useSliceIds:Un}=te,Re=(e,t)=>wn(b,e,t,Ke),On=()=>Un(nt,st),Mn=e=>$n(nt,e,st),Hn=()=>{const e=_n(()=>se().setTablesSchema(Ln));Nn(Ke,e);const t=Ae("reposSortCell"),s=t=="name"||t=="fork"?1:-1,o=Fn(e,r=>Cs(r).setIndexDefinition(nt,b,c=>c("starred")?"Starred":c("owner"),t,(c,i)=>c=="Starred"?-1:i=="Starred"||c>i?1:-1,(c,i)=>(c>i?1:-1)*s),[t]);return Dn(st,o),Pn(e,r=>de(r,Ke),[],r=>r.startAutoPersisting()),Gn(e),null},Gn=e=>{const t=k.useCallback(({full_name:o,owner:r,name:c,created_at:i,fork:p,forks_count:g,open_issues_count:R,stargazers_count:x,updated_at:m},T=!1)=>{(T||e.getCell(b,o,"stale"))&&e.setCell(b,o,"starred",T),e.setPartialRow(b,o,{owner:r.login,name:c,createdAt:i??"",fork:p,forksCount:g??0,openIssuesCount:R??0,stargazersCount:x??0,updatedAt:m??"",stale:!1})},[e]),s=k.useCallback(async(o,r)=>{const c=await o;return c.data.forEach(i=>t(i,r)),Ye(c)},[t]);A("fetchReposStarred",async(o="1",r,{manager:c,taskId:i})=>{if(L()){const p=await s(G.rest.activity.listReposStarredByAuthenticatedUser({...le(o),request:{signal:r}}),!0);p&&await c.untilTaskRunDone(c.scheduleTaskRun(i,p,M))}},[s],"multiFetch"),A("fetchReposOwned",async(o="1",r,{manager:c,taskId:i})=>{if(L()){const p=await s(G.rest.repos.listForAuthenticatedUser({...le(o),request:{signal:r}}));p&&await c.untilTaskRunDone(c.scheduleTaskRun(i,p,M))}},[s],"multiFetch"),A("fetchReposForOrg",async(o='[""]',r,{manager:c,taskId:i})=>{if(L()){const[p,g="1"]=JSON.parse(o),R=await s(G.rest.repos.listForOrg({org:p,...le(g),request:{signal:r}}));R&&await c.untilTaskRunDone(c.scheduleTaskRun(i,JSON.stringify([p,R]),M))}},[s],"multiFetch"),A("fetchOrgs",async(o,r,{manager:c,taskId:i})=>{if(L()){const p=await G.rest.orgs.listForAuthenticatedUser({...le(o),request:{signal:r}}),g=Ye(p);g&&await c.untilTaskRunDone(c.scheduleTaskRun(i,g,M)),await Promise.all(p.data.map(({login:R},x)=>c.untilTaskRunDone(c.scheduleTaskRun("fetchReposForOrg",JSON.stringify([R]),x*M))))}},[s],"multiFetch"),A("fetchAllRepos",async(o,r,{manager:c})=>{e.forEachRow(b,(i,p)=>e.setCell(b,i,"stale",!0)),L()&&(await Promise.all(["fetchReposStarred","fetchReposOwned","fetchOrgs"].map((i,p)=>c.untilTaskRunDone(c.scheduleTaskRun({taskId:i,startAfter:p*M})))),e.forEachRow(b,(i,p)=>{e.getCell(b,i,"stale")&&e.delRow(b,i)}))},[e],"multiFetch",{repeatDelay:An}),be("fetchAllRepos")},Vn=1e3*60*60,Xe="user",zn={name:{type:"string"},avatarUrl:{type:"string"}},{useCreateStore:qn,useProvideStore:Yn,useCreatePersister:Bn,useValue:Kn}=te,We=e=>Kn(e,Xe),Xn=()=>{const e=qn(()=>se().setValuesSchema(zn));return Bn(e,t=>de(t,Xe),[],t=>t.startAutoPersisting()),Yn(Xe,e),Wn(e),null},Wn=e=>{A("fetchUser",async()=>{if(L()){const t=await G.rest.users.getAuthenticated();if(t.status==200){const{name:s,login:o,avatar_url:r}=t.data;e.setValues({name:s??o,avatarUrl:r})}}else e.delValues()},[e],"github",{repeatDelay:Vn}),be({taskId:"fetchUser"})},V="",Mt=e=>typeof e,F=e=>V+e,Je=e=>Mt(e)=="string",Jn=(e,t=V,s)=>e.split(t,s),kt=globalThis,Ht=Math,Qn=Ht.floor,Zn=63,eo=Jn("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),to=31536e6,so=e=>eo[e&Zn],J=e=>Mt(e)=="number"&&e>=0,w=e=>e==null,I=(e,t,s)=>w(e)?s==null?void 0:s():t(e),P=e=>e.length,no=(e,t)=>e.test(t),oo=e=>P(e)==0,me=Date.now,ro=e=>(J(e)||(e=0),e>to?e:me()+e),xe=(e,t)=>e.map(t),ao=(e,t,s)=>e.reduce(t,s),ue=(e,t)=>e.forEach(t),It=(e,t,s,...o)=>e.splice(t,s,...o),Gt=(e,...t)=>e.push(...t),Vt=e=>e.shift(),co=(e,t)=>e.split(t),lo=(e,t)=>e.filter(t),io=e=>e.size,uo=(e,t)=>e.has(t),zt=(e,t)=>e.delete(t),ot=e=>io(e)==0,Te=(e,t)=>e==null?void 0:e.forEach(t),bt=e=>e.clear(),v=e=>new Map(e),j=(e,t,s)=>w(s)?(zt(e,t),e):e==null?void 0:e.set(t,s),Qe=(e,t,s,o)=>(uo(e,t)?o==null||o(C(e,t)):j(e,t,s()),C(e,t)),C=(e,t)=>e==null?void 0:e.get(t),Et=e=>[...e.keys()],fo=(e,t)=>{const s={};return Te(e,(o,r)=>s[r]=o),s},Ze=(e,t,s,o,r=0)=>I((s?Qe:C)(e,t[r],r>P(t)-2?s:v),c=>{if(r>P(t)-2)return o!=null&&o(c)&&j(e,t[r]),c;const i=Ze(c,t,s,o,r+1);return ot(c)&&j(e,t[r]),i}),po=/^\d+$/,ho=()=>{const e=[];let t=0;return[()=>Vt(e)??V+t++,s=>{no(po,s)&&P(e)<1e3&&Gt(e,s)}]},go=()=>new Set,Ro=(e,t)=>e==null?void 0:e.add(t),mo=(e,t=[V])=>{const s=[],o=(r,c)=>c==P(t)?Gt(s,r):ue([t[c],null],i=>o(C(r,i),c+1));return o(e,0),s},xo=e=>{let t;const[s,o]=ho(),r=v();return[(g,R,x)=>{t??(t=e());const m=s();return j(r,m,[g,R,x]),Ro(Ze(R,x??[V],go),m),m},(g,R,...x)=>ue(mo(g,R),m=>Te(m,T=>C(r,T)[0](t,...R??[],...x))),g=>I(C(r,g),([,R,x])=>(Ze(R,x??[V],void 0,m=>(zt(m,g),ot(m)?1:0)),j(r,g),o(g),x))]},ne=Object,At=e=>ne.getPrototypeOf(e),yo=ne.isFrozen,jo=ne.entries,Co=(e,t)=>(delete e[t],e),qt=e=>!w(e)&&I(At(e),t=>t==ne.prototype||w(At(t)),()=>!0),To=ne.freeze,rt=(e,t)=>ue(jo(e),([s,o])=>t(o,s)),ge=(...e)=>ne.assign({},...e),So=e=>(rt(e,(t,s)=>t===void 0?delete e[s]:0),e),Yt=(e,t)=>w(e)||!qt(e)||yo(e)?0:(rt(e,(s,o)=>{t(s,o)||Co(e,o)}),1),Ue=()=>[v(),v()],vo=kt.crypto?e=>kt.crypto.getRandomValues(e):e=>xe(e,()=>Qn(Ht.random()*256)),ko=(e=16)=>ao(vo(new Uint8Array(e)),(t,s)=>t+so(s),""),at="tickInterval",ct="maxDuration",lt="maxRetries",it="retryDelay",ut="repeatDelay",Io={[at]:100},Oe={[ct]:1e3,[lt]:0,[it]:1e3,[ut]:null},bo=/^(\d*\.?\d+)(, ?\d*\.?\d+)*$/,Me={[at]:J},He={[ct]:J,[lt]:J,[it]:e=>J(e)||Je(e)&&bo.test(e),[ut]:e=>J(e)||e===null},Ge=e=>Yt(e,(t,s)=>{var o;return(o=He[s])==null?void 0:o.call(He,t)})?e:{},Lt=e=>{var t;return(t=e[7])==null?void 0:t.abort()},Ve=(e,t)=>rt(t,(s,o)=>e[o]=s),Eo=()=>{let e={},t,s=0;const o=v(),r=v(),c=v(),i=v(),p=Ue(),g=Ue(),R=v(),x=v(),[m,T,oe]=xo(()=>ce),E=[[],[]],z=Ue(),q=v(),fe=v(),re=(a,l,u,d,h)=>{const f=E[a],S=f.findIndex(he=>he[2]>d),X=[l,u,d];It(f,S==-1?P(f):S,0,X),Le(a,l,u,1,[a==1,h])},ae=(a,l,u,d)=>{const h=E[a],f=h.findIndex(S=>S[1]==u);f!=-1&&(It(h,f,1),Le(a,l,u,-1,[void 0,d]))},Y=(a,l)=>{const[u,d]=Vt(E[a]);return Le(a,u,d,-1,[void 0,l]),[u,d,C(c,d)]},pe=a=>lo(xe(E[a],l=>l[1]),Je),B=a=>T(i,void 0,s=a),Le=(a,l,u,d,h)=>{const f=z[a];j(f,u,d),j(Qe(q,l,v),u,h)},dt=(a,l,u,d=V)=>j(Qe(fe,a,v),l,[u,d]),K=()=>{ue(z,(a,l)=>{ot(a)||(T(g[l],void 0,fo(a)),bt(a))}),ue([[q,R],[fe,x]],([a,l])=>{Te(a,(u,d)=>Te(u,(h,f)=>T(l,[d,f],...h))),bt(a)})},Jt=()=>{const a=me(),[l,u]=E;for(T(p[0]);P(l)&&l[0][2]<=a;){const[d,h,f]=Y(0,1);I(C(r,d),([S])=>{if(w(f[8])){const N=xt(h,!0),Ne=N[it];Ve(f,{8:N[ct],9:N[lt],10:Je(Ne)?xe(co(Ne,","),ms=>parseInt(ms)):[Ne],11:N[ut]})}const X=a+f[8],he=new AbortController,{signal:Ct}=he;Ve(f,{6:X,5:!0,7:he}),re(1,d,h,X,1),S(f[1],Ct,ht(h,f)).then(()=>{f[5]&&Ct.aborted===!1&&(ae(1,d,h,2),j(c,h),K(),I(f[11],N=>_e(d,f[1],N,f[3],h)))}).catch(N=>{ae(1,d,h,4),ft(h,f,me(),4),dt(d,h,4,N.message),K()})},()=>we(h))}for(K();P(u)&&u[0][2]<=a;){const[d,h,f]=Y(1,3);Lt(f),ft(h,f,a,3),dt(d,h,3)}K(),T(p[1]),s==1||s==2&&!oo(l)?pt():(Pe(),B(0))},ft=(a,l,u,d)=>{if(l[9]-- >0){const h=l[10],f=P(h)>1?h.shift():h[0],S=u+f;Ve(l,{4:l[4]+1,5:!1,6:S,7:void 0}),re(0,l[0],a,S,d)}else we(a,d)},we=(a,l=5)=>I(C(c,a),u=>{Lt(u),ae(u[5]?1:0,u[0],a,l),j(c,a)}),pt=()=>{Pe(),t=setTimeout(Jt,gt(!0)[at])},Pe=()=>w(t)?0:clearTimeout(t),ht=(a,[l,u,,,d,h,f])=>So({manager:ce,taskId:l,taskRunId:a,arg:u,retry:d,running:h,nextTimestamp:f}),_=(a,...l)=>(a(...xe(l,F)),ce),Qt=a=>_(()=>Yt(a,(l,u)=>{var d;return(d=Me[u])==null?void 0:d.call(Me,l)})?e=a:0),gt=a=>ge(a?Io:{},e),Zt=(a,l)=>_(u=>j(o,u,Ge(l)),a),Rt=(a,l)=>I(C(o,F(a)),u=>ge(l?Oe:{},u)),es=()=>Et(o),ts=a=>_(l=>j(o,l),a),ss=(a,l,u,d={})=>_((h,f)=>j(r,h,[l,f,Ge(d)]),a,u),mt=(a,l)=>I(C(r,F(a)),([,u,d])=>ge(l?Oe:{},l&&!w(u)?Rt(u)??{}:{},d)),ns=()=>Et(r),os=a=>_(l=>j(r,l),a),_e=(a,l,u=0,d={},h)=>{if(s==2)return;if(qt(a))return _e(a.taskId,a.arg,a.startAfter,a.config);const f=h??ko(),S=ro(u);return j(c,f,[F(a),l,S,Ge(d),0,!1,S]),re(0,F(a),f,S,0),K(),f},xt=(a,l)=>I(C(c,F(a)),([u,,,d])=>ge(l?Oe:{},l?mt(u,!0)??{}:{},d)),rs=a=>I(C(c,F(a)),l=>ht(a,l)),as=a=>{var l;return(l=C(c,F(a)))==null?void 0:l[5]},cs=a=>new Promise(l=>I(C(c,a),([u])=>{const d=yt(u,a,(h,f,S,X)=>{w(X)&&(jt(d),l())})},l)),ls=a=>_(l=>{we(l),K()},a),is=()=>pe(0),us=()=>pe(1),ds=a=>m(a,i),fs=a=>m(a,p[0]),ps=a=>m(a,p[1]),hs=a=>m(a,g[0]),gs=a=>m(a,g[1]),yt=(a,l,u)=>m(u,R,[a,l]),Rs=(a,l,u)=>m(u,x,[a,l]),jt=a=>(oe(a),ce),ce={setManagerConfig:Qt,getManagerConfig:gt,setCategory:Zt,getCategoryConfig:Rt,getCategoryIds:es,delCategory:ts,setTask:ss,getTaskConfig:mt,getTaskIds:ns,delTask:os,scheduleTaskRun:_e,getTaskRunConfig:xt,getTaskRunInfo:rs,getTaskRunRunning:as,untilTaskRunDone:cs,delTaskRun:ls,getScheduledTaskRunIds:is,getRunningTaskRunIds:us,addStatusListener:ds,addWillTickListener:fs,addDidTickListener:ps,addScheduledTaskRunIdsListener:hs,addRunningTaskRunIdsListener:gs,addTaskRunRunningListener:yt,addTaskRunFailedListener:Rs,delListener:jt,start:()=>_(()=>{B(1),pt()}),stop:(a=!1)=>_(()=>{a?(B(0),Pe()):s!=0&&B(2)}),getStatus:()=>s,getNow:me};return To(ce)},Ao=()=>Bs(()=>Eo().setManagerConfig({tickInterval:10}).setCategory("singleFetch",{maxDuration:1e4,maxRetries:2,retryDelay:5e3}).setCategory("multiFetch",{maxDuration:12e4,maxRetries:2,retryDelay:3e4}).start()),Lo="#181717",wo=k.forwardRef(function({title:t="GitHub",color:s="currentColor",size:o=24,...r},c){return s==="default"&&(s=Lo),n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:o,fill:s,viewBox:"0 0 24 24",ref:c,...r,children:[n.jsx("title",{children:t}),n.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})});var Po="zhil3w0";const _o=()=>location.assign("auth.html"),No=()=>location.assign("auth.html?logout"),Bt=()=>{const e=We("name"),t=We("avatarUrl");return e?n.jsxs("div",{className:Po,children:[t?n.jsx(vs,{variant:"avatar",src:t,alt:e}):null,n.jsx(Q,{onClick:No,icon:ks,title:"Logout"})]}):n.jsx(Q,{onClick:_o,icon:wo,title:"Login",variant:"accent"})};var Fo="_1ugp98g0";const Do=()=>{const e=Ks()??[],t=wt(e),s=e.length,o=Ut()??[],r=wt(o),c=o.length;return n.jsx("div",{className:Fo,children:c>0?n.jsxs("div",{title:r,children:[c," tasks running"]}):s>0?n.jsxs("div",{title:t,children:[s," tasks scheduled"]}):"Idle"})},wt=e=>{const t=Ie();return e.map(s=>{const{taskId:o,nextTimestamp:r=0}=(t==null?void 0:t.getTaskRunInfo(s))??{};return`â€¢ ${o} (${new Date(r).toLocaleTimeString()})`}).join(`
`)},{createElement:xr,Fragment:yr,useEffect:Kt,useRef:Xt,useState:jr}=xs,Wt={behavior:"instant",block:"nearest"},ye=e=>e<1e3?e:(e/1e3).toFixed(e<1e4?1:0)+(e<1e3?"":"k"),Se=e=>new Date(e).toLocaleDateString(),W=({repoId:e,isCurrent:t=!1,hardcodedName:s})=>{const o=Ee("repoId",()=>e,[e]),r=Xt(null);Kt(()=>{var p;t&&((p=r.current)==null||p.scrollIntoView(Wt))},[t]);const c=Re(e,"name"),i=Re(e,"stargazersCount");return n.jsx(Q,{variant:"item",ref:r,onClick:o,icon:Re(e,"fork")?ze:Is,title:s??c,titleRight:s?null:n.jsx(U,{icon:et,title:ye(i)}),current:t})};var $o="_1ul10dk0",Uo="_1ul10dk1";const Oo=()=>n.jsxs(H,{className:$o,children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:Uo}),n.jsx("h2",{children:"Welcome to TinyHub"}),n.jsx("p",{children:"Navigate to your own repos from the sidebar, or go directly to one of the popular ones below."}),n.jsx(Z,{}),n.jsx(W,{repoId:"facebook/react",hardcodedName:"React"}),n.jsx(W,{repoId:"vuejs/vue",hardcodedName:"Vue"}),n.jsx(W,{repoId:"tensorflow/tensorflow",hardcodedName:"TensorFlow"}),n.jsx(W,{repoId:"torvalds/linux",hardcodedName:"Linux"}),n.jsx(W,{repoId:"ohmyzsh/ohmyzsh",hardcodedName:"Oh My Zsh"})]});var Mo="_1nl4udb0",Ho="_1nl4udb1";const Go=({issueId:e})=>n.jsxs(n.Fragment,{children:[n.jsxs(Pt,{icon:$(e,"pullRequest")?_t:ve,children:[n.jsx("h2",{children:$(e,"title")}),n.jsxs("p",{children:["Created ",Se($(e,"createdAt")),"."]}),n.jsxs("p",{children:["Updated ",Se($(e,"updatedAt")),"."]})]}),n.jsx(Z,{}),n.jsx("div",{dangerouslySetInnerHTML:{__html:$(e,"bodyHtml")??""}})]}),Vo=({issueId:e,isCurrent:t})=>{const s=Ee("issueId",()=>e,[e]),o=Xt(null);return Kt(()=>{var r;t&&((r=o.current)==null||r.scrollIntoView(Wt))},[t]),n.jsx(Q,{variant:"item",ref:o,onClick:s,icon:$(e,"pullRequest")?_t:ve,title:$(e,"title"),titleRight:n.jsx(U,{title:`#${e}`}),current:t})},zo=({currentIssueId:e,issueIds:t})=>t.map(s=>n.jsx(Vo,{issueId:s,isCurrent:s==e},s)),qo=()=>{const e=O("repoId"),t=O("issueId"),s=Ae("issuesSortCell"),o=s=="title",r=fn(s,!o),c=Ee("issueId",i=>i);return k.useEffect(()=>{r.length>0&&(t==""||!r.includes(t))&&c(r[0])},[r,t,c]),n.jsx(ke,{id:"issues",title:"Issues",titleRight:n.jsx(U,{icon:ve,variant:"accent",title:Re(e,"openIssuesCount")}),children:n.jsxs(qe,{variant:"1|2",children:[n.jsx("nav",{className:Mo,children:n.jsx(zo,{currentIssueId:t,issueIds:r})}),$(t,"title")?n.jsx(H,{className:Ho,children:n.jsx(Go,{issueId:t})}):null]})})};var Yo="wm8fek2";const Bo=()=>{const e=y("homepage");return n.jsxs(ke,{title:n.jsx("b",{children:"Summary"}),titleRight:n.jsxs("div",{className:Yo,children:[n.jsx(U,{title:y("visibility"),icon:Es,variant:"accent"}),y("fork")?n.jsx(U,{title:"fork",icon:ze,variant:"accent"}):null,y("archived")?n.jsx(U,{title:"archived",icon:As,variant:"accent"}):null,y("disabled")?n.jsx(U,{title:"disabled",icon:Ls,variant:"accent"}):null]}),id:"repoHeader",startOpen:!0,children:[n.jsxs(qe,{variant:"2|1",children:[n.jsxs(Pt,{src:y("avatarUrl"),children:[n.jsx("h2",{children:y("name")}),n.jsx("p",{children:y("description")}),n.jsxs("p",{children:["Created ",Se(y("createdAt")),", updated"," ",Se(y("updatedAt")),"."]}),e?n.jsx("p",{children:n.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:e})}):null]}),n.jsx(H,{children:n.jsx(bs,{data:{Owner:y("owner"),Link:n.jsx("a",{href:y("githubUrl"),target:"_blank",rel:"noreferrer",children:"GitHub"}),Language:y("language"),License:y("license")}})})]}),n.jsx(Z,{}),n.jsxs(qe,{variant:"1|1|1",children:[n.jsx(H,{children:n.jsx(Fe,{icon:et,title:"Stars",number:ye(y("stargazersCount"))})}),n.jsx(H,{children:n.jsx(Fe,{icon:ze,title:"Forks",number:ye(y("forksCount"))})}),n.jsx(H,{children:n.jsx(Fe,{icon:ve,title:"Issues",number:ye(y("openIssuesCount"))})})]})]})},Ko=()=>{const e=O("repoId"),t=y("id");return e==t?n.jsxs(n.Fragment,{children:[n.jsx(Bo,{}),n.jsx(qo,{})]}):null},Xo={title:"title",createdAt:"most recently created",updatedAt:"most recently updated",pullRequest:"pull requests then issues"},Wo=()=>{const e=Ae("issuesSortCell"),t=Ot("issuesSortCell",s=>s.target.value,[]);return n.jsxs("div",{children:[n.jsx("label",{children:"Issues sorted by"}),n.jsx("select",{onChange:t,value:e,children:Object.entries(Xo).map(([s,o])=>n.jsx("option",{value:s,children:o},s))})]})},Jo=({group:e,currentRepoId:t})=>{const s=Mn(e);return n.jsx(ke,{id:`repoGroup/${e}`,icon:e=="Starred"?et:ws,title:e,titleRight:n.jsx(U,{variant:"accent",title:s.length}),children:s.map(o=>n.jsx(W,{repoId:o,isCurrent:o==t},o))},e)},Qo=()=>{const e=O("repoId");return On().map(t=>n.jsx(Jo,{group:t,currentRepoId:e},t))},Zo={name:"name",stargazersCount:"stars",forksCount:"forks",openIssuesCount:"issues",createdAt:"most recently created",updatedAt:"most recently updated",fork:"repos then forks"},er=()=>{const e=Ae("reposSortCell"),t=Ot("reposSortCell",s=>s.target.value,[]);return n.jsxs("div",{children:[n.jsx("label",{children:"Repos sorted by"}),n.jsx("select",{onChange:t,value:e,children:Object.entries(Zo).map(([s,o])=>n.jsx("option",{value:s,children:o},s))})]})},tr=()=>{const e=O("repoId"),t=Ee("repoId",()=>"");return n.jsxs(n.Fragment,{children:[n.jsx(Q,{variant:"item",onClick:t,icon:Ps,title:"Home",current:!e}),n.jsx(Z,{}),n.jsx(Qo,{}),n.jsx(Z,{}),n.jsxs(ke,{icon:_s,title:"Settings",children:[n.jsx(er,{}),n.jsx(Wo,{})]})]})};var sr="_1cl0umd0",nr="_1cl0umd1",or="_1cl0umd2";const rr=()=>{var t;const e=(((t=Ut())==null?void 0:t.length)??0)>0;return n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:Ns(sr,e&&nr)}),n.jsx("h1",{children:"TinyHub"}),n.jsx(Q,{variant:"icon",icon:Fs,href:"https://github.com/tinyplex/tinyhub",alt:"A local-first GitHub client, built in public.",className:or})]})};var ar="yugd9z0",cr="yugd9z1";const lr=()=>n.jsxs(H,{className:ar,children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:cr}),n.jsx("h2",{children:"Welcome to TinyHub"}),n.jsx("p",{children:"TinyHub is a local-first GitHub client, built in public."}),n.jsx(Z,{}),n.jsx("p",{children:"Login with GitHub to get started."}),n.jsx(Bt,{})]}),ir=()=>n.jsx(Os,{manager:Ao(),children:n.jsxs(Ts,{children:[n.jsx(Xn,{}),n.jsx(Hn,{}),n.jsx(jn,{}),n.jsx(pn,{}),n.jsx(nn,{}),n.jsx(En,{}),n.jsx(ur,{}),n.jsx(Ss,{})]})}),ur=()=>{const e=We("name"),t=O("repoId");return n.jsx(Ds,{title:n.jsx(rr,{}),topNavRight:n.jsx(Bt,{}),sideNav:e?n.jsx(tr,{}):null,main:e?t?n.jsx(Ko,{}):n.jsx(Oo,{}):n.jsx(lr,{}),footer:Do})};addEventListener("load",()=>ys.createRoot(document.getElementById("app")).render(n.jsx(ir,{})));
