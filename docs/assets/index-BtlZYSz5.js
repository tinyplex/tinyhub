import{r as T,j as n,R as Rs,c as ms}from"./react-D4UEBxRr.js";import{e as se,f as ne,g as xs,h as de,i as Ss,P as ys,I as js}from"./tinybase-DY3Fq8hg.js";import{I as Ts,B as Q,L as Cs,G as Ve,a as Is,T as O,S as Ze,C as U,H as Z,b as _t,c as wt,d as Ce,e as Ie,R as ze,D as vs,M as Ne,E as ks,A as bs,f as Es,U as Ps,g as As,h as Ls,i as _s,j as ws,k as Ns}from"./tinywidgets-BXglps2t.js";import{O as $s}from"./octokit-CHz68Lcr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const Ds="tinytick",$e=globalThis,ee=e=>e==null,Fs=(e,t,s)=>ee(e)?s==null?void 0:s():t(e),Tt=e=>e.length,De=Ds+"_uirc",Nt=$e[De]?$e[De]:$e[De]=T.createContext([]),Os=({manager:e,children:t})=>n.jsx(Nt.Provider,{value:T.useMemo(()=>[e],[e]),children:t}),Us=(e,t)=>e.every(t),Ms=(e,t)=>!ee(e)&&!ee(t)&&Tt(e)===Tt(t)&&Us(e,(s,o)=>t[o]===s),$t=Object,Ct=e=>$t.getPrototypeOf(e),Hs=e=>!ee(e)&&Fs(Ct(e),t=>t==$t.prototype||ee(Ct(t)),()=>!0),te=[],It=[[],0,!1],Gs=[Ms],Vs=(e,t)=>e===t,Dt=(e,t,s=te)=>{const o=ve(),r=T.useRef(It[t]),c=T.useCallback(()=>{var g;const p=ee(o)?void 0:((g=o["get"+e])==null?void 0:g.call(o,...s.filter(R=>R!==null)))??It[t];return(Gs[t]??Vs)(p,r.current)?r.current:r.current=p},[o,t,e,...s]),l=T.useCallback(p=>zs(o,e,...s,p),[o,t,e,...s]);return T.useSyncExternalStore(l,c,c)},zs=(e,t,...s)=>{var r;const o=(r=e==null?void 0:e["add"+t+"Listener"])==null?void 0:r.call(e,...s);return()=>{var c;return(c=e==null?void 0:e.delListener)==null?void 0:c.call(e,o)}},Bs=(e,t,s=te)=>{const o=Ys(e,t,s);return T.useMemo(o,[o])},Ys=(e,t,s=te)=>{const o=ve();return T.useCallback(()=>o==null?void 0:o.scheduleTaskRun(...e,t),[o,...e,...s])},qs=(e,t=te)=>T.useMemo(e,t),ve=()=>T.useContext(Nt)[0],Ks=()=>Dt("ScheduledTaskRunIds",0),Xs=()=>Dt("RunningTaskRunIds",0),$=(e,t,s=te,o,r,c=te)=>{const l=ve();T.useLayoutEffect(()=>(l==null||l.setTask(e,t,o,r),()=>{l==null||l.delTask(e)}),[l,e,...s,o,...c])},ke=(e,t,s,o,r)=>Bs(...Hs(e)?[[e.taskId,e.arg,e.startAfter],e.config,t]:[[e,t,s],o,r]),H=100,Js={per_page:5},Ws=5,Qs=/<([^>]+)>/,G=new $s({auth:localStorage.getItem("token")}),D=()=>localStorage.getItem("token")!=null,Be=e=>{var s;const t=(s=e.headers)==null?void 0:s.link;if(t){const o=t.split(",").find(r=>r.endsWith('rel="next"'));if(o){const[,r]=o.match(Qs)??[];if(r){const c=new URL(r).searchParams.get("page");if(c)return c}}}},le=e=>{const t=parseInt(e??"");return{per_page:Ws,...isNaN(t)?{}:{page:t}}},et="view",Zs={repoId:{type:"string",default:""},issueId:{type:"string",default:""}},{useCreateStore:en,useProvideStore:tn,useCreatePersister:sn,useValue:nn,useSetValueCallback:on}=se,M=e=>nn(e,et),be=(e,t,s)=>on(e,t,s,et),rn=()=>{const e=en(()=>ne().setValuesSchema(Zs));return sn(e,t=>xs(t,async()=>{const[s,o,r]=location.hash.slice(1).split("/");return[{},{repoId:s&&o?s+"/"+o:"",issueId:r}]},async s=>{const{repoId:o,issueId:r}=s()[1];location.hash=o+"/"+r},s=>{const o=()=>s();return window.addEventListener("hashchange",o),o},s=>window.removeEventListener("hashchange",s)),[],async t=>{await t.startAutoLoad(),await t.startAutoSave()}),tn(et,e),null},Se="issues",tt="issues",an="issues",cn={issues:{title:{type:"string",default:""},pullRequest:{type:"boolean",default:!1},bodyHtml:{type:"string",default:""},createdAt:{type:"string",default:""},updatedAt:{type:"string",default:""}}},{useCreateStore:ln,useProvideStore:un,useCreatePersister:dn,useCell:fn,useSortedRowIds:pn,usePersisterStatus:hn}=se,F=(e,t)=>fn(tt,e,t,Se),gn=(e,t)=>pn(tt,e,t,void 0,void 0,Se),Rn=()=>hn(an),mn=()=>{const e=M("repoId"),t=ln(()=>ne().setTablesSchema(cn),[e]);return un(Se,t),dn(t,s=>{if(e)return de(s,e+"/"+Se)},[e],async s=>s==null?void 0:s.startAutoPersisting(),[]),xn(t,e),null},xn=(e,t)=>{$("fetchIssues",async(s='[""]',o,{manager:r,taskId:c})=>{const[l,p="1"]=JSON.parse(s);if(D()&&l){const[g,R]=l.split("/"),x=await G.rest.issues.listForRepo({owner:g,repo:R,mediaType:{format:"html"},...le(p)});x.data.forEach(({number:C,title:re,pull_request:E,body_html:z,created_at:L,updated_at:B})=>e.setRow(tt,C+"",{title:re,pullRequest:E!=null,bodyHtml:z??"",createdAt:L,updatedAt:B}));const m=Be(x);m&&await r.untilTaskRunDone(r.scheduleTaskRun(c,JSON.stringify([l,m]),H))}},[e],"multiFetch"),ke("fetchIssues",JSON.stringify([t]))},Ye="repo",Sn="repo",yn={id:{type:"string",default:""},owner:{type:"string",default:""},avatarUrl:{type:"string",default:""},name:{type:"string",default:""},archived:{type:"boolean",default:!1},createdAt:{type:"string",default:""},description:{type:"string",default:""},disabled:{type:"boolean",default:!1},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},homepage:{type:"string",default:""},githubUrl:{type:"string",default:""},language:{type:"string",default:""},license:{type:"string",default:""},openIssuesCount:{type:"number",default:0},size:{type:"number",default:0},stargazersCount:{type:"number",default:0},topics:{type:"string",default:""},updatedAt:{type:"string",default:""},visibility:{type:"string",default:""}},{useCreateStore:jn,useProvideStore:Tn,useCreatePersister:Cn,usePersisterStatus:In,useValue:vn}=se,S=e=>vn(e,Ye),kn=()=>In(Sn),bn=()=>{const e=M("repoId"),t=jn(()=>ne().setValuesSchema(yn),[e]);return Tn(Ye,t),Cn(t,s=>{if(e)return de(s,e+"/"+Ye)},[e],s=>s==null?void 0:s.startAutoPersisting(),[]),En(t,e),null},En=(e,t)=>{$("fetchRepo",async(s="")=>{if(D()&&s){const[o,r]=s.split("/"),{owner:c,name:l,archived:p,created_at:g,description:R,disabled:x,fork:m,forks_count:C,homepage:re,html_url:E,language:z,license:L,open_issues_count:B,size:ae,stargazers_count:ce,topics:Y,updated_at:fe,visibility:q}=(await G.rest.repos.get({owner:o,repo:r,...Js})).data;e.setValues({id:c.login+"/"+l,owner:c.login,avatarUrl:c.avatar_url,name:l,archived:p??!1,createdAt:g??"",description:R??"",disabled:x??!1,fork:m,forksCount:C??0,githubUrl:E??"",homepage:re??"",language:z??"",license:(L==null?void 0:L.name)??"",openIssuesCount:B??0,size:ae??0,stargazersCount:ce??0,topics:(Y==null?void 0:Y.join(", "))??"",updatedAt:fe??"",visibility:q??""})}},[e],"singleFetch"),ke("fetchRepo",t)},ye="settings",Pn={reposSortCell:{type:"string",default:"stars"},issuesSortCell:{type:"string",default:"updatedAt"}},{useCreateStore:An,useProvideStore:Ln,useCreatePersister:_n,useValue:wn,useSetValueCallback:Nn}=se,Ee=e=>wn(e,ye),Ft=(e,t,s)=>Nn(e,t,s,ye),$n=()=>{const e=An(()=>ne().setValuesSchema(Pn));return _n(e,t=>de(t,ye),[],t=>t.startAutoPersisting()),Ln(ye,e),null},Dn=1e3*60*60,qe="repos",b="repos",st="repos",nt="reposByGroup",Fn="repos",On={repos:{owner:{type:"string",default:""},name:{type:"string",default:""},starred:{type:"boolean",default:!1},createdAt:{type:"string",default:""},fork:{type:"boolean",default:!1},forksCount:{type:"number",default:0},openIssuesCount:{type:"number",default:0},stargazersCount:{type:"number",default:0},updatedAt:{type:"string",default:""},stale:{type:"boolean",default:!1}}},{useCell:Un,useCreatePersister:Mn,useCreateStore:Hn,useProvideStore:Gn,useCreateIndexes:Vn,useProvideIndexes:zn,useSliceRowIds:Bn,usePersisterStatus:Yn,useSliceIds:qn}=se,ge=(e,t)=>Un(b,e,t,qe),Kn=()=>qn(nt,st),Xn=e=>Bn(nt,e,st),Jn=()=>Yn(Fn),Wn=()=>{const e=Hn(()=>ne().setTablesSchema(On));Gn(qe,e);const t=Ee("reposSortCell"),s=t=="name"||t=="fork"?1:-1,o=Vn(e,r=>Ss(r).setIndexDefinition(nt,b,c=>c("starred")?"Starred":c("owner"),t,(c,l)=>c=="Starred"?-1:l=="Starred"||c>l?1:-1,(c,l)=>(c>l?1:-1)*s),[t]);return zn(st,o),Mn(e,r=>de(r,qe),[],r=>r.startAutoPersisting()),Qn(e),null},Qn=e=>{const t=T.useCallback(({full_name:o,owner:r,name:c,created_at:l,fork:p,forks_count:g,open_issues_count:R,stargazers_count:x,updated_at:m},C=!1)=>{(C||e.getCell(b,o,"stale"))&&e.setCell(b,o,"starred",C),e.setPartialRow(b,o,{owner:r.login,name:c,createdAt:l??"",fork:p,forksCount:g??0,openIssuesCount:R??0,stargazersCount:x??0,updatedAt:m??"",stale:!1})},[e]),s=T.useCallback(async(o,r)=>{const c=await o;return c.data.forEach(l=>t(l,r)),Be(c)},[t]);$("fetchReposStarred",async(o="1",r,{manager:c,taskId:l})=>{if(D()){const p=await s(G.rest.activity.listReposStarredByAuthenticatedUser(le(o)),!0);p&&await c.untilTaskRunDone(c.scheduleTaskRun(l,p,H))}},[s],"multiFetch"),$("fetchReposOwned",async(o="1",r,{manager:c,taskId:l})=>{if(D()){const p=await s(G.rest.repos.listForAuthenticatedUser(le(o)));p&&await c.untilTaskRunDone(c.scheduleTaskRun(l,p,H))}},[s],"multiFetch"),$("fetchReposForOrg",async(o='[""]',r,{manager:c,taskId:l})=>{if(D()){const[p,g="1"]=JSON.parse(o),R=await s(G.rest.repos.listForOrg({org:p,...le(g)}));R&&await c.untilTaskRunDone(c.scheduleTaskRun(l,JSON.stringify([p,R]),H))}},[s],"multiFetch"),$("fetchOrgs",async(o,r,{manager:c,taskId:l})=>{if(D()){const p=await G.rest.orgs.listForAuthenticatedUser(le(o)),g=Be(p);g&&await c.untilTaskRunDone(c.scheduleTaskRun(l,g,H)),await Promise.all(p.data.map(({login:R},x)=>c.untilTaskRunDone(c.scheduleTaskRun("fetchReposForOrg",JSON.stringify([R]),x*H))))}},[s],"multiFetch"),$("fetchRepos",async(o,r,{manager:c})=>{e.forEachRow(b,(l,p)=>e.setCell(b,l,"stale",!0)),D()&&await Promise.all(["fetchReposStarred","fetchReposOwned","fetchOrgs"].map((l,p)=>c.untilTaskRunDone(c.scheduleTaskRun({taskId:l,startAfter:p*H})))),e.forEachRow(b,(l,p)=>{e.getCell(b,l,"stale")&&e.delRow(b,l)})},[e],"multiFetch",{repeatDelay:Dn}),ke("fetchRepos")},Zn=1e3*60*60,Ke="user",eo={name:{type:"string"},avatarUrl:{type:"string"}},{useCreateStore:to,useProvideStore:so,useCreatePersister:no,useValue:oo}=se,Xe=e=>oo(e,Ke),ro=()=>{const e=to(()=>ne().setValuesSchema(eo));return no(e,t=>de(t,Ke),[],t=>t.startAutoPersisting()),so(Ke,e),ao(e),null},ao=e=>{$("fetchUser",async()=>{if(D()){const t=await G.rest.users.getAuthenticated();if(t.status==200){const{name:s,login:o,avatar_url:r}=t.data;e.setValues({name:s??o,avatarUrl:r})}}else e.delValues()},[e],"github",{repeatDelay:Zn}),ke({taskId:"fetchUser"})},V="",Ot=e=>typeof e,N=e=>V+e,Je=e=>Ot(e)=="string",co=(e,t=V,s)=>e.split(t,s),vt=globalThis,Ut=Math,io=Ut.floor,lo=63,uo=co("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),fo=31536e6,po=e=>uo[e&lo],W=e=>Ot(e)=="number"&&e>=0,P=e=>e==null,v=(e,t,s)=>P(e)?s==null?void 0:s():t(e),A=e=>e.length,ho=(e,t)=>e.test(t),go=e=>A(e)==0,Re=Date.now,Ro=e=>(W(e)||(e=0),e>fo?e:Re()+e),me=(e,t)=>e.map(t),mo=(e,t,s)=>e.reduce(t,s),ue=(e,t)=>e.forEach(t),kt=(e,t,s,...o)=>e.splice(t,s,...o),Mt=(e,...t)=>e.push(...t),Ht=e=>e.shift(),xo=(e,t)=>e.split(t),So=(e,t)=>e.filter(t),yo=e=>e.size,jo=(e,t)=>e.has(t),Gt=(e,t)=>e.delete(t),ot=e=>yo(e)==0,je=(e,t)=>e==null?void 0:e.forEach(t),bt=e=>e.clear(),I=e=>new Map(e),y=(e,t,s)=>P(s)?(Gt(e,t),e):e==null?void 0:e.set(t,s),We=(e,t,s,o)=>(jo(e,t)?o==null||o(j(e,t)):y(e,t,s()),j(e,t)),j=(e,t)=>e==null?void 0:e.get(t),Et=e=>[...e.keys()],To=(e,t)=>{const s={};return je(e,(o,r)=>s[r]=o),s},Qe=(e,t,s,o,r=0)=>v((s?We:j)(e,t[r],r>A(t)-2?s:I),c=>{if(r>A(t)-2)return o!=null&&o(c)&&y(e,t[r]),c;const l=Qe(c,t,s,o,r+1);return ot(c)&&y(e,t[r]),l}),Co=/^\d+$/,Io=()=>{const e=[];let t=0;return[()=>Ht(e)??V+t++,s=>{ho(Co,s)&&A(e)<1e3&&Mt(e,s)}]},vo=()=>new Set,ko=(e,t)=>e==null?void 0:e.add(t),bo=(e,t=[V])=>{const s=[],o=(r,c)=>c==A(t)?Mt(s,r):ue([t[c],null],l=>o(j(r,l),c+1));return o(e,0),s},Eo=e=>{let t;const[s,o]=Io(),r=I();return[(g,R,x)=>{t??(t=e());const m=s();return y(r,m,[g,R,x]),ko(Qe(R,x??[V],vo),m),m},(g,R,...x)=>ue(bo(g,R),m=>je(m,C=>j(r,C)[0](t,...R??[],...x))),g=>v(j(r,g),([,R,x])=>(Qe(R,x??[V],void 0,m=>(Gt(m,g),ot(m)?1:0)),y(r,g),o(g),x))]},oe=Object,Pt=e=>oe.getPrototypeOf(e),Po=oe.isFrozen,Ao=oe.entries,Lo=(e,t)=>(delete e[t],e),Vt=e=>!P(e)&&v(Pt(e),t=>t==oe.prototype||P(Pt(t)),()=>!0),_o=oe.freeze,rt=(e,t)=>ue(Ao(e),([s,o])=>t(o,s)),he=(...e)=>oe.assign({},...e),wo=e=>(rt(e,(t,s)=>t===void 0?delete e[s]:0),e),zt=(e,t)=>P(e)||!Vt(e)||Po(e)?0:(rt(e,(s,o)=>{t(s,o)||Lo(e,o)}),1),Fe=()=>[I(),I()],No=vt.crypto?e=>vt.crypto.getRandomValues(e):e=>me(e,()=>io(Ut.random()*256)),$o=(e=16)=>mo(No(new Uint8Array(e)),(t,s)=>t+po(s),""),at="tickInterval",ct="maxDuration",it="maxRetries",lt="retryDelay",ut="repeatDelay",Do={[at]:100},Oe={[ct]:1e3,[it]:0,[lt]:1e3,[ut]:null},Fo=/^(\d*\.?\d+)(, ?\d*\.?\d+)*$/,Ue={[at]:W},Me={[ct]:W,[it]:W,[lt]:e=>W(e)||Je(e)&&Fo.test(e),[ut]:e=>W(e)||e===null},He=e=>zt(e,(t,s)=>{var o;return(o=Me[s])==null?void 0:o.call(Me,t)})?e:{},At=e=>{var t;return(t=e[7])==null?void 0:t.abort()},Ge=(e,t)=>rt(t,(s,o)=>e[o]=s),Oo=()=>{let e={},t,s=0;const o=I(),r=I(),c=I(),l=I(),p=Fe(),g=Fe(),R=I(),x=I(),[m,C,re]=Eo(()=>ie),E=[[],[]],z=Fe(),L=I(),B=I(),ae=(a,i,u,d,h)=>{const f=E[a],k=f.findIndex(pe=>pe[2]>d),X=[i,u,d];kt(f,k==-1?A(f):k,0,X),Pe(a,i,u,1,[a==1,h])},ce=(a,i,u,d)=>{const h=E[a],f=h.findIndex(k=>k[1]==u);f!=-1&&(kt(h,f,1),Pe(a,i,u,-1,[void 0,d]))},Y=(a,i)=>{const[u,d]=Ht(E[a]);return Pe(a,u,d,-1,[void 0,i]),[u,d,j(c,d)]},fe=a=>So(me(E[a],i=>i[1]),Je),q=a=>C(l,void 0,s=a),Pe=(a,i,u,d,h)=>{const f=z[a];y(f,u,d),y(We(L,i,I),u,h)},dt=(a,i,u,d=V)=>y(We(B,a,I),i,[u,d]),K=()=>{ue(z,(a,i)=>{ot(a)||(C(g[i],void 0,To(a)),bt(a))}),ue([[L,R],[B,x]],([a,i])=>{je(a,(u,d)=>je(u,(h,f)=>C(i,[d,f],...h))),bt(a)})},Xt=()=>{const a=Re(),[i,u]=E;for(C(p[0]);A(i)&&i[0][2]<=a;){const[d,h,f]=Y(0,1);v(j(r,d),([k])=>{if(P(f[8])){const w=xt(h,!0),we=w[lt];Ge(f,{8:w[ct],9:w[it],10:Je(we)?me(xo(we,","),gs=>parseInt(gs)):[we],11:w[ut]})}const X=a+f[8],pe=new AbortController,{signal:jt}=pe;Ge(f,{6:X,5:!0,7:pe}),ae(1,d,h,X,1),k(f[1],jt,ht(h,f)).then(()=>{f[5]&&jt.aborted===!1&&(ce(1,d,h,2),y(c,h),K(),v(f[11],w=>_e(d,f[1],w,f[3])))}).catch(w=>{ce(1,d,h,4),ft(h,f,Re(),4),dt(d,h,4,w.message),K()})},()=>Ae(h))}for(K();A(u)&&u[0][2]<=a;){const[d,h,f]=Y(1,3);At(f),ft(h,f,a,3),dt(d,h,3)}K(),C(p[1]),s==1||s==2&&!go(i)?pt():(Le(),q(0))},ft=(a,i,u,d)=>{if(i[9]-- >0){const h=i[10],f=A(h)>1?h.shift():h[0],k=u+f;Ge(i,{4:i[4]+1,5:!1,6:k,7:void 0}),ae(0,i[0],a,k,d)}else Ae(a,d)},Ae=(a,i=5)=>v(j(c,a),u=>{At(u),ce(u[5]?1:0,u[0],a,i),y(c,a)}),pt=()=>{Le(),t=setTimeout(Xt,gt(!0)[at])},Le=()=>P(t)?0:clearTimeout(t),ht=(a,[i,u,,,d,h,f])=>wo({manager:ie,taskId:i,taskRunId:a,arg:u,retry:d,running:h,nextTimestamp:f}),_=(a,...i)=>(a(...me(i,N)),ie),Jt=a=>_(()=>zt(a,(i,u)=>{var d;return(d=Ue[u])==null?void 0:d.call(Ue,i)})?e=a:0),gt=a=>he(a?Do:{},e),Wt=(a,i)=>_(u=>y(o,u,He(i)),a),Rt=(a,i)=>v(j(o,N(a)),u=>he(i?Oe:{},u)),Qt=()=>Et(o),Zt=a=>_(i=>y(o,i),a),es=(a,i,u,d={})=>_((h,f)=>y(r,h,[i,f,He(d)]),a,u),mt=(a,i)=>v(j(r,N(a)),([,u,d])=>he(i?Oe:{},i&&!P(u)?Rt(u)??{}:{},d)),ts=()=>Et(r),ss=a=>_(i=>y(r,i),a),_e=(a,i,u=0,d={})=>{if(s==2)return;if(Vt(a))return _e(a.taskId,a.arg,a.startAfter,a.config);const h=$o(),f=Ro(u);return y(c,h,[N(a),i,f,He(d),0,!1,f]),ae(0,N(a),h,f,0),K(),h},xt=(a,i)=>v(j(c,N(a)),([u,,,d])=>he(i?Oe:{},i?mt(u,!0)??{}:{},d)),ns=a=>v(j(c,N(a)),i=>ht(a,i)),os=a=>{var i;return(i=j(c,N(a)))==null?void 0:i[5]},rs=a=>new Promise(i=>v(j(c,a),([u])=>{const d=St(u,a,(h,f,k,X)=>{P(X)&&(yt(d),i())})},i)),as=a=>_(i=>{Ae(i),K()},a),cs=()=>fe(0),is=()=>fe(1),ls=a=>m(a,l),us=a=>m(a,p[0]),ds=a=>m(a,p[1]),fs=a=>m(a,g[0]),ps=a=>m(a,g[1]),St=(a,i,u)=>m(u,R,[a,i]),hs=(a,i,u)=>m(u,x,[a,i]),yt=a=>(re(a),ie),ie={setManagerConfig:Jt,getManagerConfig:gt,setCategory:Wt,getCategoryConfig:Rt,getCategoryIds:Qt,delCategory:Zt,setTask:es,getTaskConfig:mt,getTaskIds:ts,delTask:ss,scheduleTaskRun:_e,getTaskRunConfig:xt,getTaskRunInfo:ns,getTaskRunRunning:os,untilTaskRunDone:rs,delTaskRun:as,getScheduledTaskRunIds:cs,getRunningTaskRunIds:is,addStatusListener:ls,addWillTickListener:us,addDidTickListener:ds,addScheduledTaskRunIdsListener:fs,addRunningTaskRunIdsListener:ps,addTaskRunRunningListener:St,addTaskRunFailedListener:hs,delListener:yt,start:()=>_(()=>{q(1),pt()}),stop:(a=!1)=>_(()=>{a?(q(0),Le()):s!=0&&q(2)}),getStatus:()=>s,getNow:Re};return _o(ie)},Uo=()=>qs(()=>Oo().setManagerConfig({tickInterval:10}).setCategory("singleFetch",{maxDuration:5e3,maxRetries:2,retryDelay:5e3}).setCategory("multiFetch",{maxDuration:3e4,maxRetries:2,retryDelay:15e3}).start()),Mo="#181717",Ho=T.forwardRef(function({title:t="GitHub",color:s="currentColor",size:o=24,...r},c){return s==="default"&&(s=Mo),n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:o,fill:s,viewBox:"0 0 24 24",ref:c,...r,children:[n.jsx("title",{children:t}),n.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})});var Go="zhil3w0";const Vo=()=>location.assign("auth.html"),zo=()=>location.assign("auth.html?logout"),Bt=()=>{const e=Xe("name"),t=Xe("avatarUrl");return e?n.jsxs("div",{className:Go,children:[t?n.jsx(Ts,{variant:"avatar",src:t,alt:e}):null,n.jsx(Q,{onClick:zo,icon:Cs,title:"Logout"})]}):n.jsx(Q,{onClick:Vo,icon:Ho,title:"Login",variant:"accent"})};var Bo="_1ugp98g0";const Yo=()=>{const e=Ks()??[],t=Lt(e),s=e.length,o=Xs()??[],r=Lt(o),c=o.length;return n.jsx("div",{className:Bo,children:c>0?n.jsxs("div",{title:r,children:[c," tasks running"]}):s>0?n.jsxs("div",{title:t,children:[s," tasks scheduled"]}):"Idle"})},Lt=e=>{const t=ve();return e.map(s=>{const{taskId:o,nextTimestamp:r=0}=(t==null?void 0:t.getTaskRunInfo(s))??{};return`• ${o} (${new Date(r).toLocaleTimeString()})`}).join(`
`)},{createElement:Er,Fragment:Pr,useEffect:Yt,useRef:qt,useState:Ar}=Rs,Kt={behavior:"instant",block:"nearest"},xe=e=>e<1e3?e:(e/1e3).toFixed(e<1e4?1:0)+(e<1e3?"":"k"),Te=e=>new Date(e).toLocaleDateString(),J=({repoId:e,isCurrent:t=!1,hardcodedName:s})=>{const o=be("repoId",()=>e,[e]),r=qt(null);Yt(()=>{var p;t&&((p=r.current)==null||p.scrollIntoView(Kt))},[t]);const c=ge(e,"name"),l=ge(e,"stargazersCount");return n.jsx(Q,{variant:"item",ref:r,onClick:o,icon:ge(e,"fork")?Ve:Is,title:s??c,titleRight:s?null:n.jsx(O,{icon:Ze,title:xe(l)}),current:t})};var qo="_1ul10dk0",Ko="_1ul10dk1";const Xo=()=>n.jsxs(U,{className:qo,children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:Ko}),n.jsx("h2",{children:"Welcome to TinyHub"}),n.jsx("p",{children:"Navigate to your own repos from the sidebar, or go directly to one of the popular ones below."}),n.jsx(Z,{}),n.jsx(J,{repoId:"facebook/react",hardcodedName:"React"}),n.jsx(J,{repoId:"vuejs/vue",hardcodedName:"Vue"}),n.jsx(J,{repoId:"tensorflow/tensorflow",hardcodedName:"TensorFlow"}),n.jsx(J,{repoId:"torvalds/linux",hardcodedName:"Linux"}),n.jsx(J,{repoId:"ohmyzsh/ohmyzsh",hardcodedName:"Oh My Zsh"})]});var Jo="_1nl4udb0",Wo="_1nl4udb1";const Qo=({issueId:e})=>n.jsxs(n.Fragment,{children:[n.jsxs(_t,{icon:F(e,"pullRequest")?wt:Ce,children:[n.jsx("h2",{children:F(e,"title")}),n.jsxs("p",{children:["Created ",Te(F(e,"createdAt")),"."]}),n.jsxs("p",{children:["Updated ",Te(F(e,"updatedAt")),"."]})]}),n.jsx(Z,{}),n.jsx("div",{dangerouslySetInnerHTML:{__html:F(e,"bodyHtml")??""}})]}),Zo=({issueId:e,isCurrent:t})=>{const s=be("issueId",()=>e,[e]),o=qt(null);return Yt(()=>{var r;t&&((r=o.current)==null||r.scrollIntoView(Kt))},[t]),n.jsx(Q,{variant:"item",ref:o,onClick:s,icon:F(e,"pullRequest")?wt:Ce,title:F(e,"title"),titleRight:n.jsx(O,{title:`#${e}`}),current:t})},er=({currentIssueId:e,issueIds:t})=>t.map(s=>n.jsx(Zo,{issueId:s,isCurrent:s==e},s)),tr=()=>{const e=M("repoId"),t=M("issueId"),s=Ee("issuesSortCell"),o=s=="title",r=gn(s,!o),c=be("issueId",l=>l);return T.useEffect(()=>{r.length>0&&(t==""||!r.includes(t))&&c(r[0])},[r,t,c]),n.jsx(Ie,{id:"issues",title:"Issues",titleRight:n.jsx(O,{icon:Ce,variant:"accent",title:ge(e,"openIssuesCount")}),children:n.jsxs(ze,{variant:"1|2",children:[n.jsx(U,{className:Jo,children:n.jsx(er,{currentIssueId:t,issueIds:r})}),F(t,"title")?n.jsx(U,{className:Wo,children:n.jsx(Qo,{issueId:t})}):null]})})};var sr="wm8fek2";const nr=()=>{const e=S("homepage");return n.jsxs(Ie,{title:n.jsx("b",{children:"Summary"}),titleRight:n.jsxs("div",{className:sr,children:[n.jsx(O,{title:S("visibility"),icon:ks,variant:"accent"}),S("fork")?n.jsx(O,{title:"fork",icon:Ve,variant:"accent"}):null,S("archived")?n.jsx(O,{title:"archived",icon:bs,variant:"accent"}):null,S("disabled")?n.jsx(O,{title:"disabled",icon:Es,variant:"accent"}):null]}),id:"repoHeader",startOpen:!0,children:[n.jsxs(ze,{variant:"2|1",children:[n.jsxs(_t,{src:S("avatarUrl"),children:[n.jsx("h2",{children:S("name")}),n.jsx("p",{children:S("description")}),n.jsxs("p",{children:["Created ",Te(S("createdAt")),", updated"," ",Te(S("updatedAt")),"."]}),e?n.jsx("p",{children:n.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:e})}):null]}),n.jsx(U,{children:n.jsx(vs,{data:{Owner:S("owner"),Link:n.jsx("a",{href:S("githubUrl"),target:"_blank",rel:"noreferrer",children:"GitHub"}),Language:S("language"),License:S("license")}})})]}),n.jsx(Z,{}),n.jsxs(ze,{variant:"1|1|1",children:[n.jsx(U,{children:n.jsx(Ne,{icon:Ze,title:"Stars",number:xe(S("stargazersCount"))})}),n.jsx(U,{children:n.jsx(Ne,{icon:Ve,title:"Forks",number:xe(S("forksCount"))})}),n.jsx(U,{children:n.jsx(Ne,{icon:Ce,title:"Issues",number:xe(S("openIssuesCount"))})})]})]})},or=()=>{const e=M("repoId"),t=S("id");return e==t?n.jsxs(n.Fragment,{children:[n.jsx(nr,{}),n.jsx(tr,{})]}):null},rr={title:"title",createdAt:"most recently created",updatedAt:"most recently updated",pullRequest:"pull requests then issues"},ar=()=>{const e=Ee("issuesSortCell"),t=Ft("issuesSortCell",s=>s.target.value,[]);return n.jsxs("div",{children:[n.jsx("label",{children:"Issues sorted by"}),n.jsx("select",{onChange:t,value:e,children:Object.entries(rr).map(([s,o])=>n.jsx("option",{value:s,children:o},s))})]})},cr=({group:e,currentRepoId:t})=>{const s=Xn(e);return n.jsx(Ie,{id:`repoGroup/${e}`,icon:e=="Starred"?Ze:Ps,title:e,titleRight:n.jsx(O,{variant:"accent",title:s.length}),children:s.map(o=>n.jsx(J,{repoId:o,isCurrent:o==t},o))},e)},ir=()=>{const e=M("repoId");return Kn().map(t=>n.jsx(cr,{group:t,currentRepoId:e},t))},lr={name:"name",stargazersCount:"stars",forksCount:"forks",openIssuesCount:"issues",createdAt:"most recently created",updatedAt:"most recently updated",fork:"repos then forks"},ur=()=>{const e=Ee("reposSortCell"),t=Ft("reposSortCell",s=>s.target.value,[]);return n.jsxs("div",{children:[n.jsx("label",{children:"Repos sorted by"}),n.jsx("select",{onChange:t,value:e,children:Object.entries(lr).map(([s,o])=>n.jsx("option",{value:s,children:o},s))})]})},dr=()=>{const e=M("repoId"),t=be("repoId",()=>"");return n.jsxs(n.Fragment,{children:[n.jsx(Q,{variant:"item",onClick:t,icon:As,title:"Home",current:!e}),n.jsx(Z,{}),n.jsx(ir,{}),n.jsx(Z,{}),n.jsxs(Ie,{icon:Ls,title:"Settings",children:[n.jsx(ur,{}),n.jsx(ar,{})]})]})};var fr="_1cl0umd0",pr="_1cl0umd1",hr="_1cl0umd2";const gr=()=>{const e=Jn()+kn()+Rn();return n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:_s(fr,e>0&&pr)}),n.jsx("h1",{children:"TinyHub"}),n.jsx(Q,{variant:"icon",icon:ws,href:"https://github.com/tinyplex/tinyhub",alt:"A local-first GitHub client, built in public.",className:hr})]})};var Rr="yugd9z0",mr="yugd9z1";const xr=()=>n.jsxs(U,{className:Rr,children:[n.jsx("img",{src:"/favicon.svg",alt:"TinyHub logo",className:mr}),n.jsx("h2",{children:"Welcome to TinyHub"}),n.jsx("p",{children:"TinyHub is a local-first GitHub client, built in public."}),n.jsx(Z,{}),n.jsx("p",{children:"Login with GitHub to get started."}),n.jsx(Bt,{})]}),Sr=()=>n.jsx(Os,{manager:Uo(),children:n.jsxs(ys,{children:[n.jsx(ro,{}),n.jsx(Wn,{}),n.jsx(bn,{}),n.jsx(mn,{}),n.jsx(rn,{}),n.jsx($n,{}),n.jsx(yr,{}),n.jsx(js,{})]})}),yr=()=>{const e=Xe("name"),t=M("repoId");return n.jsx(Ns,{title:n.jsx(gr,{}),topNavRight:n.jsx(Bt,{}),sideNav:e?n.jsx(dr,{}):null,main:e?t?n.jsx(or,{}):n.jsx(Xo,{}):n.jsx(xr,{}),footer:Yo})};addEventListener("load",()=>ms.createRoot(document.getElementById("app")).render(n.jsx(Sr,{})));
